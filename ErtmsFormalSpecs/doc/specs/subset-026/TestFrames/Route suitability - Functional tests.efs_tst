<Frame
 CycleDuration="0.1"
 Name="Route suitability - Functional tests"
 Guid="2064d644-0aa2-4ee7-b226-1cad2774a63b"
>
<SubSequences>
<SubSequence
 D_LRBG=""
 Level=""
 Mode=""
 NID_LRBG=""
 Q_DIRLRBG=""
 Q_DIRTRAIN=""
 Q_DLRBG=""
 RBC_ID=""
 RBCPhone=""
 Name="Handle route suitability data"
 Guid="2de400e8-76dc-4bb1-888a-6f1ac62158d8"
>
<TestCases>
<TestCase
 Name="Setup"
 Guid="07a2596f-970e-4c2b-8ee8-3747a2a0c0ce"
>
<Steps>
<Step
 IO="NA"
 LevelIN="NA"
 LevelOUT="NA"
 ModeIN="NA"
 ModeOUT="NA"
 Name="Step1 - Initialize train data"
 Guid="5ff6e63a-0856-472e-951f-753e4f7e7fc7"
>
<SubSteps>
<SubStep
 Name="SubStep1 - Initialize test environment"
 Guid="78024ff6-7571-41b0-b8c2-40391d543185"
>
<Actions>
<Action
 Guid="7bd1c3e7-2578-4737-bc35-7bf501ee8089"
>Kernel.InitializeTestEnvironment()</Action></Actions>
</SubStep><SubStep
 Name="Sub-step2 - Setup for the BG"
 Guid="b7fc74df-4aa7-47f0-8ab5-43cd83d7857e"
>
<Actions>
<Action
 Guid="f12bf86a-c22c-4e25-aea2-a43022dae57e"
>BTM.LRBG &lt;- EMPTY</Action><Action
 Guid="da854a71-291c-446c-bf14-78cd1f1c1eb5"
>BTM.PreviousLRBGs &lt;- []</Action><Action
 Guid="c52d0e63-7526-4e71-a8e0-641715e2cf29"
>Odometry.NominalDistance &lt;- 0.0</Action></Actions>
</SubStep></SubSteps>
</Step></Steps>
</TestCase><TestCase
 Name="Message from a balise"
 Guid="d22a6160-6365-4bff-bfb6-41f69cab9ceb"
>
<Steps>
<Step
 IO="NA"
 LevelIN="NA"
 LevelOUT="NA"
 ModeIN="NA"
 ModeOUT="NA"
 Name="Step1 - Receive the message from the balise"
 Guid="e7e0af1b-05c9-4981-b4e6-b8d366d1bb80"
>
<SubSteps>
<SubStep
 Name="SubStep1"
 Guid="9f468db7-a6d1-4d77-8b66-df4150604482"
>
<Actions>
<Action
 Guid="3d373245-3e5e-4372-a97c-ad10b6cf9cb4"
>BTM.Message &lt;- Messages.EUROBALISE.Message
 {
    Q_UPDOWN =&gt; Messages.Q_UPDOWN.Up_link_telegram,
    M_VERSION =&gt; 1,
    Q_MEDIA =&gt; Messages.Q_MEDIA.Balise,
    N_PIG =&gt; Messages.N_PIG._1C,
    N_TOTAL =&gt; Messages.N_TOTAL._1_balise_in_groupC,
    M_DUP =&gt; Messages.M_DUP.No_duplicates,
    M_MCOUNT =&gt; 1,
    NID_C =&gt; 80,
    NID_BG =&gt; 256,
    Q_LINK =&gt; Messages.Q_LINK.Unlinked,
    Sequence1 =&gt; 
     [
        Messages.EUROBALISE.SubStructure1
         {
            TRACK_TO_TRAIN=&gt;Messages.PACKET.TRACK_TO_TRAIN.Message
             {
                ROUTE_SUITABILITY_DATA =&gt; Messages.PACKET.TRACK_TO_TRAIN.ROUTE_SUITABILITY_DATA.Message
                 {
                      NID_PACKET =&gt; 70,
                      Q_DIR =&gt; Messages.Q_DIR.Nominal,
                      L_PACKET =&gt; 1,
                      Q_SCALE =&gt; Messages.Q_SCALE._1_m_scaleC,
                      Q_TRACKINIT =&gt; 0,

                      D_SUITABILITY =&gt; 1000,
                      Q_SUITABILITY =&gt; Messages.Q_SUITABILITY.Loading_gauge_profile,
                      M_LINEGAUGE =&gt; Messages.M_LINEGAUGE.GB,

                      N_ITER =&gt; 2,
                      Sequence1 =&gt; [
                        Messages.PACKET.TRACK_TO_TRAIN.ROUTE_SUITABILITY_DATA.SubStructure1{
                            D_SUITABILITY =&gt; 1000,
                            Q_SUITABILITY =&gt; Messages.Q_SUITABILITY.Max_axle_load,
                            M_AXLELOADCAT =&gt; Messages.M_AXLELOADCAT.D4
                         }
                        ,
                        Messages.PACKET.TRACK_TO_TRAIN.ROUTE_SUITABILITY_DATA.SubStructure1{
                            D_SUITABILITY =&gt; 1000,
                            Q_SUITABILITY =&gt; Messages.Q_SUITABILITY.Traction_system,
                            M_VOLTAGE =&gt; Messages.M_VOLTAGE.AC_25_kV_50_Hz,
                            NID_CTRACTION =&gt; 80
                         }
                     ]
                 }
             }
         }
     ]
 }</Action><Action
 Guid="399fb599-76dc-4a54-acf0-c76531a8f4ef"
>BTM.LRBG &lt;- BTM.BaliseGroup
{
    NID =&gt; 256,
    Orientation =&gt; Default.Orientation.Nominal,
    Position =&gt; BTM.Position
    {
        OverReadingAmountOdo =&gt; 2.0,
        Position =&gt; 250.0,
        UnderReadingAmountOdo =&gt; 2.0

    }
}</Action></Actions>
</SubStep><SubStep
 Name="Sub-step2"
 Guid="48c9c39a-a577-42d9-84b1-c97aff49fca5"
>
<Expectations>
<Expectation
 Kind="Instantaneous"
 DeadLine="1"
 Guid="82f2c959-8946-4923-9bf9-22f4c7447a4d"
>FIRST_IN Kernel.TrackDescription.RouteSuitability.RouteSuitabilityProfile.Items</Expectation><Expectation
 Kind="Instantaneous"
 DeadLine="1"
 Guid="e95e1b32-981a-46a5-a7b3-20d48794abf8"
>(COUNT Kernel.TrackDescription.RouteSuitability.RouteSuitabilityProfile.Items) == 3</Expectation><Expectation
 Kind="Instantaneous"
 DeadLine="1"
 Guid="e6c74a23-51b5-4490-8325-aa5f74995ad6"
></Expectation><Expectation
 Kind="Instantaneous"
 DeadLine="1"
 Guid="1fa482c6-03b5-4d51-81eb-be4531727386"
>Kernel.TrackDescription.RouteSuitability.RouteSuitabilityProfile.InitialState == 0</Expectation></Expectations>
</SubStep></SubSteps>
</Step></Steps>
</TestCase></TestCases>
</SubSequence></SubSequences>
</Frame>
