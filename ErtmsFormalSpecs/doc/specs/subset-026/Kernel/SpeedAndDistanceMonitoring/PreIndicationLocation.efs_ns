<NameSpace
 X="790"
 Y="260"
 Width="100"
 Height="50"
 Name="PreIndicationLocation"
 Guid="8975141d-87b4-4f7b-9cfd-a0e026aa8ac1"
>
<Comment></Comment>
<NameSpaces>
</NameSpaces>
<Functions>
<Function
 Type="Default.BaseTypes.Distance"
 Default=""
 X="20"
 Y="160"
 Width="100"
 Height="50"
 Pinned="TRUE"
 Implemented="TRUE"
 Name="d_EBI"
 Guid="25077a4d-2005-43b7-85bb-9a493f2c72ce"
>
<ReqRef
 Id="f9c8f255-fec3-4713-857e-21091c0091c9"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="3768988d-0555-4999-a915-f2c5e1fd341b"
>
</ReqRef><ReqRef
 Id="528dbfd7-4b7d-4b1d-a596-153aec151d71"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="022c9766-37b5-4bff-8ea9-df8abbd77804"
>
</ReqRef><ReqRef
 Id="0c5eaae4-4be7-4f73-ba4d-93cbbc028872"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="f3cede9b-4af3-405c-8b69-e270992d68bb"
>
</ReqRef><ReqRef
 Id="de364883-d636-476b-8455-154f2ebd4444"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="b8818d9a-6013-4c77-921c-fda56989f114"
>
</ReqRef><ReqRef
 Id="dbce4b67-1a6f-4e35-ae83-e827c8a25a48"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="3ef276ec-40b4-40eb-95f9-2b3c84d6c74d"
>
</ReqRef><ReqRef
 Id="8e95d803-0ad3-43b6-b488-8471ea3f792a"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="82f94d4f-3245-4766-af85-37a1f9833c5e"
>
</ReqRef><Comment>Provides the location of the EBI supervision limit.</Comment>
<Parameters>
<Parameter
 Type="Default.BaseTypes.Speed"
 Name="Vmrsp"
 Guid="55a81856-c78d-4268-b3ab-6a25fab54e07"
>
</Parameter></Parameters>
<Cases>
<Case
 Name="EBD below Vmrsp"
 Guid="294ac44e-98de-451b-b4b5-b0d032c76f78"
>
<Comment>This case occurs when the EBD curve is less than the MRSP speed for all distances</Comment>
<PreConditions>
<PreCondition
 Guid="ca716097-705f-4c28-965c-88fbc74aea17"
><Comment></Comment>
TargetSupervision.EBD(TrainPosition.FrontEndPosition(DistanceInterval.Nom)) &lt; MRSP.SpeedRestrictions(TrainPosition.FrontEndPosition(DistanceInterval.Nom))</PreCondition></PreConditions>
<Expression>Default.BaseTypes.Distance.Unknown</Expression>
</Case><Case
 Name="Value"
 Guid="87bc3884-bbcf-40e7-891f-a35b2baa7c00"
>
<Comment>Standard case</Comment>
<Expression>DistanceForSpeed ( 
  Function =&gt; TargetSupervision.EBD, 
  Speed =&gt; Vmrsp + f41 ( Vmrsp ) 
) 
- 
( Vmrsp + f41 ( Vmrsp ) ) * ( TargetSupervision.T_berem() + TargetSupervision.T_traction() )</Expression>
</Case></Cases>
</Function><Function
 Type="Default.BaseTypes.Distance"
 Default=""
 X="20"
 Y="220"
 Width="100"
 Height="50"
 Pinned="TRUE"
 Implemented="TRUE"
 Name="d_SBI2"
 Guid="9bb663ce-e8e8-4bd2-8e83-e8b8748d59a7"
>
<ReqRef
 Id="0c5eaae4-4be7-4f73-ba4d-93cbbc028872"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="95ac0bb1-adf8-4909-baec-7073f17ef940"
>
</ReqRef><Comment>Provides the distance d_SBI2.</Comment>
<Parameters>
<Parameter
 Type="Default.BaseTypes.Speed"
 Name="Vmrsp"
 Guid="b48a3e8a-35b5-483a-87e0-86b3a3d4039d"
>
</Parameter></Parameters>
<Cases>
<Case
 Name="EBD below Vmrsp"
 Guid="b84a4309-4864-4808-b874-1bfb9199b206"
>
<Comment>This case occurs when the EBD curve is less than the MRSP speed for all distances</Comment>
<PreConditions>
<PreCondition
 Guid="84471b54-f275-455e-92d5-7c7965c4c2ac"
><Comment></Comment>
d_EBI ( Vmrsp ) == Default.BaseTypes.Distance.Unknown</PreCondition></PreConditions>
<Expression>Default.BaseTypes.Distance.Unknown</Expression>
</Case><Case
 Name="Value"
 Guid="6f89c598-f655-4f78-82da-514e35c14b27"
>
<Comment>Standard case</Comment>
<Expression>d_EBI ( Vmrsp )  - Vmrsp * TargetSupervision.T_bs2</Expression>
</Case></Cases>
</Function><Function
 Type="Default.BaseTypes.Distance"
 Default=""
 X="240"
 Y="220"
 Width="100"
 Height="50"
 Pinned="TRUE"
 Implemented="TRUE"
 Name="d_I"
 Guid="dc704916-e5cb-4eea-a118-d25fd3c2d5b5"
>
<ReqRef
 Id="0c5eaae4-4be7-4f73-ba4d-93cbbc028872"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="208ce322-0849-4995-aead-8d61494d5602"
>
</ReqRef><ReqRef
 Id="7436b38b-cdb4-4fc5-9d24-f45da79f42f5"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="60cbdde9-8930-455c-99ac-2cd62aa4f282"
>
</ReqRef><ReqRef
 Id="1c3a3e00-d5be-4e94-b8f4-d89e2b2970a6"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="8c3cd904-121a-4804-a7e1-1d205ce987aa"
>
</ReqRef><Comment></Comment>
<Parameters>
<Parameter
 Type="Default.BaseTypes.Speed"
 Name="Vmrsp"
 Guid="d3d44a74-6a3d-43bc-82af-1df1d08bbcec"
>
</Parameter></Parameters>
<Cases>
<Case
 Name="d_P unknown"
 Guid="d61fb715-7982-4a50-9242-0470608865c1"
>
<PreConditions>
<PreCondition
 Guid="482250d9-71bf-4a16-b72c-125bb37101c1"
>d_P ( Vmrsp ) == Default.BaseTypes.Distance.Unknown</PreCondition></PreConditions>
<Expression>Default.BaseTypes.Distance.Unknown</Expression>
</Case><Case
 Name="Value"
 Guid="24aaf0e5-5720-411a-ae32-9abd355f6ec5"
>
<Comment></Comment>
<Expression>d_P ( Vmrsp ) - Vmrsp * TargetSupervision.T_indication()</Expression>
</Case></Cases>
</Function><Function
 Type="Default.BaseTypes.Distance"
 Default=""
 X="130"
 Y="160"
 Width="100"
 Height="50"
 Pinned="TRUE"
 Implemented="TRUE"
 Name="d_P_EOA"
 Guid="6e840631-e405-49da-af54-fd87deb27d11"
>
<ReqRef
 Id="c2747f10-3553-4ce9-9fc1-61bbf23b7f0b"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="737c4587-24bb-4b4b-bb37-9e1e36319263"
>
</ReqRef><Comment></Comment>
<Parameters>
<Parameter
 Type="Default.BaseTypes.Speed"
 Name="Vmrsp"
 Guid="a7d49188-5325-4de5-b567-e40c0cdcb9df"
>
</Parameter></Parameters>
<Cases>
<Case
 Name="GUI is inhibited"
 Guid="85c9b356-2781-4253-9018-3fbcc051309b"
>
<PreConditions>
<PreCondition
 Guid="76ff14fe-1069-48b8-a935-8bfa9f50e6fc"
>NOT NationalValues.ComputationOfGUIIsEnabled()</PreCondition></PreConditions>
<Expression>TargetSupervision.d_SBI1 ( Vmrsp ) - Vmrsp * TargetSupervision.T_driver</Expression>
</Case><Case
 Name="GUI is enabled"
 Guid="e2ed0a38-959f-4ca1-af51-1fd4543d4a69"
>
<Comment></Comment>
<Expression>Default.BaseTypes.MinDistance ( X1 =&gt; TargetSupervision.d_SBI1 ( Vmrsp ) - Vmrsp * TargetSupervision.T_driver, X2 =&gt; DistanceForSpeed ( Function =&gt; TargetSupervision.GUI, Speed =&gt; Vmrsp ) )</Expression>
</Case></Cases>
</Function><Function
 Type="Default.BaseTypes.Distance"
 Default=""
 X="130"
 Y="300"
 Width="100"
 Height="50"
 Pinned="TRUE"
 Implemented="TRUE"
 Name="Compute_d_preindication"
 Guid="7fabfa64-423f-4dff-9d43-8860b61137bf"
>
<ReqRef
 Id="2a213dcf-f704-443d-a6e1-d343329af276"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="36089ac4-db5b-4475-9817-e2394762c6d4"
>
</ReqRef><ReqRef
 Id="8ff0bb4b-bc97-415b-93b4-fde4c5154544"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="2c9c830d-52cc-42fc-a53a-ff30bfba4747"
>
</ReqRef><ReqRef
 Id="d7b72e8e-080e-4419-87c9-e54ecdfed0ef"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="999f0861-4395-4782-ba39-71db62e22d5e"
>
</ReqRef><ReqRef
 Id="9e5b33ae-9b18-4cc2-a313-bbacf0e3cf57"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="9b8b4542-8e20-4e44-921e-b72459897505"
>
</ReqRef><ReqRef
 Id="ca47c45b-796c-4290-80a0-72dc3bbd732e"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="1d54fba4-524a-4e13-b834-0ff1af6c76ac"
>
</ReqRef><ReqRef
 Id="8e95d803-0ad3-43b6-b488-8471ea3f792a"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="a5d68bfe-054e-4e60-9a97-b7e2d3ee7c47"
>
</ReqRef><ReqRef
 Id="de364883-d636-476b-8455-154f2ebd4444"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="0a0bb64a-ee1a-4fb3-acb4-7cbeadeb7b35"
>
</ReqRef><ReqRef
 Id="dbce4b67-1a6f-4e35-ae83-e827c8a25a48"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="365b4d6a-69a6-41d6-8746-ba7e8241d30b"
>
</ReqRef><Comment>Calculates the pre-indication location for the deceleration curve of the given target. The target MRSPn is placed at the start of the following section.</Comment>
<Parameters>
<Parameter
 Type="Kernel.SpeedAndDistanceMonitoring.TargetSupervision.Target"
 Name="MRSPnTarget"
 Guid="157d4132-628f-4d83-ba3d-e059b7db2413"
>
</Parameter></Parameters>
<Cases>
<Case
 Name="d_I in rear of train"
 Guid="0e479194-ecac-4abe-bc9e-ca85dcaa8ba9"
>
<Comment></Comment>
<PreConditions>
<PreCondition
 Guid="5a958cda-e0be-4be2-bd2b-8d2f74669d4e"
>d_I(TargetSpeed(MRSPnTarget)) == Default.BaseTypes.Distance.Unknown</PreCondition></PreConditions>
<Expression>Default.BaseTypes.Distance.Unknown</Expression>
</Case><Case
 Name="EOA, first case, first target"
 Guid="eb671805-cce5-4414-a514-eed6e3bf85a1"
>
<Comment>The target, MRSPn, is the first supervised target. Check that the pre-indication location is before the target location and that the target corresponds to the EOA.</Comment>
<PreConditions>
<PreCondition
 Guid="fc16468a-6924-4133-b14a-ade23fc4a302"
><Comment></Comment>
d_I ( TargetSpeed(MRSPnTarget) ) &lt;= MRSPnEnd(MRSPnTarget)</PreCondition><PreCondition
 Guid="53520f03-8e9f-47cf-a003-6a8a5a346744"
><Comment></Comment>
MA.IsEOA ( MRSPnTarget )</PreCondition><PreCondition
 Guid="6e0306cd-0b5a-4339-8626-25b6e5b0163b"
>MRSPnTarget == FirstTargetFromLocation(TrainPosition.FrontEndPosition(Default.DistanceInterval.Nom))</PreCondition></PreConditions>
<Expression>d_I_EOA ( TargetSpeed(MRSPnTarget) ) - TargetSpeed(MRSPnTarget) * T_preindication</Expression>
</Case><Case
 Name="Other target, first case, first target"
 Guid="36fb1b87-ff1a-4e42-8266-a19564ee33b2"
>
<Comment></Comment>
<PreConditions>
<PreCondition
 Guid="92a5fe74-f56f-49fb-ad9b-59302ec14d54"
>d_I ( TargetSpeed(MRSPnTarget) ) &lt;= MRSPnEnd(MRSPnTarget)</PreCondition><PreCondition
 Guid="78b9ae74-6271-4ba4-ba19-6547ce837dfe"
>MRSPnTarget == FirstTargetFromLocation(TrainPosition.FrontEndPosition(Default.DistanceInterval.Nom))</PreCondition></PreConditions>
<Expression>d_I ( TargetSpeed(MRSPnTarget) ) - TargetSpeed(MRSPnTarget) * T_preindication</Expression>
</Case><Case
 Name="Second case, first target"
 Guid="3189c7a3-2665-41cc-992e-f234cfbde7d0"
>
<Comment></Comment>
<PreConditions>
<PreCondition
 Guid="14678d4c-8a8c-49e3-99ba-0284c32a0363"
>MRSPnTarget == FirstTargetFromLocation(TrainPosition.FrontEndPosition(Default.DistanceInterval.Nom))</PreCondition><PreCondition
 Guid="fea3478d-454f-4a14-b807-f7c9564ad8a4"
>MRSPnEnd(MRSPnTarget) &lt; d_I ( TargetSpeed(MRSPnTarget) )</PreCondition><PreCondition
 Guid="75a229f0-84ec-4f4b-aa86-b24afaa035d4"
><Comment></Comment>
d_I( FirstTargetFromLocation(MRSPnTarget.Location).Speed) &lt;= MRSPnEnd(MRSPnTarget)</PreCondition></PreConditions>
<Expression>MRSPnEnd(MRSPnTarget)- TargetSpeed(MRSPnTarget) * T_preindication</Expression>
</Case><Case
 Name="EOA, first case"
 Guid="e4ed753d-ac09-403e-afd3-fb72a28b9706"
>
<Comment></Comment>
<PreConditions>
<PreCondition
 Guid="0b29228c-ccce-4669-acfd-3f9141ede40a"
><Comment></Comment>
d_I ( TargetSpeed(MRSPnTarget) ) &lt;= MRSPnEnd(MRSPnTarget)</PreCondition><PreCondition
 Guid="a697db5b-8d80-4750-948c-b0b45689adc2"
>MRSPnStart(MRSPnTarget) &lt; d_I ( TargetSpeed(MRSPnTarget) )</PreCondition><PreCondition
 Guid="b45489d6-5cf3-4f02-83f3-ec715922f527"
>MA.IsEOA ( MRSPnTarget )</PreCondition></PreConditions>
<Expression>d_I_EOA ( TargetSpeed(MRSPnTarget) ) - TargetSpeed(MRSPnTarget) * T_preindication</Expression>
</Case><Case
 Name="Other target, first case"
 Guid="41f0a5a1-7965-4568-834c-248d28641324"
>
<PreConditions>
<PreCondition
 Guid="77374c64-30fb-4792-b9cd-84aa69ffd20f"
>d_I ( TargetSpeed(MRSPnTarget) ) &lt;= MRSPnEnd(MRSPnTarget)</PreCondition><PreCondition
 Guid="dcee462f-c5ab-4b6b-b370-8eb19ec9d5b9"
>MRSPnStart(MRSPnTarget) &lt; d_I ( TargetSpeed(MRSPnTarget) )</PreCondition></PreConditions>
<Expression>d_I ( TargetSpeed(MRSPnTarget) ) - TargetSpeed(MRSPnTarget) * T_preindication</Expression>
</Case><Case
 Name="Second case"
 Guid="fa19f559-65e4-402a-897b-7fda2bfa28dd"
>
<PreConditions>
<PreCondition
 Guid="e0a60a90-5e23-4565-820e-7eeb897d42f6"
><Comment></Comment>
d_I( FirstTargetFromLocation(MRSPnTarget.Location).Speed) &lt;= MRSPnEnd(MRSPnTarget)</PreCondition><PreCondition
 Guid="ca3a5b34-272b-4664-a001-2443e4f76a1d"
>MRSPnEnd(MRSPnTarget) &lt; d_I ( TargetSpeed(MRSPnTarget) )</PreCondition></PreConditions>
<Expression>MRSPnEnd(MRSPnTarget)- TargetSpeed(MRSPnTarget) * T_preindication</Expression>
</Case></Cases>
</Function><Function
 Type="Default.BaseTypes.Distance"
 Default=""
 X="130"
 Y="220"
 Width="100"
 Height="50"
 Pinned="TRUE"
 Implemented="TRUE"
 Name="d_I_EOA"
 Guid="b747aa02-f496-41f1-acfe-a455b8039557"
>
<ReqRef
 Id="c2747f10-3553-4ce9-9fc1-61bbf23b7f0b"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="4f0cf09c-99e9-4558-a36c-4918bebb9dae"
>
</ReqRef><Comment></Comment>
<Parameters>
<Parameter
 Type="Default.BaseTypes.Speed"
 Name="Vmrsp"
 Guid="01eb8a22-9ab8-4480-a1ef-0e925b3c256e"
>
</Parameter></Parameters>
<Cases>
<Case
 Name="Value"
 Guid="7c618fa6-806f-47d7-a5c8-bba444d4051f"
>
<Expression>PreIndicationLocation.d_P_EOA ( Vmrsp ) - Vmrsp * TargetSupervision.T_indication()</Expression>
</Case></Cases>
</Function><Function
 Type="Default.BaseTypes.Distance"
 Default=""
 X="240"
 Y="160"
 Width="100"
 Height="50"
 Pinned="TRUE"
 Implemented="TRUE"
 Name="d_P"
 Guid="14e456ed-c180-4d64-ba58-3e97a654a998"
>
<ReqRef
 Id="0c5eaae4-4be7-4f73-ba4d-93cbbc028872"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="56dd1725-7c5c-4ee3-b600-016cd4c69807"
>
</ReqRef><Comment></Comment>
<Parameters>
<Parameter
 Type="Default.BaseTypes.Speed"
 Name="Vmrsp"
 Guid="6508e397-bc4d-4595-8635-f9557fc76553"
>
</Parameter></Parameters>
<Cases>
<Case
 Name="GUI inhibited, EBD below Vmrsp"
 Guid="e8c7e67c-4aae-44af-99b1-52e772385968"
>
<Comment></Comment>
<PreConditions>
<PreCondition
 Guid="7d8e8a84-2676-43eb-8b6c-cba6a6178a02"
>d_SBI2 ( Vmrsp ) == Default.BaseTypes.Distance.Unknown</PreCondition><PreCondition
 Guid="7c5f45ce-5044-45b9-8359-dd9eb303f1c9"
>NOT NationalValues.ComputationOfGUIIsEnabled()</PreCondition></PreConditions>
<Expression>Default.BaseTypes.Distance.Unknown</Expression>
</Case><Case
 Name="GUI is inhibited"
 Guid="f66f3c06-c206-4999-97d9-25170cc4e170"
>
<Comment></Comment>
<PreConditions>
<PreCondition
 Guid="dac95c93-f0c0-4ace-862c-c7475c858e6e"
>NOT NationalValues.ComputationOfGUIIsEnabled()</PreCondition></PreConditions>
<Expression>d_SBI2 ( Vmrsp ) - Vmrsp * TargetSupervision.T_driver</Expression>
</Case><Case
 Name="GUI Enabled, GUI or EBD below Vmrsp"
 Guid="b9c418e3-f8d8-4bb3-9307-a9e3f81154a6"
>
<Comment>For all distances, either the GUI or EBD speed is below the MRSP speed. d_P is somewhere behind the train in this case</Comment>
<PreConditions>
<PreCondition
 Guid="7a48960b-4f09-477c-b21d-de772c32a1c9"
><Comment></Comment>
DistanceForSpeed ( Function =&gt; TargetSupervision.GUI, Speed =&gt; Vmrsp ) == Default.BaseTypes.Distance.Unknown

OR

d_SBI2 ( Vmrsp ) == Default.BaseTypes.Distance.Unknown</PreCondition></PreConditions>
<Expression>Default.BaseTypes.Distance.Unknown</Expression>
</Case><Case
 Name="GUI is enabled"
 Guid="ed419bb1-5c35-46f3-8791-27aa4b53b189"
>
<Comment></Comment>
<Expression>Default.BaseTypes.MinDistance ( X1 =&gt; d_SBI2 ( Vmrsp ) - Vmrsp * TargetSupervision.T_driver, X2 =&gt; DistanceForSpeed ( Function =&gt; TargetSupervision.GUI, Speed =&gt; Vmrsp ) )</Expression>
</Case></Cases>
</Function><Function
 Type="Default.BaseTypes.Distance"
 Default=""
 X="20"
 Y="300"
 Width="100"
 Height="50"
 Pinned="TRUE"
 Implemented="TRUE"
 Name="d_preindication"
 Guid="22dbac85-5953-4f33-bf20-79beb74b725a"
>
<ReqRef
 Id="2a213dcf-f704-443d-a6e1-d343329af276"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="6b15a9e3-b0b2-4429-9f8c-bee01db5b4a9"
>
</ReqRef><ReqRef
 Id="8ff0bb4b-bc97-415b-93b4-fde4c5154544"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="e0a8e468-a71f-4f81-b9fa-0d040eafa57e"
>
</ReqRef><ReqRef
 Id="1c3a3e00-d5be-4e94-b8f4-d89e2b2970a6"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="cb891c3f-7ed4-4788-9dff-fc801ac2aab3"
>
</ReqRef><ReqRef
 Id="c2747f10-3553-4ce9-9fc1-61bbf23b7f0b"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="169ec5bc-d765-443a-ab45-0d5c7dbbd232"
>
</ReqRef><ReqRef
 Id="ca47c45b-796c-4290-80a0-72dc3bbd732e"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="c7b2f4d3-ae9a-4d54-b7f8-275e38b731bc"
>
</ReqRef><Comment></Comment>
<Parameters>
<Parameter
 Type="Default.BaseTypes.Distance"
 Name="Dist"
 Guid="dd0e23cc-61ac-4b6c-b7ad-f514388faa4b"
>
</Parameter></Parameters>
<Cases>
<Case
 Name="Value"
 Guid="77b61b8d-bb27-49b3-95c5-027e22b5eba2"
>
<Comment></Comment>
<PreConditions>
<PreCondition
 Guid="3bf6d470-f45b-45d0-864a-c216d2eeb181"
><Comment></Comment>
TargetsList() != []</PreCondition></PreConditions>
<Expression>Compute_d_preindication(FirstTargetFromLocation(Dist))</Expression>
</Case><Case
 Name="Otherwise"
 Guid="2864273a-427e-4862-800f-f42bb985cd36"
>
<Expression>Default.BaseTypes.Distance.Infinity</Expression>
</Case></Cases>
</Function><Function
 Type="TargetSupervision.Target"
 Default=""
 Width="100"
 Height="50"
 Implemented="TRUE"
 NeedsRequirement="FALSE"
 Name="FirstTargetFromLocation"
 Guid="1bfac524-ef3a-4bec-ab1d-e335238c2eb3"
>
<Comment>Returns the closest supervised target starting from the given distance</Comment>
<Parameters>
<Parameter
 Type="Default.BaseTypes.Distance"
 Name="Distance"
 Guid="95084f68-3dff-4058-9ea7-3a6ec38f061d"
>
</Parameter></Parameters>
<Cases>
<Case
 Name="Value"
 Guid="19821ff7-4f2c-4fd6-98fd-3956af5e3468"
>
<Comment></Comment>
<Expression>REDUCE TargetsList()
    | X.Location &gt; Distance

USING MA.ClosestTarget(
    Target1=&gt;X,
    Target2=&gt;RESULT
    )

INITIAL_VALUE TargetSupervision.Target{
    Location =&gt; Default.BaseTypes.Distance.Infinity,
    Speed =&gt; 0.0,
    Length =&gt; 0.0
    }</Expression>
</Case></Cases>
</Function><Function
 Type="TargetSupervision.Target"
 Default=""
 X="110"
 Width="100"
 Height="50"
 Implemented="TRUE"
 NeedsRequirement="FALSE"
 Name="LastTargetBeforeLocation"
 Guid="9ed8902a-0e3a-4632-b9ba-f33bd06eabc0"
>
<Comment>Returns the closest supervised target prior to the given distance</Comment>
<Parameters>
<Parameter
 Type="Default.BaseTypes.Distance"
 Name="Distance"
 Guid="3bbf31b7-6a4e-434f-8914-59260f9671ae"
>
</Parameter></Parameters>
<Cases>
<Case
 Name="Value"
 Guid="b687c5ce-6563-4fe2-8d27-34b0eb533aa8"
>
<Comment></Comment>
<Expression>REDUCE TargetsList()
    | X.Location &lt; Distance

USING MA.ClosestTarget(
    Target1=&gt;X,
    Target2=&gt;RESULT
    )

INITIAL_VALUE TargetSupervision.Target{
    Location =&gt; Default.BaseTypes.Distance.Infinity,
    Speed =&gt; 0.0,
    Length =&gt; 0.0
    }</Expression>
</Case></Cases>
</Function><Function
 Type="Default.BaseTypes.Speed"
 Default=""
 X="220"
 Width="100"
 Height="50"
 Name="TargetSpeed"
 Guid="05c1bbb0-78af-4897-869a-9f35a6af1735"
>
<Comment>Returns the speed of the section prior to the given target</Comment>
<Parameters>
<Parameter
 Type="TargetSupervision.Target"
 Name="Target"
 Guid="c8c68614-6f99-412d-82c4-e17eee5450af"
>
</Parameter></Parameters>
<Cases>
<Case
 Name="Target is the first supervised target"
 Guid="7fa1ab9f-ed7c-4578-b42e-3a4f230aaf9e"
>
<Comment></Comment>
<PreConditions>
<PreCondition
 Guid="6c89e2c5-c672-4783-b6b8-0d417cf0f735"
><Comment></Comment>
Target == FirstTargetFromLocation(TrainPosition.FrontEndPosition(DistanceInterval.Nom))</PreCondition></PreConditions>
<Expression>MRSP.SpeedRestrictions(TrainPosition.FrontEndPosition(DistanceInterval.Nom))</Expression>
</Case><Case
 Name="The section ending at the target is not speed restricted"
 Guid="19b306b3-2404-42ce-8135-a9cd9a1839e4"
>
<Comment></Comment>
<PreConditions>
<PreCondition
 Guid="45beedbc-f467-47d2-8bf3-c143f1c8be4b"
>NOT LocationIsInSpeedRestriction(MRSPnEnd(Target))</PreCondition></PreConditions>
<Expression>Default.BaseTypes.Speed.MaxSpeed</Expression>
</Case><Case
 Name="Otherwise"
 Guid="35c09766-18ba-4b49-b7eb-7cf4f9834d95"
>
<Comment></Comment>
<Expression>LastTargetBeforeLocation(Target.Location).Speed</Expression>
</Case></Cases>
</Function><Function
 Type="Default.BaseTypes.Distance"
 Default=""
 X="330"
 Width="100"
 Height="50"
 Implemented="TRUE"
 NeedsRequirement="FALSE"
 Name="MRSPnStart"
 Guid="6563c271-64a9-49ee-bc23-84deb7b6c577"
>
<Comment>Returns the start of the section n of the MRSP</Comment>
<Parameters>
<Parameter
 Type="TargetSupervision.Target"
 Name="MRSPnTarget"
 Guid="ccb79e6e-be9c-4165-a11d-92e054b266b0"
>
</Parameter></Parameters>
<Cases>
<Case
 Name="First target"
 Guid="05cacc0c-a6d9-4bea-a10a-1c28395dacc5"
>
<Comment>If the target provided is the end of the first section, returns the current train position</Comment>
<PreConditions>
<PreCondition
 Guid="75c33eaf-bfaf-4252-b19c-44d3c2ff41eb"
><Comment></Comment>
MRSPnTarget == FirstTargetFromLocation(TrainPosition.FrontEndPosition(DistanceInterval.Nom))</PreCondition></PreConditions>
<Expression>TrainPosition.FrontEndPosition(DistanceInterval.Nom)</Expression>
</Case><Case
 Name="Otherwise"
 Guid="87f6d9cb-b75e-422b-9c16-26bce5e8782b"
>
<Comment>Otherwise, returns the start of the previous section</Comment>
<Expression>LastTargetBeforeLocation(MRSPnTarget.Location).Location</Expression>
</Case></Cases>
</Function><Function
 Type="Default.BaseTypes.Distance"
 Default=""
 X="440"
 Width="100"
 Height="50"
 NeedsRequirement="FALSE"
 Name="MRSPnEnd"
 Guid="4a78452c-b5fc-4097-88d0-af70982d4d6d"
>
<Comment>Provides the end of the section whose target is MRSPnTarget. That position is MRSPnTarget.Location.</Comment>
<Parameters>
<Parameter
 Type="TargetSupervision.Target"
 Name="MRSPnTarget"
 Guid="a2bac124-a9bd-4d25-b70a-a1a749f16359"
>
</Parameter></Parameters>
<Cases>
<Case
 Name="Value"
 Guid="a63fe036-d18e-4155-8563-db3757062ac9"
>
<Comment></Comment>
<Expression>MRSPnTarget.Location</Expression>
</Case></Cases>
</Function><Function
 Type="Boolean"
 Default=""
 Width="100"
 Height="50"
 Implemented="TRUE"
 NeedsRequirement="FALSE"
 Name="LocationIsInSpeedRestriction"
 Guid="9ec67ff1-9424-4fad-a766-c562a875bbde"
>
<Comment>Checks the list of TARGETS for any that englobe the distance provided as parameter</Comment>
<Parameters>
<Parameter
 Type="Default.BaseTypes.Distance"
 Name="Dist"
 Guid="debcb987-8faf-4c20-ad94-137d4b228123"
>
</Parameter></Parameters>
<Cases>
<Case
 Name="Distance is in the range of a target"
 Guid="7728236a-d7fe-40c3-9417-ee0dd230e10c"
>
<Comment>Dist is measured from the LRBG</Comment>
<Expression>THERE_IS_IN TargetsList() |  (X.Location &lt; Dist) AND (X.Location + Default.BaseTypes.LengthToDistance(X.Length) &gt;= Dist)</Expression>
</Case></Cases>
</Function></Functions>
<Variables>
<Variable
 Type="Default.BaseTypes.Time"
 DefaultValue="7.0"
 VariableMode="Constant"
 X="100"
 Y="10"
 Width="100"
 Height="50"
 Pinned="TRUE"
 Implemented="TRUE"
 Name="T_preindication"
 Guid="68afe859-409d-4646-bde4-a94f2e4e0c1d"
>
<ReqRef
 Id="74d937dc-e17d-4627-b243-5abf98b6b980"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="bf2da945-7062-4059-bae6-2ec2b91b15ff"
>
<Comment>Time between the pre-indication location and the indication supervision limit valid for MRSP speed.</Comment>
</ReqRef><ReqRef
 Id="4bd7be0f-7449-41a7-9dba-2c0897a8c933"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="93e73dea-226b-40d0-aeb4-ff7c1fc70c04"
>
</ReqRef><ReqRef
 Id="d7b72e8e-080e-4419-87c9-e54ecdfed0ef"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="358af338-3139-4a31-b4bb-0bbc874bb446"
>
</ReqRef><ReqRef
 Id="9e5b33ae-9b18-4cc2-a313-bbacf0e3cf57"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="fffcd424-982a-4c28-b9cb-549cb7ca6b63"
>
</ReqRef><Comment>Time between the pre-indication location and the indication supervision limit valid for MRSP speed.</Comment>
</Variable></Variables>
</NameSpace>
