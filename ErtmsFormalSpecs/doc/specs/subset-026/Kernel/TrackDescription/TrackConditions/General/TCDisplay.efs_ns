<NameSpace
 X="1"
 Y="1"
 Width="100"
 Height="50"
 Name="TCDisplay"
 Guid="0ea9771b-d543-4079-8aff-b0d76bc2816f"
>
<NameSpaces>
</NameSpaces>
<Enumerations>
<Enum
 Default="TCTypeEnum.LowerPantograph"
 X="510"
 Y="20"
 Width="100"
 Height="50"
 Implemented="TRUE"
 NeedsRequirement="FALSE"
 Name="TCTypeEnum"
 Guid="4410ca44-83d3-4da7-8d02-18e9894d1bf3"
>
<Comment>Enumeration of the different types of track condition that can be announced on the DMI</Comment>
<Values>
<EnumValue
 Value=""
 Name="LowerPantograph"
 Guid="58e99abc-9654-462a-8214-8626c9957c48"
>
</EnumValue><EnumValue
 Value=""
 Name="TurnOffMainSwitch"
 Guid="119c065b-43f0-4113-9656-42063f12d7f7"
>
</EnumValue><EnumValue
 Value=""
 Name="NonStoppingArea"
 Guid="4297b5ef-8499-482b-a9c4-f533e8dd7a03"
>
</EnumValue><EnumValue
 Value=""
 Name="RadioHole"
 Guid="aba681ca-6b1b-4ba0-b379-921ff0343518"
>
</EnumValue><EnumValue
 Value=""
 Name="AirTightness"
 Guid="fe97fb7d-baa5-4121-9dd5-71b649ebe32e"
>
</EnumValue><EnumValue
 Value=""
 Name="EddyCurrentBrakeForEB"
 Guid="cdf9db7a-8dce-453b-bd74-4f7daa9842ee"
>
</EnumValue><EnumValue
 Value=""
 Name="MagneticShoeBrake"
 Guid="14c66e13-e890-4f58-90cb-7e191ab59f0c"
>
</EnumValue><EnumValue
 Value=""
 Name="RegenerativeBrake"
 Guid="9be8e253-d4bf-48b7-966d-921ef7a92bf1"
>
</EnumValue><EnumValue
 Value=""
 Name="TunnelStoppingArea"
 Guid="8e191726-7933-4f7f-afc9-efade435ba61"
>
</EnumValue><EnumValue
 Value=""
 Name="SoundHorn"
 Guid="c948d278-5b71-4e8e-99fa-f33cef27ebb2"
>
</EnumValue><EnumValue
 Value=""
 Name="EddyCurrentBrakeForSB"
 Guid="32a5301e-d4f9-41f9-959d-96ffb7cf9a02"
>
</EnumValue><EnumValue
 Value=""
 Name="TractionSystem__none"
 Guid="cf5598f7-af09-40fb-9380-502729892df6"
>
</EnumValue><EnumValue
 Value=""
 Name="TractionSystem__AC25kV"
 Guid="531f5034-4b79-4e73-80a2-63307cb248a1"
>
</EnumValue><EnumValue
 Value=""
 Name="TractionSystem__AC15kV"
 Guid="8bcf9538-f14e-4ca5-a7c3-0d1df683ea2f"
>
</EnumValue><EnumValue
 Value=""
 Name="TractionSystem__DC3kV"
 Guid="9b954826-91c3-47c0-b276-93e281b3d8c8"
>
</EnumValue><EnumValue
 Value=""
 Name="TractionSystem__DC1_5kV"
 Guid="0e56ca98-1d15-4871-bd49-5af64d7adf31"
>
</EnumValue><EnumValue
 Value=""
 Name="TractionSystem__DC600_750V"
 Guid="db3f2d46-9ebe-4129-ae04-b30da831fd63"
>
</EnumValue></Values>
</Enum></Enumerations>
<Structures>
<Structure
 Default=""
 X="340"
 Y="100"
 Width="100"
 Height="50"
 Implemented="TRUE"
 Name="TCStructWithBrakeInhibition"
 Guid="21138f5c-5501-4929-a88b-8242588bc71a"
>
<ReqRef
 Id="88a9ba90-6c1e-47f7-bced-85484113e0fa"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="4539eca2-e5f3-4542-a2f6-60a94a565093"
>
</ReqRef><Comment>For use in the DMI, this structure contains the track conditions brake inhibition, power control, lower pantograph, air tightness and radio hole</Comment>
<StructureElement
 TypeName="Boolean"
 Default="Boolean.False"
 Mode="Internal"
 Implemented="TRUE"
 Name="AirTightness"
 Guid="08756841-f9aa-425b-9c21-b0dc45a6d4cd"
>
<ReqRef
 Id="a01c8799-5739-48a1-a667-753dbdb30d26"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="cbfd97d2-2863-41d5-9c4a-d07a80cf8385"
>
</ReqRef><Comment>The air conditioning intake should be cut off</Comment>
</StructureElement><StructureElement
 TypeName="Boolean"
 Default="Boolean.False"
 Mode="Internal"
 Implemented="TRUE"
 Name="PowerlessSection_LowerPantograph"
 Guid="f3fb2e30-6f70-436f-8a7f-73d205138575"
>
<ReqRef
 Id="7fb81a1f-d79e-4219-b000-e6ca80f0fad5"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="40a15a00-e0de-48e4-b8b4-1cc361f6195b"
>
</ReqRef><Comment>The train&apos;s pantograph should be lowered in the upcoming powerless section</Comment>
</StructureElement><StructureElement
 TypeName="Boolean"
 Default="Boolean.False"
 Mode="Internal"
 Implemented="TRUE"
 Name="PowerlessSection_SwitchOffTheMainPowerSwitch"
 Guid="d7eda37f-cebf-427a-bb5a-a4c2e6af75bf"
>
<ReqRef
 Id="ef395ab0-84e3-439a-9e7e-7ef8bb61984c"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="b5b34d34-7699-49aa-b2fd-24b59889956c"
>
</ReqRef><Comment>Powerless area where the main power switch should be turned off</Comment>
</StructureElement><StructureElement
 TypeName="Boolean"
 Default="Boolean.False"
 Mode="Internal"
 Implemented="TRUE"
 Name="RadioHole"
 Guid="c326d458-aeab-45ae-ba06-7ba3dc5439c2"
>
<ReqRef
 Id="ce600cdf-eced-43b6-addb-8f9bb1416880"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="e7f30c76-414d-4446-a38d-d9afa4337aa4"
>
</ReqRef><Comment>No RBC connections in the area</Comment>
</StructureElement><StructureElement
 TypeName="Boolean"
 Default="Boolean.False"
 Mode="Internal"
 Implemented="TRUE"
 Name="SwitchOffEddyCurrentBrakeForEB"
 Guid="79e93ae5-d58f-4946-baea-35490933b3c9"
>
<ReqRef
 Id="caccfa50-6817-419a-bde5-f5880f4e795e"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="555f7002-9109-416d-a77b-fec724208aeb"
>
</ReqRef><Comment>The eddy current brake should be disabled for the emergency brake</Comment>
</StructureElement><StructureElement
 TypeName="Boolean"
 Default="Boolean.False"
 Mode="Internal"
 Implemented="TRUE"
 Name="SwitchOffMagneticShoeBrake"
 Guid="107fa4a9-45a2-4fbc-a8cf-91564adca183"
>
<ReqRef
 Id="fc19b494-1816-4d9e-b9a9-6452f06d0582"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="4a6546ca-7db0-4c15-8bcc-d613f1472edf"
>
</ReqRef><Comment>The magnetic shoe brake should be disabled</Comment>
</StructureElement><StructureElement
 TypeName="Boolean"
 Default="Boolean.False"
 Mode="Internal"
 Implemented="TRUE"
 Name="SwitchOffRegenerativeBrake"
 Guid="e380607a-4ca8-46c8-8bc1-6a4fbd105223"
>
<ReqRef
 Id="f15d27d3-b5ee-451f-8207-28272d95b5e3"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="544aed55-423b-4eb3-b856-0ef8ee91d20b"
>
</ReqRef><Comment>The regenerative brake should be disabled</Comment>
</StructureElement><StructureElement
 TypeName="BaseTypes.Distance"
 Default=""
 Mode="Internal"
 Implemented="TRUE"
 Name="Location"
 Guid="56eb5b7d-ecea-44dc-b90d-367a3c9d22fa"
>
<ReqRef
 Id="c514bd3c-cce6-498e-97b5-6418e2ac6fcf"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="44f7eef5-3fb7-4eb7-a7ce-85bb79e75e8b"
>
</ReqRef><Comment>Start location of the track condition</Comment>
</StructureElement><StructureElement
 TypeName="Boolean"
 Default="False"
 Mode="Internal"
 Implemented="TRUE"
 Name="SwitchOffEddyCurrentBrakeForSB"
 Guid="e04c4c6a-05d3-460e-ae3f-7528880c647a"
>
<ReqRef
 Id="6eac506c-d1f4-4981-81f7-4f88b90d86a9"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="53ca0ddb-76b2-4dab-86c7-ffa5f2369995"
>
</ReqRef><Comment>The eddy current brake should be disabled for the service brake</Comment>
</StructureElement><Interfaces>
<StructureRef
 Name="BaseTypes.LocationInterface"
 Guid="f04ce1f3-090c-4d3f-a72c-3fa73b6ac955"
>
</StructureRef></Interfaces>
</Structure><Structure
 Default=""
 X="340"
 Y="180"
 Width="100"
 Height="50"
 Implemented="TRUE"
 Name="TCStructWithSoundHorn"
 Guid="4bfc7dd3-7985-4f2a-8bcf-cf0866594af4"
>
<ReqRef
 Id="72d98796-7871-4e90-85df-298a95950478"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="b2c762dc-5512-49db-a293-3b0f0bd38a23"
>
</ReqRef><Comment>For use in the DMI, this structure contains the track conditions sound horn, non stopping area and tunnel stopping area</Comment>
<StructureElement
 TypeName="Boolean"
 Default="Boolean.False"
 Mode="Internal"
 Implemented="TRUE"
 Name="SoundHorn"
 Guid="775d6c62-5964-4706-a9da-ce9f34fc4e09"
>
<ReqRef
 Id="55f1d2d0-00ef-4dfe-82a4-6a5f97d8f297"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="8a432bc0-3365-4c8b-8a75-3789ba2f0cf5"
>
</ReqRef><Comment>The driver should sound the horn as long as the train is in this section</Comment>
</StructureElement><StructureElement
 TypeName="Boolean"
 Default="Boolean.False"
 Mode="Internal"
 Implemented="TRUE"
 Name="TunnelStoppingArea"
 Guid="127ffa9a-f81b-4076-aed8-0979eb0af484"
>
<ReqRef
 Id="e99e7257-597e-43d5-a002-54bb45f5028c"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="488b15f4-ead6-4f01-abee-efbf97f801ea"
>
</ReqRef><Comment>Area in a tunnel where the train is permitted to stop</Comment>
</StructureElement><StructureElement
 TypeName="Boolean"
 Default="Boolean.False"
 Mode="Internal"
 Implemented="TRUE"
 Name="NonStoppingArea"
 Guid="a4ba630f-f470-4638-83e1-22d9cba859d6"
>
<ReqRef
 Id="4fa2b4ab-63de-48d0-8aab-49412bba6dbd"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="5539cdf7-103b-4ad3-a89d-c18bbc59cd20"
>
</ReqRef><Comment>Area where the train is not permitted to stop</Comment>
</StructureElement><StructureElement
 TypeName="BaseTypes.Distance"
 Default=""
 Mode="Internal"
 Implemented="TRUE"
 Name="Location"
 Guid="d5f0710e-527b-4947-a7f9-731bcb5db201"
>
<ReqRef
 Id="c514bd3c-cce6-498e-97b5-6418e2ac6fcf"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="66fc6c3c-a730-422c-b00d-3f2789766377"
>
</ReqRef><Comment>Start location of the track condition</Comment>
</StructureElement><StructureElement
 TypeName="TractionSystems.TractionSystemStruct"
 Default=""
 Mode="Internal"
 Implemented="TRUE"
 Name="TractionSystem"
 Guid="9a98a7d7-1c4e-4659-9fbf-017d9f348018"
>
<ReqRef
 Id="6dae5e9c-2f5e-4dd2-89ec-096e89a76644"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="90f2dbb5-f0a2-494d-b739-45bc5acd86d0"
>
</ReqRef><Comment>Traction system in application</Comment>
</StructureElement><Interfaces>
<StructureRef
 Name="BaseTypes.LocationInterface"
 Guid="78808e06-f1f6-4285-94eb-a460f650a7ae"
>
</StructureRef></Interfaces>
</Structure><Structure
 Default=""
 X="340"
 Y="20"
 Width="100"
 Height="50"
 Implemented="TRUE"
 NeedsRequirement="FALSE"
 Name="TCAnnouncementStruct"
 Guid="5027d2de-d609-42ac-affc-25d2447b5369"
>
<Comment>Contains the information needed to announce an upcoming track condition</Comment>
<StructureElement
 TypeName="TCTypeEnum"
 Default=""
 Mode="Internal"
 Implemented="TRUE"
 NeedsRequirement="FALSE"
 Name="Type"
 Guid="5a887a9d-1213-40a1-a7e7-b898e427de10"
>
<Comment>The type of announcement displayed</Comment>
</StructureElement><StructureElement
 TypeName="BaseTypes.Distance"
 Default="0.0"
 Mode="Internal"
 Implemented="TRUE"
 NeedsRequirement="FALSE"
 Name="Location"
 Guid="d8ef9e3f-8c92-4a0d-8423-53947c440ba1"
>
<Comment>Distance at which the announcement becomes displayed</Comment>
</StructureElement><StructureElement
 TypeName="BaseTypes.Length"
 Default="BaseTypes.Length.Infinity"
 Mode="Internal"
 Implemented="TRUE"
 NeedsRequirement="FALSE"
 Name="Length"
 Guid="8b8ca15d-3a98-4430-b3a6-cc71adabe7b3"
>
<Comment>Length over which the announcement is displayed (not used for all announcements - some are displayed for a fixed time. In that case, the length is given as NA)</Comment>
</StructureElement><StructureElement
 TypeName="BaseTypes.Time"
 Default="BaseTypes.Time.Infinity"
 Mode="Internal"
 Implemented="TRUE"
 NeedsRequirement="FALSE"
 Name="Time"
 Guid="1b973fea-c77e-454e-9315-5f94a2b8cf45"
>
<Comment>Time for which the announcement is displayed (not used for all announcements - some are displayed for a fixed length. In that case, the time is given as Infinity)</Comment>
</StructureElement><StructureElement
 TypeName="Boolean"
 Default="False"
 Mode="Internal"
 Implemented="TRUE"
 Name="Automatic"
 Guid="6b4715e7-bdec-477d-89ca-2f88dfbae6f5"
>
<ReqRef
 Id="66551c91-ee6f-4402-b569-a9ff81c8d821"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="187007a9-1161-4f86-9f85-3713a963c475"
>
</ReqRef><ReqRef
 Id="9dd79c32-df2a-4434-b913-50640beb4281"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="0f448162-e37c-4894-a870-18a9c7443fb8"
>
</ReqRef><ReqRef
 Id="b04158a3-35ce-4257-b43e-1d9716f76f93"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="38d5e632-b1f4-44b2-8352-25ebbd30a06c"
>
</ReqRef><ReqRef
 Id="54fc1b2f-383b-4d7f-8d4a-91173fd494a8"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="26f85fbd-3f06-4e45-82b1-82e6d2280418"
>
</ReqRef><ReqRef
 Id="cd230e40-3098-4fd4-94b2-cc5f04fa5d77"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="420fecb4-778a-4df4-8ae7-ed8d032d1885"
>
</ReqRef><ReqRef
 Id="ac29e88f-6252-4dc2-ba81-7dde4deecdc7"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="2b4a1a3c-0367-4667-872c-764a357cd4bc"
>
</ReqRef><ReqRef
 Id="41d40a52-5363-4cb6-925a-671d1d925ce8"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="d3637433-5749-47cc-891a-90598f6cf13b"
>
</ReqRef><ReqRef
 Id="40a60899-55f1-47d6-b778-f25fc8357903"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="7f57bbdc-bede-4839-9d98-e6be2a0d4047"
>
</ReqRef><Comment>Indicates whether the announced condition requires manual action or the train will handle it automatically</Comment>
</StructureElement><StructureElement
 TypeName="Boolean"
 Default="False"
 Mode="Internal"
 Implemented="TRUE"
 NeedsRequirement="FALSE"
 Name="IsAnnouncement"
 Guid="b17eebed-bc9a-4c23-81a0-ffbcf01a9a10"
>
<Comment>Indicates whether it is an announced condition or a current condition</Comment>
</StructureElement><Interfaces>
<StructureRef
 Name="BaseTypes.LocationInterface"
 Guid="11611f88-f43d-4d3b-a21d-f86ebab292ff"
>
</StructureRef></Interfaces>
</Structure></Structures>
<Collections>
<Collection
 TypeName="TCStructWithBrakeInhibition"
 MaxSize="20"
 Default="[]"
 X="190"
 Y="100"
 Width="100"
 Height="50"
 Implemented="TRUE"
 Name="TCBrakes"
 Guid="f218cca7-8f46-48ed-b5fa-2845430d69db"
>
<ReqRef
 Id="88a9ba90-6c1e-47f7-bced-85484113e0fa"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="332c8a17-45f5-4518-ab82-5636bc48250e"
>
</ReqRef><Comment>Collection used to pass track condition information including inhibited brakes to the DMI</Comment>
</Collection><Collection
 TypeName="TCStructWithSoundHorn"
 MaxSize="20"
 Default="[]"
 X="190"
 Y="180"
 Width="100"
 Height="50"
 Implemented="TRUE"
 Name="TCSoundHorn"
 Guid="e148decc-b70e-4ea3-b3ce-6aaea53f3415"
>
<ReqRef
 Id="72d98796-7871-4e90-85df-298a95950478"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="d80cc302-d4ec-483e-86f8-2d03ea56df5f"
>
</ReqRef><Comment>Collection used to pass track condition information including sound horn to the DMI</Comment>
</Collection><Collection
 TypeName="TCAnnouncementStruct"
 MaxSize="20"
 Default="[]"
 X="190"
 Y="20"
 Width="100"
 Height="50"
 Implemented="TRUE"
 NeedsRequirement="FALSE"
 Name="TCAnnouncementCol"
 Guid="b0efb494-7f23-4cbd-8e54-bbbfccfa3d29"
>
<Comment>Collection used to hold the list of announcements the train will display</Comment>
</Collection></Collections>
<Functions>
<Function
 Type="BaseTypes.Distance"
 Default=""
 X="390"
 Y="400"
 Width="100"
 Height="50"
 Implemented="TRUE"
 Name="AnnouncementLocation"
 Guid="5080f214-5c31-4f7a-95b0-956b3f6e88cc"
>
<ReqRef
 Id="c5c7a634-701c-4959-ae64-0522e9a953bd"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="604399d8-c79d-4655-acb2-893cc2efde8f"
>
</ReqRef><ReqRef
 Id="221528df-6eae-4bf3-a88b-d972fde73639"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="4de3885b-8ed7-46e5-8800-0b15f6f3a489"
>
</ReqRef><ReqRef
 Id="6cbde49b-37af-4487-8711-54e2b5be1b1a"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="95542c8d-45e0-4a6d-9467-7fbf3345b7e0"
>
</ReqRef><ReqRef
 Id="dd85b47a-25d2-4054-8287-3bd39b7603c3"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="00d16d20-15fc-437e-bf9b-208f40124290"
>
</ReqRef><ReqRef
 Id="37680a2a-2a2a-4293-b7b9-642b8326a938"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="e7df1291-d486-4be1-8581-c966758b5abc"
>
</ReqRef><ReqRef
 Id="3ccdba0f-1071-42c1-ba41-099fa2560e4b"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="86e1b8cf-442d-4eb8-a491-ede90d98e4e9"
>
</ReqRef><ReqRef
 Id="dd85a59f-1d9f-471f-a5df-61f76a51d906"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="25296f50-0ca3-4560-b920-ea411a795b0a"
>
</ReqRef><ReqRef
 Id="d7fe1340-3fcf-4243-abc7-a8d81ae032de"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="a5a6adc5-8b7a-46fa-a29c-761c0c638472"
>
</ReqRef><ReqRef
 Id="6397141d-8f7d-40fd-a8c6-d323c724d0bd"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="f97c04e3-da5e-4b8a-aba2-ea114dffd65f"
>
</ReqRef><ReqRef
 Id="4c148829-6224-4b0d-b6f5-d506545632eb"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="52af0d5d-cb6c-4952-9e46-e623ddbde146"
>
</ReqRef><ReqRef
 Id="d27ff68d-c1f1-4be1-a66f-a4a03d05148b"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="43a80109-e15b-4696-aad2-3f03ad32759c"
>
</ReqRef><ReqRef
 Id="c2822061-e212-40f4-9036-6b28ec8567ea"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="67dbe0a3-2849-4b19-84a8-e82f04c9b0d2"
>
</ReqRef><Comment>Calculates the announcement location (used in the DMI) of a track condition at the train&apos;s current speed</Comment>
<Parameters>
<Parameter
 Type="BaseTypes.Distance"
 Name="Distance"
 Guid="00bb0340-e1cd-4be5-b2b5-ee143c7846bf"
>
</Parameter><Parameter
 Type="TrackConditionStruct"
 Name="TrackCondition"
 Guid="a48b6dcd-1f31-433c-8089-6568a0810217"
>
</Parameter></Parameters>
<Cases>
<Case
 Name="Value"
 Guid="9a9bfe54-98fb-4549-b01b-8d6d86f4ac13"
>
<Expression>Distance - BaseTypes.SpeedToMS( Odometry.TrainSpeed() ) * Kernel.TrackDescription.TrackConditions.General.TCDisplay.DriverReactionTime(TrackCondition)</Expression>
</Case></Cases>
</Function><Function
 Type="BaseTypes.Time"
 Default=""
 X="390"
 Y="470"
 Width="100"
 Height="50"
 Implemented="TRUE"
 Name="DriverReactionTime"
 Guid="e3f12503-0282-4f78-b89d-6aeb18a434bb"
>
<ReqRef
 Id="c8c32754-763b-4a64-a632-32a3602c83c1"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="681391e4-93e4-4a7d-a3e4-1f034671808f"
>
</ReqRef><ReqRef
 Id="221528df-6eae-4bf3-a88b-d972fde73639"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="acd47eb2-fd46-4bbe-95b0-5cbc532c1bb8"
>
</ReqRef><ReqRef
 Id="dd85b47a-25d2-4054-8287-3bd39b7603c3"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="f2073c1e-05f7-49b7-a5d8-91208f182ff3"
>
</ReqRef><ReqRef
 Id="3ccdba0f-1071-42c1-ba41-099fa2560e4b"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="d4c905c4-5618-4414-aa84-d91b84bb3446"
>
</ReqRef><ReqRef
 Id="d7fe1340-3fcf-4243-abc7-a8d81ae032de"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="b9863755-a516-44cb-9db1-6409950d868a"
>
</ReqRef><ReqRef
 Id="f6b3f58f-5fb2-453a-958e-a1a861d66a2f"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="da7dce44-01cc-457d-af85-1f6254663855"
>
</ReqRef><ReqRef
 Id="6397141d-8f7d-40fd-a8c6-d323c724d0bd"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="243c65de-dc0d-4106-9bce-e49c15f6c5a4"
>
</ReqRef><ReqRef
 Id="d27ff68d-c1f1-4be1-a66f-a4a03d05148b"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="a9d46eeb-ac4c-4534-be96-0ed0ef75a9e6"
>
</ReqRef><ReqRef
 Id="c2822061-e212-40f4-9036-6b28ec8567ea"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="2900e7c1-95f9-4e73-9c17-7cc9824958e8"
>
</ReqRef><ReqRef
 Id="1584ea94-55a5-467d-80a1-4927882da658"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="43dc9db3-1fae-471b-a8b3-e5e0f726f5eb"
>
</ReqRef><Comment>TODO: find actual reaction times for the different track conditions.

Returns the time required by the driver to performs the necessary tasks before a track condition is applied</Comment>
<Parameters>
<Parameter
 Type="TrackConditionStruct"
 Name="TrackConditionType"
 Guid="393a54a0-4d3b-4cfa-9f61-101631555fe6"
>
</Parameter></Parameters>
<Cases>
<Case
 Name="Tunnel stopping area"
 Guid="b8ca737e-3a1a-4d04-a845-5f30b1f05413"
>
<PreConditions>
<PreCondition
 Guid="55797e16-d9ea-4780-a757-c930df7d7c9f"
>TrackConditionType.TunnelStoppingArea</PreCondition></PreConditions>
<Expression>0.0</Expression>
</Case><Case
 Name="Sounding the horn"
 Guid="ba722393-81a5-4e9c-8dc7-3808166946f3"
>
<PreConditions>
<PreCondition
 Guid="5dc2dba3-88ef-4e7e-a907-49e99db414f0"
>TrackConditionType.SoundHorn</PreCondition></PreConditions>
<Expression>Kernel.TrackDescription.TrackConditions.General.T_SoundHorn</Expression>
</Case><Case
 Name="Value"
 Guid="ba6b8ce6-862a-4bc4-9bad-e2f0f28df467"
>
<Expression>5.0</Expression>
</Case></Cases>
</Function><Function
 Type="TCAnnouncementStruct"
 Default=""
 X="390"
 Y="540"
 Width="100"
 Height="50"
 Implemented="TRUE"
 NeedsRequirement="FALSE"
 Name="NewAnnouncement"
 Guid="b24560ed-6adb-4343-aef8-254717c1d11d"
>
<Comment>Returns a new announcement with the data provided</Comment>
<Parameters>
<Parameter
 Type="TCTypeEnum"
 Name="TCType"
 Guid="ae9f629f-5e3b-486f-a916-3f678296fd7c"
>
</Parameter><Parameter
 Type="BaseTypes.Distance"
 Name="Distance"
 Guid="13d9fa29-7670-4a17-9113-cba4196da35f"
>
</Parameter><Parameter
 Type="BaseTypes.Length"
 Name="Length"
 Guid="319d953c-72c3-4efb-9f7f-a2c2b4c35c27"
>
</Parameter><Parameter
 Type="Boolean"
 Name="Announcement"
 Guid="597c9b78-8617-457c-9358-eee342e32281"
>
</Parameter></Parameters>
<Cases>
<Case
 Name="Make a new struct"
 Guid="527c8c9f-dc30-4ae8-aae0-75ed499011a7"
>
<Expression>Kernel.TrackDescription.TrackConditions.General.TCDisplay.TCAnnouncementStruct{
    Type =&gt; TCType,
    Location =&gt; Distance,
    Length =&gt; Length,
    Time =&gt; BaseTypes.Time.Infinity,
    IsAnnouncement =&gt; Announcement
}</Expression>
</Case></Cases>
</Function><Function
 Type="TCStructWithSoundHorn"
 Default=""
 X="510"
 Y="470"
 Width="100"
 Height="50"
 Implemented="TRUE"
 NeedsRequirement="FALSE"
 Name="MapToSoundHorn"
 Guid="7259b677-9bd3-4142-9650-821d01dcc539"
>
<Comment>Maps the track condition profile to the format of the sound horn group of track conditions in the DMI</Comment>
<Parameters>
<Parameter
 Type="TrackConditionInformationStruct"
 Name="TCPoint"
 Guid="cc645dd6-0bc6-4bba-aa94-47d870925bde"
>
</Parameter></Parameters>
<Cases>
<Case
 Name="Value"
 Guid="5476e3dc-171a-41f6-829f-107d66d9e964"
>
<Expression>Kernel.TrackDescription.TrackConditions.General.TCDisplay.TCStructWithSoundHorn{
    TractionSystem =&gt; TractionSystems.TSAtDistance(TCPoint.Location),
    SoundHorn =&gt; TCPoint.Value.SoundHorn,
    TunnelStoppingArea =&gt; TCPoint.Value.TunnelStoppingArea,
    NonStoppingArea =&gt; TCPoint.Value.NonStoppingArea,
    Location =&gt; TCPoint.Location
}</Expression>
</Case></Cases>
</Function><Function
 Type="TCStructWithBrakeInhibition"
 Default=""
 X="30"
 Y="540"
 Width="100"
 Height="50"
 Implemented="TRUE"
 NeedsRequirement="FALSE"
 Name="MapToBrakeInhibition"
 Guid="beeaa8f6-77b7-4abc-a028-6362e601aebe"
>
<Comment>Maps the track condition profile to the format of the brake inhibition group of track conditions in the DMI</Comment>
<Parameters>
<Parameter
 Type="TrackConditionInformationStruct"
 Name="TCPoint"
 Guid="debb0542-1259-4574-a905-b88be24dd6f6"
>
</Parameter></Parameters>
<Cases>
<Case
 Name="Value"
 Guid="f77c3425-f524-46fa-8a74-3f2e73f98967"
>
<Expression>Kernel.TrackDescription.TrackConditions.General.TCDisplay.TCStructWithBrakeInhibition{
    AirTightness =&gt; TCPoint.Value.AirTightness,
    PowerlessSection_LowerPantograph =&gt; TCPoint.Value.PowerlessSection_LowerPantograph,
    PowerlessSection_SwitchOffTheMainPowerSwitch =&gt; TCPoint.Value.PowerlessSection_SwitchOffTheMainPowerSwitch,
    RadioHole =&gt; TCPoint.Value.RadioHole,
    SwitchOffEddyCurrentBrakeForEB =&gt; TCPoint.Value.SwitchOffEddyCurrentBrakeForEB,
    SwitchOffEddyCurrentBrakeForSB =&gt; TCPoint.Value.SwitchOffEddyCurrentBrakeForSB,
    SwitchOffMagneticShoeBrake =&gt; TCPoint.Value.SwitchOffMagneticShoeBrake,
    SwitchOffRegenerativeBrake =&gt; TCPoint.Value.SwitchOffRegenerativeBrake,
    Location =&gt; TCPoint.Location
}</Expression>
</Case></Cases>
</Function><Function
 Type="Boolean"
 Default=""
 X="150"
 Y="470"
 Width="100"
 Height="50"
 Implemented="TRUE"
 Name="IsInSoundHornGroup"
 Guid="2863ee58-24b2-4bbe-a13b-2a733b3dddd8"
>
<ReqRef
 Id="88a9ba90-6c1e-47f7-bced-85484113e0fa"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="2d1c7062-81e8-4d9a-9af3-a6c4fc661ccc"
>
</ReqRef><ReqRef
 Id="72d98796-7871-4e90-85df-298a95950478"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="4fda1294-6654-4abb-9536-a5dd629286f8"
>
</ReqRef><ReqRef
 Id="6dae5e9c-2f5e-4dd2-89ec-096e89a76644"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="3f54f37c-5068-415e-9fee-0b859f0f93b6"
>
</ReqRef><Comment>Indicates whether the given track condition is displayed in the same modes as sound horn</Comment>
<Parameters>
<Parameter
 Type="TCTypeEnum"
 Name="Condition"
 Guid="5fb4ebe7-9f67-4b63-8953-3ec42f1e3f78"
>
</Parameter></Parameters>
<Cases>
<Case
 Name="Value"
 Guid="ddce2fbb-4875-4cea-ad35-a640d8550664"
>
<Expression>Condition == Kernel.TrackDescription.TrackConditions.General.TCDisplay.TCTypeEnum.SoundHorn
  OR  
Condition == Kernel.TrackDescription.TrackConditions.General.TCDisplay.TCTypeEnum.NonStoppingArea
  OR  
Condition == Kernel.TrackDescription.TrackConditions.General.TCDisplay.TCTypeEnum.TunnelStoppingArea
  OR  
Condition == Kernel.TrackDescription.TrackConditions.General.TCDisplay.TCTypeEnum.TractionSystem__none
  OR  
Condition == Kernel.TrackDescription.TrackConditions.General.TCDisplay.TCTypeEnum.TractionSystem__AC25kV
  OR  
Condition == Kernel.TrackDescription.TrackConditions.General.TCDisplay.TCTypeEnum.TractionSystem__AC15kV
  OR  
Condition == Kernel.TrackDescription.TrackConditions.General.TCDisplay.TCTypeEnum.TractionSystem__DC3kV
  OR  
Condition == Kernel.TrackDescription.TrackConditions.General.TCDisplay.TCTypeEnum.TractionSystem__DC1_5kV
  OR  
Condition == Kernel.TrackDescription.TrackConditions.General.TCDisplay.TCTypeEnum.TractionSystem__DC600_750V</Expression>
</Case></Cases>
</Function><Function
 Type="TCAnnouncementStruct"
 Default=""
 X="30"
 Y="470"
 Width="100"
 Height="50"
 Implemented="TRUE"
 Name="AnnouncementWithEnd"
 Guid="da2c8e8e-b0f4-4484-a1fc-bcdcc52ada1f"
>
<ReqRef
 Id="68413353-2dd0-4dd6-ba33-b1b4afb1c586"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="af7b95d0-8ff0-4a0c-90e4-1e284e90f540"
>
</ReqRef><ReqRef
 Id="96e826e2-9907-4faa-a010-bae190ca3e11"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="a2ae1668-d169-4dcc-8a6c-48b301cac5e8"
>
</ReqRef><ReqRef
 Id="12c337c0-55dd-4a63-ae32-c7fed0a16df9"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="59b74afc-e549-41d5-b7d9-d9bb5143340b"
>
</ReqRef><ReqRef
 Id="35fce87d-1120-47fb-8478-e9057dbcda67"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="215fbcf4-a2c7-4f16-a3ea-bae3c2287aa4"
>
</ReqRef><ReqRef
 Id="3bc1a1bb-c207-4a66-a42a-62965c4a81cf"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="0b201546-0a06-4e5c-b243-0982c198156f"
>
</ReqRef><ReqRef
 Id="02fc4b04-89a4-4fac-b594-da0bd5d3d31b"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="41dfe058-6369-4873-a81c-80f766c6b135"
>
</ReqRef><Comment>Modifies the announcement structures to include end conditions</Comment>
<Parameters>
<Parameter
 Type="TCAnnouncementStruct"
 Name="Announcement"
 Guid="5dd0b869-a7c9-435f-80b3-b38a724e8314"
>
</Parameter></Parameters>
<Cases>
<Case
 Name="Start"
 Guid="aa1dd969-f923-4ff9-be32-77c1fa6fd7ac"
>
<PreConditions>
<PreCondition
 Guid="574650f4-d4be-4607-aae6-1f497f219d1b"
>Announcement.Length != BaseTypes.Length.NA</PreCondition></PreConditions>
<Expression>Announcement</Expression>
</Case><Case
 Name="End - air tightness and brake inhibition"
 Guid="8356d99a-80de-4db1-b269-62b8bee53cf2"
>
<PreConditions>
<PreCondition
 Guid="3c1a78a8-b08f-4d9a-af7d-c504ef7b81f9"
>Announcement.Type == Kernel.TrackDescription.TrackConditions.General.TCDisplay.TCTypeEnum.AirTightness
  OR  
Announcement.Type == Kernel.TrackDescription.TrackConditions.General.TCDisplay.TCTypeEnum.EddyCurrentBrakeForEB
  OR  
Announcement.Type == Kernel.TrackDescription.TrackConditions.General.TCDisplay.TCTypeEnum.EddyCurrentBrakeForSB
  OR  
Announcement.Type == Kernel.TrackDescription.TrackConditions.General.TCDisplay.TCTypeEnum.MagneticShoeBrake
  OR  
Announcement.Type == Kernel.TrackDescription.TrackConditions.General.TCDisplay.TCTypeEnum.RegenerativeBrake</PreCondition></PreConditions>
<Expression>Kernel.TrackDescription.TrackConditions.General.TCDisplay.TCAnnouncementStruct{
    Type =&gt; Announcement.Type,
    Location =&gt; Announcement.Location,
    Length =&gt; Announcement.Length,
    Time =&gt; DateAndTime.CurrentTime + TimeToKeepAnnouncementsInRear
}</Expression>
</Case><Case
 Name="End"
 Guid="c46e3fa1-e865-42e0-a198-544bbdbe0281"
>
<Expression>Kernel.TrackDescription.TrackConditions.General.TCDisplay.TCAnnouncementStruct{
    Type =&gt; Announcement.Type,
    Location =&gt; Announcement.Location,
    Length =&gt; Announcement.Length,
    Time =&gt; DateAndTime.CurrentTime + TimeToKeepAnnouncementsInRear
}</Expression>
</Case></Cases>
</Function><Function
 Type="Boolean"
 Default=""
 X="150"
 Y="400"
 Width="100"
 Height="50"
 Implemented="TRUE"
 Name="ActiveConditionEnd"
 Guid="350875d4-66ec-4eaf-b954-e763b237a8cf"
>
<ReqRef
 Id="7ff9da00-1e5b-46f1-b270-f5f14d810fd9"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="53ca70e7-9b3a-4fb7-8aeb-f3be5c891550"
>
</ReqRef><ReqRef
 Id="2aea8a30-ac5d-4fd5-baa8-d160b7b48ee7"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="e970b976-925e-43c5-8f26-da9186c200a4"
>
</ReqRef><ReqRef
 Id="3622dce7-f18b-4dc7-8539-e2f01da0803b"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="88ce953b-de84-4831-9fe1-a5f3b9bef7c0"
>
</ReqRef><ReqRef
 Id="6f7663bd-2825-4a18-970c-735e9cb6d750"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="ab32ddbb-60d2-4062-9cbe-71714738f848"
>
</ReqRef><ReqRef
 Id="b68f5cf2-721d-45e0-bb47-eebf53ac6cfb"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="761bcbc3-8ce1-448a-801f-e556578d8b25"
>
</ReqRef><ReqRef
 Id="44386e14-f70e-4a34-ae1a-c1ebbc2ca149"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="8b5d30a1-ea1e-46bd-a562-56e8f8ef1dd3"
>
</ReqRef><ReqRef
 Id="a42d1ba3-faa3-4d96-9ea1-a86b6415e23d"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="6a248985-907a-4108-a8f5-e4d97e212036"
>
</ReqRef><ReqRef
 Id="a155d204-c214-45ff-a2b4-045e5aa12ba8"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="ed8122fd-c9c8-49a6-ae08-bd97ec5d66d4"
>
</ReqRef><ReqRef
 Id="22cbd162-caa0-4e5a-a581-176fc2b4b8bb"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="9ecc4b27-fdaf-46a9-91f5-f1401b021e4e"
>
</ReqRef><ReqRef
 Id="555c0388-8b13-4052-acc3-48e9e785af1a"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="3ce2cd62-0f37-4d92-a60e-d50c1c25a350"
>
</ReqRef><ReqRef
 Id="280a63e0-22df-4f00-8510-44fdf99aa05f"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="ba4f0096-64b2-4bec-8c41-0bbc282e4833"
>
</ReqRef><ReqRef
 Id="ac29655f-87cc-4309-b3bc-4d0736a743ad"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="d5282b15-6932-4fc2-b604-a2521f12b76e"
>
</ReqRef><Comment>Determines whether the train&apos;s front end has passed the end of the announcement (depending on the track condition announced and whether the announcement is at the start or the end of a track condition)</Comment>
<Parameters>
<Parameter
 Type="TCAnnouncementStruct"
 Name="Condition"
 Guid="4044d402-5eb4-4458-a9c9-4b9900c9ce58"
>
</Parameter></Parameters>
<Cases>
<Case
 Name="End announcement"
 Guid="1d7db37b-d17c-447d-9a09-08813c84396e"
>
<PreConditions>
<PreCondition
 Guid="950e5d7e-2733-4b57-99ea-67afded8e8f0"
>Condition.Length == BaseTypes.Length.NA</PreCondition></PreConditions>
<Expression>False</Expression>
</Case><Case
 Name="sound horn - TC"
 Guid="16793590-aa89-4df2-92d4-d4200df02408"
>
<PreConditions>
<PreCondition
 Guid="4d55a5a0-252b-40d7-aca2-f250e5eea64c"
>Condition.Type == Kernel.TrackDescription.TrackConditions.General.TCDisplay.TCTypeEnum.SoundHorn</PreCondition><PreCondition
 Guid="056f2b1c-6b4a-4e87-947f-ccd35902b247"
>NOT Condition.IsAnnouncement</PreCondition></PreConditions>
<Expression>Kernel.TrainPosition.FrontEndPosition(DistanceIntervalEnum.Nom) &gt;= Condition.Location + BaseTypes.LengthToDistance(Condition.Length)</Expression>
</Case><Case
 Name="Tunnel Stopping area - TC"
 Guid="b03c3fd7-a86f-4497-b8c2-f990764fa024"
>
<PreConditions>
<PreCondition
 Guid="46a2309e-001b-4157-9b58-eefd870ff7bf"
>Condition.Type == Kernel.TrackDescription.TrackConditions.General.TCDisplay.TCTypeEnum.TunnelStoppingArea</PreCondition><PreCondition
 Guid="3858c210-5ab7-48a1-a21e-9e326ba91909"
>NOT Condition.IsAnnouncement</PreCondition></PreConditions>
<Expression>Odometry.EstimatedSpeed &gt;= Kernel.TrackDescription.TrackConditions.General.TCDisplay.VirtualSBIForTarget(
    Distance=&gt; Kernel.TrainPosition.FrontEndPosition(DistanceIntervalEnum.Nom),
    Target=&gt;Kernel.SpeedAndDistanceMonitoring.TargetSpeedMonitoring.Target{
        Location =&gt; Condition.Location + BaseTypes.LengthToDistance(Condition.Length),
        Speed =&gt; 0.0,
        Length =&gt; 1.0
    }
)</Expression>
</Case><Case
 Name="Non stopping area - TC"
 Guid="3df70146-82dc-4145-83ac-5d66b4842495"
>
<PreConditions>
<PreCondition
 Guid="dd6e476a-075d-4b5c-8f3d-6ba637e97a50"
>Condition.Type == Kernel.TrackDescription.TrackConditions.General.TCDisplay.TCTypeEnum.NonStoppingArea</PreCondition><PreCondition
 Guid="bc57717c-4d76-47cc-850f-da6f12062c99"
>NOT Condition.IsAnnouncement</PreCondition></PreConditions>
<Expression>Odometry.EstimatedSpeed &gt;= Kernel.TrackDescription.TrackConditions.General.TCDisplay.VirtualSBIForTarget(
    Distance=&gt; Kernel.TrainPosition.FrontEndPosition(DistanceIntervalEnum.Min),
    Target=&gt;Kernel.SpeedAndDistanceMonitoring.TargetSpeedMonitoring.Target{
        Location =&gt; Condition.Location + BaseTypes.LengthToDistance(Condition.Length),
        Speed =&gt; 0.0,
        Length =&gt; 1.0
    }
)</Expression>
</Case><Case
 Name="Other conditions, except traction system - TC"
 Guid="9d2833cb-4955-4eb4-bb97-3b63e2f99ae9"
>
<PreConditions>
<PreCondition
 Guid="c206fd07-3e25-4b60-96bb-274ce34cc517"
>NOT Condition.IsAnnouncement</PreCondition><PreCondition
 Guid="71d949b9-c2e2-4049-b724-4ec9523067cf"
>Condition.Type != Kernel.TrackDescription.TrackConditions.General.TCDisplay.TCTypeEnum.TractionSystem__AC15kV
  AND  
Condition.Type != Kernel.TrackDescription.TrackConditions.General.TCDisplay.TCTypeEnum.TractionSystem__AC25kV
  AND  
Condition.Type != Kernel.TrackDescription.TrackConditions.General.TCDisplay.TCTypeEnum.TractionSystem__DC1_5kV
  AND  
Condition.Type != Kernel.TrackDescription.TrackConditions.General.TCDisplay.TCTypeEnum.TractionSystem__DC3kV
  AND  
Condition.Type != Kernel.TrackDescription.TrackConditions.General.TCDisplay.TCTypeEnum.TractionSystem__DC600_750V
  AND  
Condition.Type != Kernel.TrackDescription.TrackConditions.General.TCDisplay.TCTypeEnum.TractionSystem__none</PreCondition></PreConditions>
<Expression>Kernel.TrainPosition.FrontEndPosition(DistanceIntervalEnum.Min) &gt;= Condition.Location + BaseTypes.LengthToDistance(Condition.Length)</Expression>
</Case><Case
 Name="Tunnel stopping area - start"
 Guid="716374c5-4f36-428a-a4a1-86fb297309f4"
>
<PreConditions>
<PreCondition
 Guid="1c713b41-8617-430e-a228-0143071d3404"
>Condition.Type == Kernel.TrackDescription.TrackConditions.General.TCDisplay.TCTypeEnum.TunnelStoppingArea</PreCondition></PreConditions>
<Expression>Kernel.TrainPosition.FrontEndPosition(DistanceIntervalEnum.Nom) &gt;= Condition.Location + BaseTypes.LengthToDistance(Condition.Length)</Expression>
</Case><Case
 Name="Other types - start"
 Guid="7965a6a4-1f24-40c5-b623-32892a992bfa"
>
<Expression>Kernel.TrainPosition.FrontEndPosition(DistanceIntervalEnum.Max) &gt;= Condition.Location + BaseTypes.LengthToDistance(Condition.Length)</Expression>
</Case></Cases>
</Function><Function
 Type="Boolean"
 Default=""
 X="30"
 Y="400"
 Width="100"
 Height="50"
 Implemented="TRUE"
 Name="ActiveConditionStart"
 Guid="551a8c1e-f182-44c8-b7fb-8c6926db8492"
>
<ReqRef
 Id="c5c7a634-701c-4959-ae64-0522e9a953bd"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="cbe62774-38d1-4fe4-b85d-b5b4c674de33"
>
</ReqRef><ReqRef
 Id="6cbde49b-37af-4487-8711-54e2b5be1b1a"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="5df1e686-68a2-4190-b81b-0350be0b0c7a"
>
</ReqRef><ReqRef
 Id="728d48f2-61c9-4dad-9800-8a9daa1cfbf9"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="42b0ac6b-3602-4b73-93c7-32eb7a03eb3f"
>
</ReqRef><ReqRef
 Id="37680a2a-2a2a-4293-b7b9-642b8326a938"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="6bb69c3d-22b1-404b-b7e2-1c9df46e1d3b"
>
</ReqRef><ReqRef
 Id="dd85a59f-1d9f-471f-a5df-61f76a51d906"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="ba1150ce-6c3e-4440-b6fd-d0f207550123"
>
</ReqRef><ReqRef
 Id="f6b3f58f-5fb2-453a-958e-a1a861d66a2f"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="1ef9e2fd-2f8f-44fb-9f7f-e969a2aaacde"
>
</ReqRef><ReqRef
 Id="4c148829-6224-4b0d-b6f5-d506545632eb"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="996c01e1-5f95-4391-b21c-91ebe5cc2ec6"
>
</ReqRef><ReqRef
 Id="76e592ed-ed99-43e7-914d-f61ca2620144"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="a260ea93-ce17-4f92-8883-60ebc3f4146f"
>
</ReqRef><ReqRef
 Id="a8ccc78f-09d7-4eed-b28f-c54108243648"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="fce528da-8572-4c84-ac5d-e6db321eb389"
>
</ReqRef><ReqRef
 Id="a155d204-c214-45ff-a2b4-045e5aa12ba8"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="f9db3cd7-6cd3-4dc9-80d7-e65b80653ebd"
>
</ReqRef><ReqRef
 Id="12c337c0-55dd-4a63-ae32-c7fed0a16df9"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="c551d459-cc8c-499f-b7eb-9816e0146124"
>
</ReqRef><ReqRef
 Id="3c13572d-5841-4b36-8f01-b73857688c4b"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="a1b7e46a-64a9-4dc8-b134-af45a3a70407"
>
</ReqRef><ReqRef
 Id="9ca199da-b431-4208-bbb1-61052c8839e8"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="bf7cb675-2148-4d17-943f-c78c67ecdc9b"
>
</ReqRef><ReqRef
 Id="46ca4ea8-b495-4b75-8ec7-60ccf9444a55"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="cd305909-2cec-40bc-9bb3-5c4f63621c6b"
>
</ReqRef><ReqRef
 Id="22cbd162-caa0-4e5a-a581-176fc2b4b8bb"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="24f43caf-abc8-43d4-b564-482d85b3a19c"
>
</ReqRef><ReqRef
 Id="280a63e0-22df-4f00-8510-44fdf99aa05f"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="2a830669-29b5-4751-91ce-02804b497e19"
>
</ReqRef><Comment>Indicates whether the train has reached the location where the given announcement should start to be displayed</Comment>
<Parameters>
<Parameter
 Type="TCAnnouncementStruct"
 Name="Condition"
 Guid="ea64b366-1b29-4689-830c-ea6c019f7f83"
>
</Parameter></Parameters>
<Cases>
<Case
 Name="Tunnel stopping area, sound horn - TC"
 Guid="2380f02e-c029-43df-a6fa-e2201a597584"
>
<PreConditions>
<PreCondition
 Guid="0bc54b56-072f-421b-b498-fe11e372c0de"
>NOT Condition.IsAnnouncement</PreCondition><PreCondition
 Guid="16856320-3b2a-4716-be02-9be9642746af"
>Condition.Type == Kernel.TrackDescription.TrackConditions.General.TCDisplay.TCTypeEnum.TunnelStoppingArea
  OR  
Condition.Type == Kernel.TrackDescription.TrackConditions.General.TCDisplay.TCTypeEnum.SoundHorn</PreCondition></PreConditions>
<Expression>Kernel.TrainPosition.FrontEndPosition( PointOfInterest=&gt;DistanceIntervalEnum.Nom ) &gt;= Condition.Location</Expression>
</Case><Case
 Name="Other TC"
 Guid="1a1229a7-8ad3-4bff-a0f3-212e7d8a9faa"
>
<PreConditions>
<PreCondition
 Guid="c63e9068-9937-4bfe-9fee-b359faad97a5"
>NOT Condition.IsAnnouncement</PreCondition></PreConditions>
<Expression>Kernel.TrainPosition.FrontEndPosition( PointOfInterest=&gt;DistanceIntervalEnum.Max ) &gt;= Condition.Location</Expression>
</Case><Case
 Name="Non stopping area Announcement - start"
 Guid="873ea663-7256-4f44-89ec-fd78b96620ff"
>
<Comment>This case is for the start of the &quot;Non Stopping Area&quot; announcement. A SBI curve is calculated ending at the start of the non stopping area (at Announcement.Distance + Announcement.Length). If the train&apos;s current speed is greater than the curve at the train&apos;s current position, then the announcement should be displayed</Comment>
<PreConditions>
<PreCondition
 Guid="f6afee15-fc7a-47e4-a6f5-05176ac7fa9e"
>Condition.Type == Kernel.TrackDescription.TrackConditions.General.TCDisplay.TCTypeEnum.NonStoppingArea</PreCondition></PreConditions>
<Expression>Odometry.TrainSpeed() &gt;= Kernel.TrackDescription.TrackConditions.General.TCDisplay.VirtualSBIForTarget(
    Distance=&gt;Kernel.TrainPosition.FrontEndPosition(DistanceIntervalEnum.Max),
    Target=&gt;Kernel.SpeedAndDistanceMonitoring.TargetSpeedMonitoring.Target{
        Location =&gt; Condition.Location + BaseTypes.LengthToDistance(Condition.Length),
        Speed =&gt; 0.0,
        Length =&gt; BaseTypes.Length.Infinity}
)</Expression>
</Case><Case
 Name="Tunnel stopping area - start"
 Guid="028d9395-6dc0-4cc4-b49d-d78fe9db2603"
>
<PreConditions>
<PreCondition
 Guid="c70f9ca9-e9b7-4414-938a-38e428031c96"
>Condition.Type == Kernel.TrackDescription.TrackConditions.General.TCDisplay.TCTypeEnum.TunnelStoppingArea</PreCondition></PreConditions>
<Expression>True</Expression>
</Case><Case
 Name="Sound horn - start"
 Guid="7eb91f50-22d5-43e7-9396-0085e2da4f45"
>
<PreConditions>
<PreCondition
 Guid="c3790b14-c687-4d89-885d-72e39767003f"
>Condition.Type == Kernel.TrackDescription.TrackConditions.General.TCDisplay.TCTypeEnum.SoundHorn</PreCondition></PreConditions>
<Expression>Kernel.TrainPosition.FrontEndPosition(DistanceIntervalEnum.Nom) &gt;= Condition.Location</Expression>
</Case><Case
 Name="Conditions - end"
 Guid="43cc02b3-c997-4f1d-b0eb-494230903fc3"
>
<PreConditions>
<PreCondition
 Guid="2ebc94ea-dc49-4889-8574-ac261cead9dd"
>Condition.Length == BaseTypes.Length.NA</PreCondition></PreConditions>
<Expression>Kernel.TrainPosition.FrontEndPosition(DistanceIntervalEnum.Min) &gt;= Condition.Location</Expression>
</Case><Case
 Name="Other conditions - start"
 Guid="2712b1ff-1b3d-4999-b9f2-a740966c7e91"
>
<Expression>Kernel.TrainPosition.FrontEndPosition(DistanceIntervalEnum.Max) &gt;= Condition.Location</Expression>
</Case></Cases>
</Function><Function
 Type="BaseTypes.Speed"
 Default=""
 X="150"
 Y="540"
 Width="100"
 Height="50"
 Implemented="TRUE"
 Name="VirtualSBIForTarget"
 Guid="aef285ac-6d1f-41d6-8295-a9af0196f6f2"
>
<ReqRef
 Id="728d48f2-61c9-4dad-9800-8a9daa1cfbf9"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="302af9cb-e307-4a08-a06d-cadb71fc5c53"
>
</ReqRef><ReqRef
 Id="a155d204-c214-45ff-a2b4-045e5aa12ba8"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="cd82a43e-8c9b-475b-9bdf-af9a959bb3bc"
>
</ReqRef><ReqRef
 Id="3c13572d-5841-4b36-8f01-b73857688c4b"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="bc215be5-5f8a-46b9-94aa-040dcd0a5c38"
>
</ReqRef><Comment>Creates a SBI deceleration curve ending at the target</Comment>
<Parameters>
<Parameter
 Type="BaseTypes.Distance"
 Name="Distance"
 Guid="a5bed748-c7c1-4fb4-874f-b749d688adb1"
>
</Parameter><Parameter
 Type="SpeedAndDistanceMonitoring.TargetSpeedMonitoring.Target"
 Name="Target"
 Guid="361d8801-cc78-4d8c-a114-d10e57711ff6"
>
</Parameter></Parameters>
<Cases>
<Case
 Name="Value"
 Guid="1f75f261-a1ed-4441-b109-7e0bcc2a7ac8"
>
<Expression>DecelerationProfile(
    SpeedRestrictions=&gt; FUNCTION d : Default.BaseTypes.Distance =&gt; Kernel.TrackDescription.TrackConditions.General.TCDisplay.VirtualSpeedRestriction(Distance=&gt;d, Target=&gt;Kernel.SpeedAndDistanceMonitoring.TargetSpeedMonitoring.Target{
    Location =&gt; Target.Location - BaseTypes.SpeedToMS ( Odometry.TrainSpeed() ) * SpeedAndDistanceMonitoring.TargetSpeedMonitoring.T_bs1,
    Speed =&gt; 0.0,
    Length =&gt; 0.0
}),
    DecelerationFactor=&gt;TrainData.BrakingParameters.A_expected
)(Distance)</Expression>
</Case></Cases>
</Function><Function
 Type="BaseTypes.Speed"
 Default=""
 X="270"
 Y="400"
 Width="100"
 Height="50"
 Implemented="TRUE"
 Name="VirtualSpeedRestriction"
 Guid="e29c2519-6260-43a0-9281-165ed7bc6178"
>
<ReqRef
 Id="728d48f2-61c9-4dad-9800-8a9daa1cfbf9"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="a28c2b26-6c0d-48a1-af9e-62723818370c"
>
</ReqRef><ReqRef
 Id="3c13572d-5841-4b36-8f01-b73857688c4b"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="ec9c4a7d-0099-4838-a64a-c937788f7adc"
>
</ReqRef><Comment>Creates a speed restriction function where the train may travel at max speed up to the given distance, where the max allowed speed becomes 0</Comment>
<Parameters>
<Parameter
 Type="BaseTypes.Distance"
 Name="Distance"
 Guid="70e22ed7-0c40-4621-b333-d82e16d3ef6e"
>
</Parameter><Parameter
 Type="SpeedAndDistanceMonitoring.TargetSpeedMonitoring.Target"
 Name="Target"
 Guid="9c3765ad-4033-4e59-bb97-622b108f95b0"
>
</Parameter></Parameters>
<Cases>
<Case
 Name="Distance &lt; target distance"
 Guid="7d70bf85-3fd0-44e6-ab90-2281950586bd"
>
<PreConditions>
<PreCondition
 Guid="b3ee7322-3711-49f4-abb1-1c72b2ccf804"
>Distance &lt; Target.Location</PreCondition></PreConditions>
<Expression>BaseTypes.Speed.MaxSpeed</Expression>
</Case><Case
 Name="Distance &gt;= target distance"
 Guid="77df21cf-511e-4fd3-862f-461e26867f2c"
>
<Expression>0.0</Expression>
</Case></Cases>
</Function><Function
 Type="BaseTypes.Distance"
 Cacheable="TRUE"
 Default=""
 X="270"
 Y="470"
 Width="100"
 Height="50"
 Implemented="TRUE"
 NeedsRequirement="FALSE"
 Name="EndOfTC"
 Guid="921c1626-64ff-49fb-82a0-f21559d43682"
>
<ReqRef
 Id="3c13572d-5841-4b36-8f01-b73857688c4b"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="e573e0df-0292-4fdd-a38b-1cf97ed0c721"
>
</ReqRef><ReqRef
 Id="ac29655f-87cc-4309-b3bc-4d0736a743ad"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="fbb0de79-19e8-4803-8e89-1650fac6b9eb"
>
</ReqRef><ReqRef
 Id="a155d204-c214-45ff-a2b4-045e5aa12ba8"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="3d3a2d85-dbf2-4f24-bb4d-d234ad9221a7"
>
</ReqRef><ReqRef
 Id="22cbd162-caa0-4e5a-a581-176fc2b4b8bb"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="30d98990-505e-475e-8a14-1636b3f25adb"
>
</ReqRef><ReqRef
 Id="555c0388-8b13-4052-acc3-48e9e785af1a"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="d4353b0a-634d-4643-b9f8-c658d2496764"
>
</ReqRef><Comment>Returns the end distance of a currently active track condition</Comment>
<Parameters>
<Parameter
 Type="TCTypeEnum"
 Name="TCType"
 Guid="e1e7afab-436c-4c9a-a774-4f3518a988ca"
>
</Parameter></Parameters>
<Cases>
<Case
 Name="Return distance at end of non stopping area"
 Guid="286e67de-61a6-4819-9924-a2e75457c7c5"
>
<PreConditions>
<PreCondition
 Guid="85fce91e-776f-4f8e-9eb4-16352c6f1505"
>TCType == Kernel.TrackDescription.TrackConditions.General.TCDisplay.TCTypeEnum.NonStoppingArea</PreCondition></PreConditions>
<Expression>REDUCE Kernel.TrackDescription.TrackConditions.General.TCProfile | (NOT X.Value.NonStoppingArea)
USING X IN BaseTypes.MinDistance(
    X1=&gt;X.Location,
    X2=&gt;RESULT
)
INITIAL_VALUE BaseTypes.Distance.Infinity</Expression>
</Case><Case
 Name="Return distance at end of tunnel stopping area"
 Guid="cf4151e9-81f1-4fb2-90a8-e7e43e1d67b0"
>
<PreConditions>
<PreCondition
 Guid="f091ee4d-ca51-40a7-8b31-d640d6048e68"
>TCType == Kernel.TrackDescription.TrackConditions.General.TCDisplay.TCTypeEnum.TunnelStoppingArea</PreCondition></PreConditions>
<Expression>REDUCE Kernel.TrackDescription.TrackConditions.General.TCProfile | (NOT X.Value.TunnelStoppingArea)
USING X IN BaseTypes.MinDistance(
    X1=&gt;X.Location,
    X2=&gt;RESULT
)
INITIAL_VALUE BaseTypes.Distance.Infinity</Expression>
</Case><Case
 Name="Otherwise"
 Guid="8c66f8c2-3fc8-4236-947e-f995fe044d7f"
>
<Expression>BaseTypes.Distance.Infinity</Expression>
</Case></Cases>
</Function><Function
 Type="TCStructWithSoundHorn"
 Default=""
 X="510"
 Y="400"
 Width="100"
 Height="50"
 Implemented="TRUE"
 Name="HideTCInformation"
 Guid="43c1e2b3-87e0-4736-a2ff-e720461ac353"
>
<ReqRef
 Id="ac29655f-87cc-4309-b3bc-4d0736a743ad"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="67e6ede4-f075-4dd8-ada3-0a4ab2fa5d20"
>
</ReqRef><ReqRef
 Id="555c0388-8b13-4052-acc3-48e9e785af1a"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="67b62f20-6af1-4081-8a15-2119e15f5092"
>
</ReqRef><Comment>Removes the tunnel stopping area and non stopping area information from the displayed track conditions when the ends are passed (these conditions do not end at a fixed location, so this must be done dynamically)</Comment>
<Parameters>
<Parameter
 Type="BaseTypes.Distance"
 Name="Distance"
 Guid="f7c2579a-aaa5-4a0b-aa28-ac3d48ef713b"
>
</Parameter><Parameter
 Type="TCStructWithSoundHorn"
 Name="ProfilePoint"
 Guid="98e51548-5b4f-4bf6-8a04-04f775eaa648"
>
</Parameter><Parameter
 Type="TCTypeEnum"
 Name="TCType"
 Guid="4761551b-fdd6-4b04-bb33-0c438ac93d33"
>
</Parameter></Parameters>
<Cases>
<Case
 Name="In non stopping area"
 Guid="464a85f9-9645-4466-993d-99d5a7f3483a"
>
<PreConditions>
<PreCondition
 Guid="147dc229-5272-4fe1-968f-ea42ee8344b3"
>ProfilePoint.Location &lt; Distance</PreCondition><PreCondition
 Guid="0beb59e2-d413-413a-96be-e935e92a36c7"
>TCType == Kernel.TrackDescription.TrackConditions.General.TCDisplay.TCTypeEnum.NonStoppingArea</PreCondition></PreConditions>
<Expression>Kernel.TrackDescription.TrackConditions.General.TCDisplay.TCStructWithSoundHorn{
    SoundHorn =&gt; ProfilePoint.SoundHorn,
    TunnelStoppingArea =&gt; ProfilePoint.TunnelStoppingArea,
    NonStoppingArea =&gt; False,
    Location =&gt; ProfilePoint.Location
}</Expression>
</Case><Case
 Name="In tunnel stopping area"
 Guid="d80151e2-822b-469b-ba02-3bee6ca4cb4b"
>
<PreConditions>
<PreCondition
 Guid="68a5334c-effd-4849-9229-fd4b39e19564"
>TCType == Kernel.TrackDescription.TrackConditions.General.TCDisplay.TCTypeEnum.TunnelStoppingArea</PreCondition><PreCondition
 Guid="d39b4d44-f5c2-4bd8-b14b-a067c3cea797"
>ProfilePoint.Location &lt; Distance</PreCondition></PreConditions>
<Expression>Kernel.TrackDescription.TrackConditions.General.TCDisplay.TCStructWithSoundHorn{
    SoundHorn =&gt; ProfilePoint.SoundHorn,
    TunnelStoppingArea =&gt; False,
    NonStoppingArea =&gt; ProfilePoint.NonStoppingArea,
    Location =&gt; ProfilePoint.Location
}</Expression>
</Case><Case
 Name="Otherwise"
 Guid="935730e5-8459-4ec3-9428-c1f261dbe4d9"
>
<Expression>ProfilePoint</Expression>
</Case></Cases>
</Function><Function
 Type="Boolean"
 Cacheable="TRUE"
 Default=""
 X="270"
 Y="540"
 Width="100"
 Height="50"
 Implemented="TRUE"
 NeedsRequirement="FALSE"
 Name="EndStoppingAreaDisplay"
 Guid="a664c058-4c72-4d95-acd9-bc9686c2289f"
>
<ReqRef
 Id="a155d204-c214-45ff-a2b4-045e5aa12ba8"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="02700e95-9f4b-4549-a9df-20da51e1c9f4"
>
</ReqRef><ReqRef
 Id="3c13572d-5841-4b36-8f01-b73857688c4b"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="75ef57de-ba6d-476a-ad14-cd0bda27a2fe"
>
</ReqRef><ReqRef
 Id="22cbd162-caa0-4e5a-a581-176fc2b4b8bb"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="02272ef0-0de5-46f3-96cf-3570f197ae01"
>
</ReqRef><ReqRef
 Id="555c0388-8b13-4052-acc3-48e9e785af1a"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="fd96d313-85ca-4f73-9249-6f018a8687bc"
>
</ReqRef><ReqRef
 Id="ac29655f-87cc-4309-b3bc-4d0736a743ad"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="76edba4e-adcd-4666-9c0b-a2d81c340787"
>
</ReqRef><ReqRef
 Id="280a63e0-22df-4f00-8510-44fdf99aa05f"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="70549c5a-da7f-44ef-8e32-57f723013e7e"
>
</ReqRef><Comment>Checks that the current &quot;Non Stopping Area&quot; or &quot;Tunnel Stopping Area&quot; conditions should no longer be displayed to the driver</Comment>
<Parameters>
<Parameter
 Type="TCAnnouncementStruct"
 Name="Condition"
 Guid="2f43b57a-1853-478a-b247-351d8a544987"
>
</Parameter></Parameters>
<Cases>
<Case
 Name="Non Stopping Area"
 Guid="4ad06aa1-f834-4b8d-aeb1-d419c5236f32"
>
<PreConditions>
<PreCondition
 Guid="7ed23257-5205-44a7-af4d-48da79eb3071"
>Condition.Type == Kernel.TrackDescription.TrackConditions.General.TCDisplay.TCTypeEnum.NonStoppingArea</PreCondition></PreConditions>
<Expression>Odometry.TrainSpeed() &gt;= Kernel.TrackDescription.TrackConditions.General.TCDisplay.VirtualSBIForTarget(
    Distance=&gt; Kernel.TrainPosition.FrontEndPosition(DistanceIntervalEnum.Min),
    Target=&gt; Kernel.SpeedAndDistanceMonitoring.TargetSpeedMonitoring.Target{
        Location =&gt; Condition.Location + BaseTypes.LengthToDistance(Condition.Length),
        Speed =&gt; 0.0,
        Length =&gt; 1.0
    }
)</Expression>
</Case><Case
 Name="Tunnel Stopping Area"
 Guid="732e2eb8-5139-4579-a206-cf7000a76589"
>
<PreConditions>
<PreCondition
 Guid="0e831f00-68f6-4d87-ba12-9e8859198773"
>Condition.Type == Kernel.TrackDescription.TrackConditions.General.TCDisplay.TCTypeEnum.TunnelStoppingArea</PreCondition></PreConditions>
<Expression>Odometry.TrainSpeed() &gt;= Kernel.TrackDescription.TrackConditions.General.TCDisplay.VirtualSBIForTarget(
    Distance=&gt; Kernel.TrainPosition.FrontEndPosition(DistanceIntervalEnum.Nom),
    Target=&gt;Kernel.SpeedAndDistanceMonitoring.TargetSpeedMonitoring.Target{
        Location =&gt; Condition.Location + BaseTypes.LengthToDistance(Condition.Length),
        Speed =&gt; 0.0,
        Length =&gt; 1.0
    }
)</Expression>
</Case><Case
 Name="Otherwise"
 Guid="ebcad225-780e-44bb-bb8d-dfb9ec8b47b4"
>
<Expression>False</Expression>
</Case></Cases>
</Function><Function
 Type="Boolean"
 Default=""
 X="150"
 Y="330"
 Width="100"
 Height="50"
 Implemented="TRUE"
 NeedsRequirement="FALSE"
 Name="HasDisplayEnd"
 Guid="9339a946-34c6-41ed-993a-77e6ce1bdcb8"
>
<Comment>Checks whether the announcement or track condition has an end condition</Comment>
<Parameters>
<Parameter
 Type="TCAnnouncementStruct"
 Name="Announcement"
 Guid="2117075f-d95c-40b1-9be8-887b514cf56e"
>
</Parameter></Parameters>
<Cases>
<Case
 Name="Value"
 Guid="24c7e14b-3f38-48ae-92f1-c3766a900d6f"
>
<Expression>NOT
(Announcement.Length == BaseTypes.Length.NA
  AND  
 Announcement.Time == BaseTypes.Time.Infinity)</Expression>
</Case></Cases>
</Function><Function
 Type="Boolean"
 Default=""
 X="30"
 Y="330"
 Width="100"
 Height="50"
 Implemented="TRUE"
 NeedsRequirement="FALSE"
 Name="AnnouncementNoLongerRelevant"
 Guid="37d09035-d113-4a4b-9dad-6ae860d80926"
>
<Comment>For a given track condition or announcement, determines whether the train has passed the end of its applicability.</Comment>
<Parameters>
<Parameter
 Type="TCAnnouncementStruct"
 Name="Announcement"
 Guid="06d3a838-5962-4f5d-8014-1d5fc92caa17"
>
</Parameter></Parameters>
<Cases>
<Case
 Name="End in distance"
 Guid="8e1222a8-4838-4fb9-88b3-af03bfbebf98"
>
<PreConditions>
<PreCondition
 Guid="3399256f-06ab-4f11-b072-4833279d0fed"
>Announcement.Length != BaseTypes.Length.NA</PreCondition></PreConditions>
<Expression>Kernel.TrainPosition.FrontEndPosition(DistanceIntervalEnum.Min) &gt; Announcement.Location + BaseTypes.LengthToDistance(Announcement.Length)</Expression>
</Case><Case
 Name="End in time"
 Guid="38a7cde2-afeb-4dd5-85f0-a60e4dcc0c88"
>
<Expression>Kernel.DateAndTime.CurrentTime &gt; Announcement.Time</Expression>
</Case></Cases>
</Function></Functions>
<Procedures>
<Procedure
 X="150"
 Y="650"
 Width="100"
 Height="50"
 Implemented="TRUE"
 Name="MakeAnnouncement"
 Guid="773d168c-d251-419a-8a80-b38047c9b630"
>
<ReqRef
 Id="c5c7a634-701c-4959-ae64-0522e9a953bd"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="e068e870-ce69-49e6-bfa6-8fc880dc50b5"
>
</ReqRef><ReqRef
 Id="6cbde49b-37af-4487-8711-54e2b5be1b1a"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="316748d3-018c-4758-9686-55eb5a996c4f"
>
</ReqRef><ReqRef
 Id="76e592ed-ed99-43e7-914d-f61ca2620144"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="36f516fe-ec00-46c2-956c-7287991e0dba"
>
</ReqRef><ReqRef
 Id="a8ccc78f-09d7-4eed-b28f-c54108243648"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="39530206-03d7-4c0b-bd4b-0de602644bce"
>
</ReqRef><ReqRef
 Id="37680a2a-2a2a-4293-b7b9-642b8326a938"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="632e6813-02ff-4d0d-9c38-c299da415653"
>
</ReqRef><ReqRef
 Id="dd85a59f-1d9f-471f-a5df-61f76a51d906"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="9a9aab5e-877c-4237-8dba-a91bfd08442e"
>
</ReqRef><ReqRef
 Id="4c148829-6224-4b0d-b6f5-d506545632eb"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="55a9dc1d-0a74-42f2-87b8-be0e138b693c"
>
</ReqRef><Comment>Create a start announcement and an end (if necessary) corresponding to a recently received track condition</Comment>
<Parameters>
<Parameter
 Type="Messages.M_TRACKCOND"
 Name="TCType"
 Guid="a0acc450-81bf-483c-8e8f-b3ddc7413426"
>
</Parameter><Parameter
 Type="BaseTypes.Distance"
 Name="Distance"
 Guid="944681be-ed77-428d-8dea-9ce0baf3f986"
>
</Parameter><Parameter
 Type="BaseTypes.Length"
 Name="Length"
 Guid="5498fbcf-248e-4e57-a49a-3d6b7241f69e"
>
</Parameter></Parameters>
<Rules>
<Rule
 Priority="Processing"
 Implemented="TRUE"
 Name="Announcement before the TC"
 Guid="393ba3e2-b5e3-4b80-ae5a-fd17cbb63761"
>
<Comment>Make new start of track condition announcement</Comment>
<SubRules></SubRules>
<Conditions>
<RuleCondition
 Implemented="TRUE"
 Name="Air tightness"
 Guid="5792b6f7-6adf-4e6e-9d49-9185a746957f"
>
<Comment>Close air intake for air conditioning announcement</Comment>
<PreConditions>
<PreCondition
 Guid="427a6812-d486-4f22-b7c2-37b8807f34ac"
>TCType == Messages.M_TRACKCOND.Air_tightness__Initial_state__no_request_for_air_tightness</PreCondition></PreConditions>
<Actions>
<Action
 Guid="546cd297-955f-444f-8d22-b8f9fd70b613"
>INSERT Kernel.TrackDescription.TrackConditions.General.TCDisplay.NewAnnouncement(
    TCType=&gt;Kernel.TrackDescription.TrackConditions.General.TCDisplay.TCTypeEnum.AirTightness,
    Distance=&gt;Kernel.TrackDescription.TrackConditions.General.TCDisplay.AnnouncementLocation(TrackCondition =&gt; Kernel.TrackDescription.TrackConditions.General.TrackConditionStruct{AirTightness =&gt; True}, Distance =&gt; Distance),
    Length=&gt;BaseTypes.DistanceToLength(Distance - Kernel.TrackDescription.TrackConditions.General.TCDisplay.AnnouncementLocation(TrackCondition =&gt; Kernel.TrackDescription.TrackConditions.General.TrackConditionStruct{AirTightness =&gt; True}, Distance =&gt; Distance)),
    Announcement =&gt; True
)
IN Kernel.TrackDescription.TrackConditions.General.TCDisplay.Announcements</Action></Actions>
</RuleCondition><RuleCondition
 Implemented="TRUE"
 Name="Eddy current brake for EB inhibited"
 Guid="e75d59b6-f365-4120-bd50-99d7335f2faf"
>
<Comment>Inhibition of eddy current brake for the emergency brake announcement</Comment>
<PreConditions>
<PreCondition
 Guid="c9521eae-5f8b-44ce-bd80-38b914aedd00"
>TCType == Messages.M_TRACKCOND.Switch_off_eddy_current_brake_for_emergency_brake__Initial_state__eddy_current_brake_for_emergency_brake_on</PreCondition></PreConditions>
<Actions>
<Action
 Guid="85a0948f-1d9c-4cab-bf12-37a4ddf0a300"
>INSERT Kernel.TrackDescription.TrackConditions.General.TCDisplay.NewAnnouncement(
    TCType=&gt;Kernel.TrackDescription.TrackConditions.General.TCDisplay.TCTypeEnum.EddyCurrentBrakeForEB,
    Distance=&gt;Kernel.TrackDescription.TrackConditions.General.TCDisplay.AnnouncementLocation(TrackCondition =&gt; Kernel.TrackDescription.TrackConditions.General.TrackConditionStruct{SwitchOffEddyCurrentBrakeForEB =&gt; True}, Distance =&gt; Distance),
    Length=&gt;BaseTypes.DistanceToLength(Distance - Kernel.TrackDescription.TrackConditions.General.TCDisplay.AnnouncementLocation(TrackCondition =&gt; Kernel.TrackDescription.TrackConditions.General.TrackConditionStruct{SwitchOffEddyCurrentBrakeForEB =&gt; True}, Distance =&gt; Distance)),
    Announcement =&gt; True
)
IN Kernel.TrackDescription.TrackConditions.General.TCDisplay.Announcements</Action></Actions>
</RuleCondition><RuleCondition
 Implemented="TRUE"
 Name="Eddy current brake for SB inhibited"
 Guid="d07dc9d3-8de3-44bd-9345-da359323a103"
>
<Comment>Inhibition of eddy current brake for the service brake announcement</Comment>
<PreConditions>
<PreCondition
 Guid="1269e690-bf92-4fdd-8657-c5ce2d284505"
>TCType == Messages.M_TRACKCOND.Switch_off_eddy_current_brake_for_service_brake__Initial_state__eddy_current_brake_for_service_brake_on</PreCondition></PreConditions>
<Actions>
<Action
 Guid="ac6e5758-3e61-4776-bcfb-524f3b05d73c"
>INSERT Kernel.TrackDescription.TrackConditions.General.TCDisplay.NewAnnouncement(
    TCType=&gt;Kernel.TrackDescription.TrackConditions.General.TCDisplay.TCTypeEnum.EddyCurrentBrakeForSB,
    Distance=&gt;Kernel.TrackDescription.TrackConditions.General.TCDisplay.AnnouncementLocation(TrackCondition =&gt; Kernel.TrackDescription.TrackConditions.General.TrackConditionStruct{SwitchOffEddyCurrentBrakeForSB =&gt; True}, Distance =&gt; Distance),
    Length=&gt;BaseTypes.DistanceToLength(Distance - Kernel.TrackDescription.TrackConditions.General.TCDisplay.AnnouncementLocation(TrackCondition =&gt; Kernel.TrackDescription.TrackConditions.General.TrackConditionStruct{SwitchOffEddyCurrentBrakeForSB =&gt; True}, Distance =&gt; Distance)),
    Announcement =&gt; True
)
IN Kernel.TrackDescription.TrackConditions.General.TCDisplay.Announcements</Action></Actions>
</RuleCondition><RuleCondition
 Implemented="TRUE"
 Name="Lower pantograph"
 Guid="1850fb27-dd99-4552-838a-6e5021c59fbc"
>
<Comment>Lower pantograph announcement</Comment>
<PreConditions>
<PreCondition
 Guid="cf90b65b-87a3-4e31-99ce-0a8b5ac9571c"
>TCType == Messages.M_TRACKCOND.Powerless_section___lower_pantograph__Initial_state__not_powerless_section</PreCondition></PreConditions>
<Actions>
<Action
 Guid="9392e167-71c3-4d68-a559-63642bd48557"
>INSERT Kernel.TrackDescription.TrackConditions.General.TCDisplay.NewAnnouncement(
    TCType=&gt;Kernel.TrackDescription.TrackConditions.General.TCDisplay.TCTypeEnum.LowerPantograph,
    Distance=&gt;Kernel.TrackDescription.TrackConditions.General.TCDisplay.AnnouncementLocation(TrackCondition =&gt; Kernel.TrackDescription.TrackConditions.General.TrackConditionStruct{PowerlessSection_LowerPantograph =&gt; True}, Distance =&gt; Distance),
    Length=&gt;BaseTypes.DistanceToLength(Distance - Kernel.TrackDescription.TrackConditions.General.TCDisplay.AnnouncementLocation(TrackCondition =&gt; Kernel.TrackDescription.TrackConditions.General.TrackConditionStruct{PowerlessSection_LowerPantograph =&gt; True}, Distance =&gt; Distance)),
    Announcement =&gt; True
)
IN Kernel.TrackDescription.TrackConditions.General.TCDisplay.Announcements</Action></Actions>
</RuleCondition><RuleCondition
 Implemented="TRUE"
 Name="Magnetic shoe brake inhibition"
 Guid="df2fa0db-eac2-4409-b354-79a502f9731e"
>
<Comment>Inhibition of magnetic shoe brake announcement</Comment>
<PreConditions>
<PreCondition
 Guid="beef047a-088a-496d-a290-5ede84fe76d3"
>TCType == Messages.M_TRACKCOND.Switch_off_magnetic_shoe_brake__Initial_state__magnetic_shoe_brake_on</PreCondition></PreConditions>
<Actions>
<Action
 Guid="57592127-9e52-4396-aea6-5310995f0887"
>INSERT Kernel.TrackDescription.TrackConditions.General.TCDisplay.NewAnnouncement(
    TCType=&gt;Kernel.TrackDescription.TrackConditions.General.TCDisplay.TCTypeEnum.MagneticShoeBrake,
    Distance=&gt;Kernel.TrackDescription.TrackConditions.General.TCDisplay.AnnouncementLocation(TrackCondition =&gt; Kernel.TrackDescription.TrackConditions.General.TrackConditionStruct{SwitchOffMagneticShoeBrake =&gt; True}, Distance =&gt; Distance),
    Length=&gt;BaseTypes.DistanceToLength(Distance - Kernel.TrackDescription.TrackConditions.General.TCDisplay.AnnouncementLocation(TrackCondition =&gt; Kernel.TrackDescription.TrackConditions.General.TrackConditionStruct{SwitchOffMagneticShoeBrake =&gt; True}, Distance =&gt; Distance)),
    Announcement =&gt; True
)
IN Kernel.TrackDescription.TrackConditions.General.TCDisplay.Announcements</Action></Actions>
</RuleCondition><RuleCondition
 Implemented="TRUE"
 Name="NonStoppingArea"
 Guid="3096ef95-664d-4e3f-9bfa-a86c05c0ea80"
>
<Comment>Non stopping area announcement</Comment>
<PreConditions>
<PreCondition
 Guid="5bd5c76a-c6eb-47ce-bba1-cdba35115828"
>TCType == Messages.M_TRACKCOND.Non_stopping_area___tunnel__Initial_state__stopping_permitted</PreCondition></PreConditions>
<Actions>
<Action
 Guid="46f0625a-6ab1-4ce8-ade6-9c33ba9da756"
>INSERT Kernel.TrackDescription.TrackConditions.General.TCDisplay.NewAnnouncement(
    TCType=&gt;Kernel.TrackDescription.TrackConditions.General.TCDisplay.TCTypeEnum.NonStoppingArea,
    Distance=&gt;Kernel.TrackDescription.TrackConditions.General.TCDisplay.AnnouncementLocation(TrackCondition =&gt; Kernel.TrackDescription.TrackConditions.General.TrackConditionStruct{NonStoppingArea =&gt; True}, Distance =&gt; Distance),
    Length=&gt;BaseTypes.DistanceToLength(Distance - Kernel.TrackDescription.TrackConditions.General.TCDisplay.AnnouncementLocation(TrackCondition =&gt; Kernel.TrackDescription.TrackConditions.General.TrackConditionStruct{NonStoppingArea =&gt; True}, Distance =&gt; Distance)),
    Announcement =&gt; True
)
IN Kernel.TrackDescription.TrackConditions.General.TCDisplay.Announcements</Action></Actions>
</RuleCondition><RuleCondition
 Implemented="TRUE"
 Name="Regenerative brake inhibition"
 Guid="121dd115-40eb-45e1-9135-07222919b127"
>
<Comment>Inhibition of regenerative brake announcement</Comment>
<PreConditions>
<PreCondition
 Guid="4dc26b8a-a7e2-42a1-8204-bd59482d1fe8"
>TCType == Messages.M_TRACKCOND.Switch_off_regenerative_brake__Initial_state__regenerative_brake_on</PreCondition></PreConditions>
<Actions>
<Action
 Guid="912d4674-e6c2-469b-9e78-fc95e2754131"
>INSERT Kernel.TrackDescription.TrackConditions.General.TCDisplay.NewAnnouncement(
    TCType=&gt;Kernel.TrackDescription.TrackConditions.General.TCDisplay.TCTypeEnum.RegenerativeBrake,
    Distance=&gt;Kernel.TrackDescription.TrackConditions.General.TCDisplay.AnnouncementLocation(TrackCondition =&gt; Kernel.TrackDescription.TrackConditions.General.TrackConditionStruct{SwitchOffRegenerativeBrake =&gt; True}, Distance =&gt; Distance),
    Length=&gt;BaseTypes.DistanceToLength(Distance - Kernel.TrackDescription.TrackConditions.General.TCDisplay.AnnouncementLocation(TrackCondition =&gt; Kernel.TrackDescription.TrackConditions.General.TrackConditionStruct{SwitchOffRegenerativeBrake =&gt; True}, Distance =&gt; Distance)),
    Announcement =&gt; True
)
IN Kernel.TrackDescription.TrackConditions.General.TCDisplay.Announcements</Action></Actions>
</RuleCondition><RuleCondition
 Implemented="TRUE"
 Name="Tunnel stopping area"
 Guid="78897ba3-ce37-42c3-918e-60efcec433c7"
>
<Comment>Tunnel stopping area announcement</Comment>
<PreConditions>
<PreCondition
 Guid="1ef8cf9f-b365-4544-8bf2-d1e65cb9a6f2"
>TCType == Messages.M_TRACKCOND.Tunnel_stopping_area__Initial_state__no_tunnel_stopping_area</PreCondition></PreConditions>
<Actions>
<Action
 Guid="8ac4a9fa-54bc-40b3-99d1-a7675c9cf70f"
>INSERT Kernel.TrackDescription.TrackConditions.General.TCDisplay.NewAnnouncement(
    TCType=&gt;Kernel.TrackDescription.TrackConditions.General.TCDisplay.TCTypeEnum.TunnelStoppingArea,
    Distance=&gt;Kernel.TrackDescription.TrackConditions.General.TCDisplay.AnnouncementLocation(Distance=&gt;Distance, TrackCondition=&gt;Kernel.TrackDescription.TrackConditions.General.TrackConditionStruct{TunnelStoppingArea =&gt; True}),
    Length=&gt; BaseTypes.DistanceToLength(Distance - Kernel.TrackDescription.TrackConditions.General.TCDisplay.AnnouncementLocation(Distance=&gt;Distance, TrackCondition=&gt;Kernel.TrackDescription.TrackConditions.General.TrackConditionStruct{TunnelStoppingArea =&gt; True})),
    Announcement =&gt; True
)
IN Kernel.TrackDescription.TrackConditions.General.TCDisplay.Announcements</Action></Actions>
</RuleCondition><RuleCondition
 Implemented="TRUE"
 Name="Turn off main power"
 Guid="bdfca02c-5caa-4f5f-870c-18353f05bb10"
>
<Comment>Turn off main power switch announcement</Comment>
<PreConditions>
<PreCondition
 Guid="6d3e6e73-0af5-4783-ae3c-4e7d8c363a19"
>TCType == Messages.M_TRACKCOND.Powerless_section___switch_off_the_main_power_switch__Initial_state__not_powerless_section</PreCondition></PreConditions>
<Actions>
<Action
 Guid="d67a9eaf-803f-41e3-8dd8-09bdc24c02ad"
>INSERT Kernel.TrackDescription.TrackConditions.General.TCDisplay.NewAnnouncement(
    TCType=&gt;Kernel.TrackDescription.TrackConditions.General.TCDisplay.TCTypeEnum.TurnOffMainSwitch,
    Distance=&gt;Kernel.TrackDescription.TrackConditions.General.TCDisplay.AnnouncementLocation(TrackCondition =&gt; Kernel.TrackDescription.TrackConditions.General.TrackConditionStruct{PowerlessSection_SwitchOffTheMainPowerSwitch =&gt; True}, Distance =&gt; Distance),
    Length=&gt;BaseTypes.DistanceToLength(Distance - Kernel.TrackDescription.TrackConditions.General.TCDisplay.AnnouncementLocation(TrackCondition =&gt; Kernel.TrackDescription.TrackConditions.General.TrackConditionStruct{PowerlessSection_SwitchOffTheMainPowerSwitch =&gt; True}, Distance =&gt; Distance)),
    Announcement =&gt; True
)
IN Kernel.TrackDescription.TrackConditions.General.TCDisplay.Announcements</Action></Actions>
</RuleCondition></Conditions>
</Rule><Rule
 Priority="Processing"
 Implemented="TRUE"
 Name="During the TC"
 Guid="bb7c8b87-7aa4-4b60-a7e3-4a9ebb919e9e"
>
<Comment>Make new start of track condition announcement</Comment>
<SubRules></SubRules>
<Conditions>
<RuleCondition
 Implemented="TRUE"
 Name="Air tightness"
 Guid="59a9c79c-3778-4a12-a091-941c524518ed"
>
<Comment>Close air intake for air conditioning track condition</Comment>
<PreConditions>
<PreCondition
 Guid="9293e873-ddb8-48c2-a3af-fbf8b311813a"
>TCType == Messages.M_TRACKCOND.Air_tightness__Initial_state__no_request_for_air_tightness</PreCondition></PreConditions>
<Actions>
<Action
 Guid="d338542a-7ae0-47f1-9a0a-a8c1d3d53b35"
>INSERT Kernel.TrackDescription.TrackConditions.General.TCDisplay.NewAnnouncement(
    TCType=&gt;Kernel.TrackDescription.TrackConditions.General.TCDisplay.TCTypeEnum.AirTightness,
    Distance=&gt; Distance,
    Length=&gt;Length + TrainData.TrainData.Value.TrainLength,
    Announcement =&gt; False
)
IN Kernel.TrackDescription.TrackConditions.General.TCDisplay.Announcements</Action></Actions>
</RuleCondition><RuleCondition
 Implemented="TRUE"
 Name="Eddy current brake for EB inhibited"
 Guid="e8d52288-ee3b-48ea-96c8-81356cc3445c"
>
<Comment>Inhibition of eddy current brake for the emergency brake track condition</Comment>
<PreConditions>
<PreCondition
 Guid="90fe3a4a-0beb-4582-b244-247f0915cebe"
>TCType == Messages.M_TRACKCOND.Switch_off_eddy_current_brake_for_emergency_brake__Initial_state__eddy_current_brake_for_emergency_brake_on</PreCondition></PreConditions>
<Actions>
<Action
 Guid="038c8fc1-c228-4ec1-8bff-6ad8529d7100"
>INSERT Kernel.TrackDescription.TrackConditions.General.TCDisplay.NewAnnouncement(
    TCType=&gt;Kernel.TrackDescription.TrackConditions.General.TCDisplay.TCTypeEnum.EddyCurrentBrakeForEB,
    Distance=&gt; Distance,
    Length=&gt;Length + TrainData.TrainData.Value.TrainLength,
    Announcement =&gt; False
)
IN Kernel.TrackDescription.TrackConditions.General.TCDisplay.Announcements</Action></Actions>
</RuleCondition><RuleCondition
 Implemented="TRUE"
 Name="Eddy current brake for SB inhibited"
 Guid="ce66c32a-cd45-4063-b0d2-ce900d77b715"
>
<Comment>Inhibition of eddy current brake for the service brake track condition</Comment>
<PreConditions>
<PreCondition
 Guid="e9e124d2-0181-441a-8573-1b1a75f3320d"
>TCType == Messages.M_TRACKCOND.Switch_off_eddy_current_brake_for_service_brake__Initial_state__eddy_current_brake_for_service_brake_on</PreCondition></PreConditions>
<Actions>
<Action
 Guid="7a46b91d-9f75-4be7-b9c4-3752def292e3"
>INSERT Kernel.TrackDescription.TrackConditions.General.TCDisplay.NewAnnouncement(
    TCType=&gt;Kernel.TrackDescription.TrackConditions.General.TCDisplay.TCTypeEnum.EddyCurrentBrakeForSB,
    Distance=&gt; Distance,
    Length=&gt;Length + TrainData.TrainData.Value.TrainLength,
    Announcement =&gt; False
)
IN Kernel.TrackDescription.TrackConditions.General.TCDisplay.Announcements</Action></Actions>
</RuleCondition><RuleCondition
 Implemented="TRUE"
 Name="Lower pantograph"
 Guid="9d91b4eb-fde7-439f-8071-3d36e6051f14"
>
<Comment>Lower pantograph track condition</Comment>
<PreConditions>
<PreCondition
 Guid="c6e5ebb8-ab6b-4086-bda9-48cf326cddfc"
>TCType == Messages.M_TRACKCOND.Powerless_section___lower_pantograph__Initial_state__not_powerless_section</PreCondition></PreConditions>
<Actions>
<Action
 Guid="24102fe1-9b3e-4a7e-b259-59131134abaf"
>INSERT Kernel.TrackDescription.TrackConditions.General.TCDisplay.NewAnnouncement(
    TCType=&gt;Kernel.TrackDescription.TrackConditions.General.TCDisplay.TCTypeEnum.LowerPantograph,
    Distance=&gt; Distance,
    Length=&gt;Length,
    Announcement =&gt; False
)
IN Kernel.TrackDescription.TrackConditions.General.TCDisplay.Announcements</Action></Actions>
</RuleCondition><RuleCondition
 Implemented="TRUE"
 Name="Magnetic shoe brake inhibition"
 Guid="9b6876fa-e0b3-4757-a8aa-4f4bdba6dcf6"
>
<Comment>Inhibition of magnetic shoe brake track condition</Comment>
<PreConditions>
<PreCondition
 Guid="75316fb8-355f-45a4-b78e-7b0f635e5a37"
>TCType == Messages.M_TRACKCOND.Switch_off_magnetic_shoe_brake__Initial_state__magnetic_shoe_brake_on</PreCondition></PreConditions>
<Actions>
<Action
 Guid="ef4fccec-3811-4ce3-9da3-1b46e98f5d92"
>INSERT Kernel.TrackDescription.TrackConditions.General.TCDisplay.NewAnnouncement(
    TCType=&gt;Kernel.TrackDescription.TrackConditions.General.TCDisplay.TCTypeEnum.MagneticShoeBrake,
    Distance=&gt; Distance,
    Length=&gt;Length + TrainData.TrainData.Value.TrainLength,
    Announcement =&gt; False
)
IN Kernel.TrackDescription.TrackConditions.General.TCDisplay.Announcements</Action></Actions>
</RuleCondition><RuleCondition
 Implemented="TRUE"
 Name="NonStoppingArea"
 Guid="8c974909-04fa-42aa-bb79-2f8e3e3e9655"
>
<Comment>Non stopping area track condition</Comment>
<PreConditions>
<PreCondition
 Guid="925b3c53-c6df-4478-a185-03e028ca46ca"
>TCType == Messages.M_TRACKCOND.Non_stopping_area___tunnel__Initial_state__stopping_permitted</PreCondition></PreConditions>
<Actions>
<Action
 Guid="66fa938d-0c1d-4ee2-a3ed-61c81a682de0"
>INSERT Kernel.TrackDescription.TrackConditions.General.TCDisplay.NewAnnouncement(
    TCType =&gt; Kernel.TrackDescription.TrackConditions.General.TCDisplay.TCTypeEnum.NonStoppingArea,
    Distance =&gt; Distance,
    Length =&gt; Length + TrainData.TrainData.Value.TrainLength,
    Announcement =&gt; False
)
IN Kernel.TrackDescription.TrackConditions.General.TCDisplay.Announcements</Action></Actions>
</RuleCondition><RuleCondition
 Implemented="TRUE"
 Name="Regenerative brake inhibition"
 Guid="e12a2054-5abf-4219-8a8f-d7b6b3611b7b"
>
<Comment>Inhibition of regenerative brake track condition</Comment>
<PreConditions>
<PreCondition
 Guid="27849f33-3b86-45bd-bdd1-e191ebf6df76"
>TCType == Messages.M_TRACKCOND.Switch_off_regenerative_brake__Initial_state__regenerative_brake_on</PreCondition></PreConditions>
<Actions>
<Action
 Guid="2f0ac3ce-3f7a-4a07-be3f-b0603300e1cd"
>INSERT Kernel.TrackDescription.TrackConditions.General.TCDisplay.NewAnnouncement(
    TCType=&gt;Kernel.TrackDescription.TrackConditions.General.TCDisplay.TCTypeEnum.NonStoppingArea,
    Distance=&gt; Distance,
    Length=&gt;Length + TrainData.TrainData.Value.TrainLength,
    Announcement =&gt; False
)
IN Kernel.TrackDescription.TrackConditions.General.TCDisplay.Announcements</Action></Actions>
</RuleCondition><RuleCondition
 Implemented="TRUE"
 Name="Sound horn"
 Guid="aae11a69-e3f5-4a38-bd6d-76f15d875aa2"
>
<Comment>Sound horn track condition</Comment>
<PreConditions>
<PreCondition
 Guid="85dfa7ee-270d-491f-93fa-94330dbf5ddf"
>TCType == Messages.M_TRACKCOND.Sound_horn__Initial_state__no_request_for_sound_horn</PreCondition></PreConditions>
<Actions>
<Action
 Guid="29a7d128-8f8d-4279-8062-ee877dbe399f"
>INSERT Kernel.TrackDescription.TrackConditions.General.TCDisplay.NewAnnouncement(
    TCType=&gt;Kernel.TrackDescription.TrackConditions.General.TCDisplay.TCTypeEnum.SoundHorn,
    Distance=&gt;Kernel.TrackDescription.TrackConditions.General.TCDisplay.AnnouncementLocation(TrackCondition =&gt; Kernel.TrackDescription.TrackConditions.General.TrackConditionStruct{SoundHorn =&gt; True}, Distance =&gt; Distance),
    Length=&gt;BaseTypes.DistanceToLength(Distance - Kernel.TrackDescription.TrackConditions.General.TCDisplay.AnnouncementLocation(TrackCondition =&gt; Kernel.TrackDescription.TrackConditions.General.TrackConditionStruct{SoundHorn =&gt; True}, Distance =&gt; Distance)) + Length,
    Announcement =&gt; False
)
IN Kernel.TrackDescription.TrackConditions.General.TCDisplay.Announcements</Action></Actions>
</RuleCondition><RuleCondition
 Implemented="TRUE"
 Name="Tunnel stopping area"
 Guid="73d38ecf-84b0-41f7-8834-32b811d7f227"
>
<Comment>Tunnel stopping area track condition</Comment>
<PreConditions>
<PreCondition
 Guid="50ef7040-2ca5-44bb-90d2-65180a71485d"
>TCType == Messages.M_TRACKCOND.Tunnel_stopping_area__Initial_state__no_tunnel_stopping_area</PreCondition></PreConditions>
<Actions>
<Action
 Guid="f2ce3e39-ba2f-4091-a282-34ad40517055"
>INSERT Kernel.TrackDescription.TrackConditions.General.TCDisplay.NewAnnouncement(
    TCType =&gt; Kernel.TrackDescription.TrackConditions.General.TCDisplay.TCTypeEnum.TunnelStoppingArea,
    Distance =&gt; Distance,
    Length =&gt; Length,
    Announcement =&gt; False
)
IN Kernel.TrackDescription.TrackConditions.General.TCDisplay.Announcements</Action></Actions>
</RuleCondition><RuleCondition
 Implemented="TRUE"
 Name="Turn off main power"
 Guid="ccef8d89-abac-41f9-a955-821420a11aff"
>
<Comment>Turn off main power switch track condition</Comment>
<PreConditions>
<PreCondition
 Guid="579f27a7-4bd2-4afd-94bf-bb97738d0490"
>TCType == Messages.M_TRACKCOND.Powerless_section___switch_off_the_main_power_switch__Initial_state__not_powerless_section</PreCondition></PreConditions>
<Actions>
<Action
 Guid="d1efdecc-f5ca-409e-9b2d-f28b630d392f"
>INSERT Kernel.TrackDescription.TrackConditions.General.TCDisplay.NewAnnouncement(
    TCType=&gt;Kernel.TrackDescription.TrackConditions.General.TCDisplay.TCTypeEnum.TurnOffMainSwitch,
    Distance=&gt; Distance,
    Length=&gt;Length,
    Announcement =&gt; False
)
IN Kernel.TrackDescription.TrackConditions.General.TCDisplay.Announcements</Action></Actions>
</RuleCondition><RuleCondition
 Implemented="TRUE"
 Name="Radio Hole"
 Guid="9e4b8ce2-975f-4648-9d0f-9270b8c08b82"
>
<Comment>Radio hole track condition</Comment>
<PreConditions>
<PreCondition
 Guid="91c8c656-7304-4ffa-aaf3-e80b97208f89"
>TCType == Messages.M_TRACKCOND.Radio_hole__stop_supervising_T_NVCONTACT___Initial_state__supervise_T_NVCONTACT</PreCondition></PreConditions>
<Actions>
<Action
 Guid="1025b93e-f7b6-4f2e-a619-7ae60a61bb96"
>INSERT Kernel.TrackDescription.TrackConditions.General.TCDisplay.NewAnnouncement(
    TCType=&gt;Kernel.TrackDescription.TrackConditions.General.TCDisplay.TCTypeEnum.RadioHole,
    Distance=&gt; Distance,
    Length=&gt;Length + TrainData.TrainData.Value.TrainLength,
    Announcement =&gt; False
)
IN Kernel.TrackDescription.TrackConditions.General.TCDisplay.Announcements</Action></Actions>
</RuleCondition></Conditions>
</Rule><Rule
 Priority="Processing"
 Implemented="TRUE"
 Name="Announcement after the TC"
 Guid="e464ffc8-4a79-4891-a95b-62a86f23ad23"
>
<Comment>Make new end of track condition announcement</Comment>
<SubRules></SubRules>
<Conditions>
<RuleCondition
 Implemented="TRUE"
 Name="Air tightness"
 Guid="db8a722b-6f89-41a7-8501-7b39456cf412"
>
<Comment>Open air intake for air conditioning</Comment>
<PreConditions>
<PreCondition
 Guid="cc33fa10-8f1e-4f8b-bc70-a667c2e5aac6"
>TCType == Messages.M_TRACKCOND.Air_tightness__Initial_state__no_request_for_air_tightness</PreCondition></PreConditions>
<Actions>
<Action
 Guid="ddc4d325-00e3-48ba-851d-e912e3fd8525"
>INSERT Kernel.TrackDescription.TrackConditions.General.TCDisplay.NewAnnouncement(
    TCType=&gt;Kernel.TrackDescription.TrackConditions.General.TCDisplay.TCTypeEnum.AirTightness,
    Distance=&gt;Distance + BaseTypes.LengthToDistance(Length),
    Length=&gt;BaseTypes.Length.NA,
    Announcement =&gt; True
)
IN Kernel.TrackDescription.TrackConditions.General.TCDisplay.Announcements</Action></Actions>
</RuleCondition><RuleCondition
 Implemented="TRUE"
 Name="Lower pantograph"
 Guid="58b850dc-8c38-4ce6-a31f-ae670c948a02"
>
<Comment>Raise pantograph</Comment>
<PreConditions>
<PreCondition
 Guid="c68d40ee-f5a4-4f8e-ba80-2fc479e333b6"
>TCType == Messages.M_TRACKCOND.Powerless_section___lower_pantograph__Initial_state__not_powerless_section</PreCondition></PreConditions>
<Actions>
<Action
 Guid="9dfb5fcc-fb6f-48fa-88d8-65cdd277f680"
>INSERT Kernel.TrackDescription.TrackConditions.General.TCDisplay.NewAnnouncement(
    TCType=&gt;Kernel.TrackDescription.TrackConditions.General.TCDisplay.TCTypeEnum.LowerPantograph,
    Distance=&gt;Distance + BaseTypes.LengthToDistance(Length),
    Length=&gt;BaseTypes.Length.NA,
    Announcement =&gt; True
)
IN Kernel.TrackDescription.TrackConditions.General.TCDisplay.Announcements</Action></Actions>
</RuleCondition><RuleCondition
 Implemented="TRUE"
 Name="Turn off main power"
 Guid="5c6b105e-f22d-44ef-bacb-40a10c83e0c1"
>
<Comment>Turn main power switch back on</Comment>
<PreConditions>
<PreCondition
 Guid="8051c6f3-0064-47f9-a1be-683845a5d447"
>TCType == Messages.M_TRACKCOND.Powerless_section___switch_off_the_main_power_switch__Initial_state__not_powerless_section</PreCondition></PreConditions>
<Actions>
<Action
 Guid="e4f845be-fcf3-41ee-b0b6-9042032e5440"
>INSERT Kernel.TrackDescription.TrackConditions.General.TCDisplay.NewAnnouncement(
    TCType=&gt;Kernel.TrackDescription.TrackConditions.General.TCDisplay.TCTypeEnum.TurnOffMainSwitch,
    Distance=&gt;Distance + BaseTypes.LengthToDistance(Length),
    Length=&gt;BaseTypes.Length.NA,
    Announcement =&gt; True
)
IN Kernel.TrackDescription.TrackConditions.General.TCDisplay.Announcements</Action></Actions>
</RuleCondition></Conditions>
</Rule></Rules>
</Procedure><Procedure
 X="510"
 Y="170"
 Width="100"
 Height="50"
 Implemented="TRUE"
 Name="DisplayAnnouncements"
 Guid="32cab1aa-0cfb-4d9a-a272-8ef7bfb6e682"
>
<ReqRef
 Id="a155d204-c214-45ff-a2b4-045e5aa12ba8"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="81cec718-bb45-4fa4-8db7-e9bc17eef5f7"
>
</ReqRef><ReqRef
 Id="46ca4ea8-b495-4b75-8ec7-60ccf9444a55"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="bc29c5be-3b4c-4267-b39e-5e3e359fe981"
>
</ReqRef><ReqRef
 Id="22cbd162-caa0-4e5a-a581-176fc2b4b8bb"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="a90265ed-2d19-4d81-95b3-c39bf5027bd6"
>
</ReqRef><ReqRef
 Id="555c0388-8b13-4052-acc3-48e9e785af1a"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="5c8e690e-57d8-43d5-98f5-43228007c1e8"
>
</ReqRef><ReqRef
 Id="c5c7a634-701c-4959-ae64-0522e9a953bd"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="c567eab5-93c5-48aa-b7cb-167bcb128472"
>
</ReqRef><ReqRef
 Id="76e592ed-ed99-43e7-914d-f61ca2620144"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="3f62289f-62ee-44d6-9d6c-c55ae5360988"
>
</ReqRef><ReqRef
 Id="6cbde49b-37af-4487-8711-54e2b5be1b1a"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="e03ec840-11af-467d-92dc-13ebb7e6b495"
>
</ReqRef><ReqRef
 Id="a8ccc78f-09d7-4eed-b28f-c54108243648"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="f0fea175-c58c-4164-ab87-639fa941d62c"
>
</ReqRef><ReqRef
 Id="37680a2a-2a2a-4293-b7b9-642b8326a938"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="568f804f-1a4f-4123-8bc5-2fb7aa3b2fd7"
>
</ReqRef><ReqRef
 Id="12c337c0-55dd-4a63-ae32-c7fed0a16df9"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="9890ec78-a792-49b7-9136-0694a9ba18ca"
>
</ReqRef><ReqRef
 Id="dd85a59f-1d9f-471f-a5df-61f76a51d906"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="ed28ef5e-5893-4428-855b-419a6da533de"
>
</ReqRef><Comment>Procedure called by both track condition display units in the DMI to display the relevant announcements linked to the track conditions and the active conditions.</Comment>
<Parameters>
<Parameter
 Type="Boolean"
 Name="SoundHornGroup"
 Guid="c98aaa0c-ab08-4a7f-b4e3-427baf990761"
>
</Parameter></Parameters>
<Rules>
<Rule
 Priority="Processing"
 Implemented="TRUE"
 Name="If needed, add end conditions"
 Guid="b1951393-e5a7-4f8e-a3c6-638f94a428a3"
>
<Comment>Announcements at the end of a track condition are displayed for 5 seconds.
When the announcement starts, the end time is set in the announcement so that it is only kept for as long as necessary.</Comment>
<SubRules></SubRules>
<Conditions>
<RuleCondition
 Implemented="TRUE"
 Name="Announcements without end condition have one added"
 Guid="f49ff6a5-5f34-455d-bc3d-d15f37530aa2"
>
<PreConditions>
<PreCondition
 Guid="f4935738-f2f3-4fdb-977e-7936c80c914b"
>THERE_IS X IN Kernel.TrackDescription.TrackConditions.General.TCDisplay.Announcements | Kernel.TrackDescription.TrackConditions.General.TCDisplay.ActiveConditionStart(X) AND (NOT Kernel.TrackDescription.TrackConditions.General.TCDisplay.HasDisplayEnd(X) )</PreCondition></PreConditions>
<Actions>
<Action
 Guid="8d5e8e1f-428e-4bce-9eb3-39280b03398a"
>REPLACE ActiveConditionStart(X) AND (NOT HasDisplayEnd(X) ) IN Announcements BY AnnouncementWithEnd(X)</Action></Actions>
</RuleCondition></Conditions>
</Rule><Rule
 Priority="Processing"
 Implemented="TRUE"
 Name="Send to DMI"
 Guid="dba77a54-d72f-446d-a354-577b3ee4daae"
>
<Comment>After the end conditions are set, display all current active condition  and announcements.</Comment>
<SubRules></SubRules>
<Conditions>
<RuleCondition
 Implemented="TRUE"
 Name="Send to the Sound Horn group of conditions"
 Guid="cb57a1ea-3c7c-4fb4-9ccd-dbd56c78420b"
>
<Comment>Send the Sound Horn conditions to the appropriate unit in the DMI.</Comment>
<PreConditions>
<PreCondition
 Guid="8f0c6ebb-cc92-407d-856d-5ffea04c8548"
>SoundHornGroup</PreCondition></PreConditions>
<Actions>
<Action
 Guid="42ef7935-2c2a-4d34-8f14-d7c3b314e091"
>DMI.MasterDMI().Out_TrackConditionsWithSoundHorn.ActiveConditions &lt;- 
MAP Kernel.TrackDescription.TrackConditions.General.TCDisplay.Announcements | 
   (  Kernel.TrackDescription.TrackConditions.General.TCDisplay.ActiveConditionStart(X)    AND
      NOT Kernel.TrackDescription.TrackConditions.General.TCDisplay.ActiveConditionEnd(X)  AND
      Kernel.TrackDescription.TrackConditions.General.TCDisplay.IsInSoundHornGroup(X.Type)     )
 USING X IN X</Action></Actions>
</RuleCondition><RuleCondition
 Implemented="TRUE"
 Name="Send to the brake inhibition group"
 Guid="91620c07-48cc-4b02-be2b-48eac0ff8281"
>
<Comment>Send the Brake Inhibition conditions to the appropriate unit in the DMI.</Comment>
<PreConditions>
<PreCondition
 Guid="37066042-c672-415e-ad74-fa017475a45f"
>NOT SoundHornGroup</PreCondition></PreConditions>
<Actions>
<Action
 Guid="bf8b0deb-39d7-4303-8dee-db8053b6b76d"
>DMI.MasterDMI().Out_TrackConditionsWithoutSoundHorn.ActiveConditions &lt;- 
MAP Kernel.TrackDescription.TrackConditions.General.TCDisplay.Announcements | 
   (  Kernel.TrackDescription.TrackConditions.General.TCDisplay.ActiveConditionStart(X)    AND
      NOT Kernel.TrackDescription.TrackConditions.General.TCDisplay.ActiveConditionEnd(X)  AND
      NOT Kernel.TrackDescription.TrackConditions.General.TCDisplay.IsInSoundHornGroup(X.Type)     )
 USING X IN X</Action></Actions>
</RuleCondition></Conditions>
</Rule></Rules>
</Procedure><Procedure
 X="510"
 Y="100"
 Width="100"
 Height="50"
 NeedsRequirement="FALSE"
 Name="DisplayPlanning"
 Guid="cc2139b8-73a1-4e17-9478-9aaaa5578046"
>
<Comment>Procedure called by both track condition display units in the DMI to display the relevant planning information linked to the track conditions.</Comment>
<Parameters>
<Parameter
 Type="Boolean"
 Name="SoundHornGroup"
 Guid="2b547f66-398a-47c8-be6c-09202523d72c"
>
</Parameter></Parameters>
<Rules>
<Rule
 Priority="Processing"
 NeedsRequirement="FALSE"
 Name="Display the planning information"
 Guid="9f5d831d-eeb3-4a35-951b-e1c85c59f0b8"
>
<SubRules></SubRules>
<Conditions>
<RuleCondition
 NeedsRequirement="FALSE"
 Name="Sound Horn group"
 Guid="b09777c1-d3f8-4a24-ad9b-151c7eb9209d"
>
<Comment>The track conditions displayed with Sound Horn need a procedure to build up the planning information.</Comment>
<PreConditions>
<PreCondition
 Guid="2908d48e-85c0-4bec-844e-127af02a3893"
>SoundHornGroup</PreCondition></PreConditions>
<Actions>
<Action
 Guid="237f6f4e-9749-4162-8d58-f20b7d426a3a"
>Kernel.TrackDescription.TrackConditions.General.TCDisplay.BuildSoundHornPlanning()</Action></Actions>
</RuleCondition><RuleCondition
 NeedsRequirement="FALSE"
 Name="Brake inhibition group"
 Guid="ac74592e-1049-45fa-bc88-de513848c30d"
>
<Comment>The track conditions in the Brake Inhibition group need to be mapped into the DMI variable.</Comment>
<PreConditions>
<PreCondition
 Guid="92a9328c-5e6d-4f67-9463-9d0f97d86055"
>NOT SoundHornGroup</PreCondition></PreConditions>
<Actions>
<Action
 Guid="0f4cc885-467a-4f68-94e8-d8b9c70e5da7"
>DMI.MasterDMI().Out_TrackConditionsWithoutSoundHorn.PlanningInformation &lt;- MAP Kernel.TrackDescription.TrackConditions.General.TCProfile USING X IN Kernel.TrackDescription.TrackConditions.General.TCDisplay.MapToBrakeInhibition(X)</Action></Actions>
</RuleCondition></Conditions>
</Rule></Rules>
</Procedure><Procedure
 X="510"
 Y="240"
 Width="100"
 Height="50"
 Implemented="TRUE"
 NeedsRequirement="FALSE"
 Name="BuildSoundHornPlanning"
 Guid="26bcc019-0e2e-4c61-986e-97faf9f0e8d2"
>
<Comment>Build the planning information for the Sound Horn group of track conditions in the DMI.CabDeskEnum</Comment>
<Rules>
<Rule
 Priority="Processing"
 Implemented="TRUE"
 NeedsRequirement="FALSE"
 Name="Copy planning information"
 Guid="6b2c3c61-d09c-443c-ac1e-e259b63b7004"
>
<Comment>Copy the planning information in the Kernel to the DMI.CabDeskEnum</Comment>
<SubRules></SubRules>
<Conditions>
<RuleCondition
 Implemented="TRUE"
 NeedsRequirement="FALSE"
 Name="Copy planning information"
 Guid="9ccbb4b5-a27c-4e62-b5d0-a3ab608709c8"
>
<PreConditions>
</PreConditions>
<Actions>
<Action
 Guid="46263066-dc1b-4fda-bdd8-b73b39f41c6e"
>DMI.MasterDMI().Out_TrackConditionsWithSoundHorn.PlanningInformation &lt;- MAP Kernel.TrackDescription.TrackConditions.General.TCProfile USING X IN Kernel.TrackDescription.TrackConditions.General.TCDisplay.MapToSoundHorn(X)</Action></Actions>
</RuleCondition></Conditions>
</Rule><Rule
 Priority="Processing"
 Implemented="TRUE"
 Name="Remove Non Stopping Area, if needed"
 Guid="fe6fa67a-e50c-4c6e-b8a5-11e94b18aaf4"
>
<ReqRef
 Id="a155d204-c214-45ff-a2b4-045e5aa12ba8"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="0b5af570-5387-4b94-b998-e4fb4d9800a9"
>
</ReqRef><ReqRef
 Id="46ca4ea8-b495-4b75-8ec7-60ccf9444a55"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="0ef42c5e-a05d-441a-9279-13b2344f7a2d"
>
</ReqRef><ReqRef
 Id="22cbd162-caa0-4e5a-a581-176fc2b4b8bb"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="9ce27792-d407-4fff-a4fc-11a80d7236f6"
>
</ReqRef><ReqRef
 Id="555c0388-8b13-4052-acc3-48e9e785af1a"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="5547e24a-6e25-49f6-9c94-457ea65d2da8"
>
</ReqRef><Comment>If the train is currently in a Non Stopping Area but could not stop before reaching the end of it, not information relating to the Non Stopping Area is displayed.</Comment>
<SubRules></SubRules>
<Conditions>
<RuleCondition
 Implemented="TRUE"
 Name="Remove Non Stopping Area, if needed"
 Guid="2a601d02-854c-4ab3-9656-5e047473e512"
>
<Comment>The &quot;REPLACE True&quot; in the Action means that all point must be replaced</Comment>
<PreConditions>
<PreCondition
 Guid="02d481b9-61f5-4563-9b18-590b08311be3"
>THERE_IS X IN Kernel.TrackDescription.TrackConditions.General.TCDisplay.Announcements | 
 X.Type == Kernel.TrackDescription.TrackConditions.General.TCDisplay.TCTypeEnum.NonStoppingArea
  AND   
 NOT X.IsAnnouncement
  AND  
 Kernel.TrackDescription.TrackConditions.General.TCDisplay.ActiveConditionEnd(X)</PreCondition></PreConditions>
<Actions>
<Action
 Guid="67d6db02-01b1-421c-aa9d-9d20f818697e"
>REPLACE True IN DMI.MasterDMI().Out_TrackConditionsWithSoundHorn.PlanningInformation BY Kernel.TrackDescription.TrackConditions.General.TCDisplay.HideTCInformation(
         Distance =&gt; EndOfTC(TCTypeEnum.NonStoppingArea),
         ProfilePoint =&gt; X,
         TCType =&gt; Kernel.TrackDescription.TrackConditions.General.TCDisplay.TCTypeEnum.NonStoppingArea )</Action></Actions>
</RuleCondition></Conditions>
</Rule><Rule
 Priority="Processing"
 Implemented="TRUE"
 Name="Remove Tunnel Stopping Area, if needed"
 Guid="f6406a0a-4892-4baf-a037-dc70ef6d6170"
>
<ReqRef
 Id="3c13572d-5841-4b36-8f01-b73857688c4b"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="11f0dc28-4c02-4193-a2cf-bd39d069a6ce"
>
</ReqRef><ReqRef
 Id="280a63e0-22df-4f00-8510-44fdf99aa05f"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="1cf4a0ec-97e8-48ae-893b-dee272a1c117"
>
</ReqRef><ReqRef
 Id="ac29655f-87cc-4309-b3bc-4d0736a743ad"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="8f3a4662-6cb8-491a-bb69-2abfbc8a0153"
>
</ReqRef><Comment>If the train is currently in a Tunnel Stopping Area but could not stop before reaching the end of it, not information relating to the Tunnel Stopping Area is displayed.</Comment>
<SubRules></SubRules>
<Conditions>
<RuleCondition
 Implemented="TRUE"
 Name="Remove Tunnel Stopping Area, if needed"
 Guid="aa7fb2dc-e7c9-4c3b-b7ce-e2ae4689ff9a"
>
<PreConditions>
<PreCondition
 Guid="ff73c734-79a8-47bf-852e-9feffb5adefd"
>THERE_IS X IN Kernel.TrackDescription.TrackConditions.General.TCDisplay.Announcements | 
 X.Type == Kernel.TrackDescription.TrackConditions.General.TCDisplay.TCTypeEnum.TunnelStoppingArea
  AND   
 NOT X.IsAnnouncement
  AND  
 Kernel.TrackDescription.TrackConditions.General.TCDisplay.ActiveConditionEnd(X)</PreCondition></PreConditions>
<Actions>
<Action
 Guid="4f47ab8b-3f30-44cd-a8e8-451de8b7e7fe"
>REPLACE True IN DMI.MasterDMI().Out_TrackConditionsWithSoundHorn.PlanningInformation BY Kernel.TrackDescription.TrackConditions.General.TCDisplay.HideTCInformation(
         Distance =&gt; EndOfTC(TCTypeEnum.TunnelStoppingArea),
         ProfilePoint =&gt; X,
         TCType =&gt; Kernel.TrackDescription.TrackConditions.General.TCDisplay.TCTypeEnum.TunnelStoppingArea )</Action></Actions>
</RuleCondition></Conditions>
</Rule><Rule
 Priority="Processing"
 Implemented="TRUE"
 NeedsRequirement="FALSE"
 Name="Add Change Of Traction System"
 Guid="7a29ab68-9e9a-4a87-9af8-8c2df6b37e6f"
>
<ReqRef
 Id="6dae5e9c-2f5e-4dd2-89ec-096e89a76644"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="8ecc80c7-eb9b-4602-ab1f-ec42f15b78e3"
>
</ReqRef><Comment>Add the changes of traction system to the planning information</Comment>
<SubRules></SubRules>
<Conditions>
<RuleCondition
 Implemented="TRUE"
 NeedsRequirement="FALSE"
 Name="Add Change Of Traction System"
 Guid="0acde47e-04cb-4575-8b64-39e1635079f8"
>
<PreConditions>
</PreConditions>
<Actions>
<Action
 Guid="8b2668e7-093c-4637-9959-cc11653a9c03"
>APPLY

  INSERT Kernel.TrackDescription.TrackConditions.TractionSystems.MapToSoundHorn(X) 
   IN DMI.MasterDMI().Out_TrackConditionsWithSoundHorn.PlanningInformation

ON Kernel.TrackDescription.TrackConditions.TractionSystems.TCTractionSystems</Action></Actions>
</RuleCondition></Conditions>
</Rule></Rules>
</Procedure></Procedures>
<Variables>
<Variable
 Type="TCAnnouncementCol"
 DefaultValue="[]"
 VariableMode="Internal"
 X="30"
 Y="20"
 Width="100"
 Height="50"
 Implemented="TRUE"
 Name="Announcements"
 Guid="6fc7bd4f-eb71-4e1a-85e6-deb728a602ed"
>
<ReqRef
 Id="3c13572d-5841-4b36-8f01-b73857688c4b"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="0536a3bb-920a-4187-a6db-23ba703423d9"
>
</ReqRef><Comment>List containing announcements for all the upcoming track conditions</Comment>
</Variable><Variable
 Type="BaseTypes.Time"
 DefaultValue="5.0"
 VariableMode="Internal"
 X="30"
 Y="100"
 Width="100"
 Height="50"
 Implemented="TRUE"
 Name="TimeToKeepAnnouncementsInRear"
 Guid="c125b9c1-22e6-400f-82bb-e8aabed65601"
>
<ReqRef
 Id="10983fc8-b583-4843-84ff-07a943d53256"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="1586212b-499e-411f-9b1b-77a41d8a3a4e"
>
</ReqRef><ReqRef
 Id="35fce87d-1120-47fb-8478-e9057dbcda67"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="bd4dcd63-91a9-4bc5-983b-1b921d8c3b29"
>
</ReqRef><ReqRef
 Id="96e826e2-9907-4faa-a010-bae190ca3e11"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="4ffb297f-9643-4fd3-96aa-1c2c8bd75ae7"
>
</ReqRef><ReqRef
 Id="68413353-2dd0-4dd6-ba33-b1b4afb1c586"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="a9b01e2e-45ba-41e9-810b-11223c94103b"
>
</ReqRef><ReqRef
 Id="02fc4b04-89a4-4fac-b594-da0bd5d3d31b"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="4aa5a015-e426-4432-a7bb-c60372a54a45"
>
</ReqRef></Variable></Variables>
<Rules>
<Rule
 Priority="CleanUp"
 X="350"
 Y="290"
 Width="100"
 Height="50"
 Implemented="TRUE"
 Name="Remove passed Announcements"
 Guid="58dd4d7e-0d30-4d5b-ad53-8c4faef0f291"
>
<ReqRef
 Id="7ff9da00-1e5b-46f1-b270-f5f14d810fd9"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="e0102d8b-68c8-44d0-b295-fa493fc5216b"
>
</ReqRef><ReqRef
 Id="68413353-2dd0-4dd6-ba33-b1b4afb1c586"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="a01aa6e1-ddbd-4a65-9f29-f4d1058d1a2e"
>
</ReqRef><ReqRef
 Id="2aea8a30-ac5d-4fd5-baa8-d160b7b48ee7"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="278304d5-f03a-4cd6-b0ae-4c3b5a853954"
>
</ReqRef><ReqRef
 Id="96e826e2-9907-4faa-a010-bae190ca3e11"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="10ccba0e-eccc-4879-a93f-879f7f008a02"
>
</ReqRef><ReqRef
 Id="3622dce7-f18b-4dc7-8539-e2f01da0803b"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="6a837d16-f354-4dd7-b656-5a4bab2bc52b"
>
</ReqRef><ReqRef
 Id="b68f5cf2-721d-45e0-bb47-eebf53ac6cfb"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="bf1d8ab0-5594-4bdb-861d-1054e9fd8e0e"
>
</ReqRef><ReqRef
 Id="35fce87d-1120-47fb-8478-e9057dbcda67"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="efc284a6-ee52-4758-bbac-832540ac0032"
>
</ReqRef><ReqRef
 Id="44386e14-f70e-4a34-ae1a-c1ebbc2ca149"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="12abe94f-979e-440d-af45-d690c4409f88"
>
</ReqRef><ReqRef
 Id="a42d1ba3-faa3-4d96-9ea1-a86b6415e23d"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="11772f9b-f086-4dc2-98c2-1264fd0b581f"
>
</ReqRef><Comment>Deletes the announcements from the list that could not be displayed again (when the train has passed the end of the section)</Comment>
<SubRules></SubRules>
<Conditions>
<RuleCondition
 Implemented="TRUE"
 Name="Delete announcements that are no longer relevant"
 Guid="595e6ec6-ded9-4549-aaba-e6d6e4aa8461"
>
<PreConditions>
</PreConditions>
<Actions>
<Action
 Guid="4b87bbab-6d17-4ca9-b6c8-10fa403b29d1"
>REMOVE ALL AnnouncementNoLongerRelevant(X) IN Announcements</Action></Actions>
</RuleCondition></Conditions>
</Rule></Rules>
</NameSpace>
