<NameSpace
 X="180"
 Y="60"
 Width="100"
 Height="6200"
 Name="Kernel"
>
<NameSpaces>
<NameSpaceRef
 Name="ConfidenceInterval"
>
</NameSpaceRef><NameSpaceRef
 Name="MA"
>
</NameSpaceRef><NameSpaceRef
 Name="NationalValues"
>
</NameSpaceRef><NameSpaceRef
 Name="TrainData"
>
</NameSpaceRef><NameSpaceRef
 Name="LX"
>
</NameSpaceRef><NameSpaceRef
 Name="SpeedAndDistanceMonitoring"
>
</NameSpaceRef><NameSpaceRef
 Name="TSR"
>
</NameSpaceRef><NameSpaceRef
 Name="MRSP"
>
</NameSpaceRef><NameSpaceRef
 Name="TrainPosition"
>
</NameSpaceRef><NameSpaceRef
 Name="ModeTransitions"
>
</NameSpaceRef><NameSpaceRef
 Name="Infill"
>
</NameSpaceRef><NameSpaceRef
 Name="HandlingOfAcceptedAndStoredInformation"
>
</NameSpaceRef><NameSpaceRef
 Name="SR"
>
</NameSpaceRef><NameSpaceRef
 Name="ModeRelatedSpeedLimits"
>
</NameSpaceRef><NameSpaceRef
 Name="Shunting"
>
</NameSpaceRef><NameSpaceRef
 Name="TrackDescription"
>
</NameSpaceRef><NameSpaceRef
 Name="AcceptInformation"
>
</NameSpaceRef><NameSpaceRef
 Name="LevelTransition"
>
</NameSpaceRef></NameSpaces>
<Enumerations>
<Enum
 Default="SupervisionStatus.Normal"
 Implemented="TRUE"
 Name="SupervisionStatus"
>
<ReqRef
 Id="b8bd12fa-1398-4b7e-82b5-d9fea4894091"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
>
<Comment></Comment>
</ReqRef><ReqRef
 Id="10645ba3-8d86-41ad-9956-71f5be85b4c1"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
>
</ReqRef><Comment>The status of speed and distance monitoring supervision.</Comment>
<Values>
<EnumValue
 Value="0"
 Name="Normal"
>
</EnumValue><EnumValue
 Value="0"
 Name="Indication"
>
</EnumValue><EnumValue
 Value="0"
 Name="Overspeed"
>
</EnumValue><EnumValue
 Value="0"
 Name="Warning"
>
</EnumValue><EnumValue
 Value="0"
 Name="Intervention"
>
</EnumValue></Values>
</Enum><Enum
 Default="BrakeReason.DriverAckTimeOut"
 Implemented="TRUE"
 Name="BrakeReason"
>
<ReqRef
 Id="ce7d1ef1-5c76-4031-a912-dd0416fd0924"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
>
</ReqRef><Values>
<EnumValue
 Value=""
 Name="DriverAckTimeOut"
>
</EnumValue></Values>
</Enum></Enumerations>
<Structures>
<Structure
 Implemented="TRUE"
 Name="DriverId"
>
<ReqRef
 Id="20057b5b-4d7d-471b-8b22-6034d8be03a7"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
>
</ReqRef><Comment></Comment>
<StructureElement
 TypeName="String"
 Default="&apos;Henry&apos;"
 Mode="Internal"
 Implemented="TRUE"
 Name="Value"
>
<Comment>The value of the driver id.</Comment>
</StructureElement><StructureElement
 TypeName="DataState"
 Default="DataState.Unknown"
 Mode="Internal"
 Implemented="TRUE"
 Name="DataState"
>
<ReqRef
 Id="8f27e8d5-aaaf-4ec3-986d-36345986e5f2"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
>
</ReqRef><Comment>The data state of the driver id.</Comment>
</StructureElement></Structure><Structure
 Implemented="TRUE"
 Name="LevelData"
>
<ReqRef
 Id="c64d2c76-dc3a-4e50-b17f-68b3482d0a85"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
>
<Comment></Comment>
</ReqRef><ReqRef
 Id="2bd0d6a5-d918-4308-994a-c1689c4a4e30"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
>
</ReqRef><Comment>Represents the ERTMS/ETCS level of the train.</Comment>
<StructureElement
 TypeName="Level"
 Default="Level.L0"
 Mode="Internal"
 Implemented="TRUE"
 Name="Value"
>
<Comment>The value of the current ERTMS/ETCS level.</Comment>
</StructureElement><StructureElement
 TypeName="DataState"
 Default="DataState.Unknown"
 Mode="Internal"
 Implemented="TRUE"
 Name="DataState"
>
<ReqRef
 Id="8f27e8d5-aaaf-4ec3-986d-36345986e5f2"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
>
<Comment></Comment>
</ReqRef><Comment>The data state of the current ERTMS/ETCS level.</Comment>
</StructureElement></Structure><Structure
 Implemented="TRUE"
 Name="TrainRunningNumber"
>
<ReqRef
 Id="07bfd145-efdd-4512-b930-b761213e0377"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
>
</ReqRef><ReqRef
 Id="dac86bcd-dbc3-4022-866e-6ede3aa58dbd"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
>
</ReqRef><Comment>Represents the train running number.

The bcd notation as required by 7.5.92 is not possible in the model. Hence we stick with a simple string here. As there are no operations performed based on this value, this is uncritical. #morido, 13/10/11</Comment>
<StructureElement
 TypeName="String"
 Default="&apos;&apos;"
 Mode="Internal"
 Implemented="TRUE"
 Name="Value"
>
<Comment>Value of the train running number.</Comment>
</StructureElement><StructureElement
 TypeName="DataState"
 Default="DataState.Unknown"
 Mode="Internal"
 Implemented="TRUE"
 Name="DataState"
>
<ReqRef
 Id="8f27e8d5-aaaf-4ec3-986d-36345986e5f2"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
>
</ReqRef><Comment>Data state of the train running number.</Comment>
</StructureElement></Structure><Structure
 Implemented="TRUE"
 Name="EmergencyStop"
>
<ReqRef
 Id="2b2cca84-5637-4f57-be10-029b36aa0f1a"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
>
</ReqRef><Comment>Represents a received emergency stop (conditional or unconditional).</Comment>
<StructureElement
 TypeName="Boolean"
 Default="Boolean.False"
 Mode="Internal"
 Implemented="TRUE"
 NeedsRequirement="FALSE"
 Name="IsConditional"
>
<Comment>Indicates if this emergency stop is conditional or not.</Comment>
</StructureElement><StructureElement
 TypeName="BrakeReason"
 Default="BrakeReason.DriverAckTimeOut"
 Mode="Internal"
 Implemented="TRUE"
 NeedsRequirement="FALSE"
 Name="Id"
>
<ReqRef
 Id="ce7d1ef1-5c76-4031-a912-dd0416fd0924"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
>
</ReqRef><Comment>The id of the emergency stop.</Comment>
</StructureElement><StructureElement
 TypeName="Default.BaseTypes.Distance"
 Default=""
 Mode="Internal"
 Implemented="TRUE"
 NeedsRequirement="FALSE"
 Name="StopLocation"
>
<Comment>The stop location of this emergency stop.</Comment>
</StructureElement></Structure><Structure
 Implemented="TRUE"
 Name="TrainIntegrity"
>
<ReqRef
 Id="2b2ed08d-1183-4018-b0cc-3b454b2f8c4d"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
>
</ReqRef><Comment>Train integrity information.</Comment>
<StructureElement
 TypeName="Messages.Q_LENGTH"
 Default=""
 Mode="Internal"
 Implemented="TRUE"
 NeedsRequirement="FALSE"
 Name="Status"
>
<ReqRef
 Id="0d7b3630-948f-424b-9a71-0e04aa754bd1"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
>
</ReqRef><Comment>Status of the train integrity information.</Comment>
</StructureElement><StructureElement
 TypeName="Default.BaseTypes.Length"
 Default=""
 Mode="InOut"
 Implemented="TRUE"
 NeedsRequirement="FALSE"
 Name="SafeTrainLength"
>
<ReqRef
 Id="84654558-6cb7-46d9-a984-7fb0aa823724"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
>
</ReqRef><Comment>Safe train length.</Comment>
</StructureElement><StructureElement
 TypeName="Default.DataState"
 Default=""
 Mode="Internal"
 Implemented="TRUE"
 NeedsRequirement="FALSE"
 Name="DataState"
>
<ReqRef
 Id="84654558-6cb7-46d9-a984-7fb0aa823724"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
>
</ReqRef><Comment>Data state of the train integrity information.</Comment>
</StructureElement></Structure><Structure
 Implemented="TRUE"
 Name="OperatedSystemVersion"
>
<ReqRef
 Id="a32b885e-f73e-44f1-9cba-50faee55ee28"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
>
</ReqRef><Comment>Represesnts the version of the ERTMS/ETCS operated system.</Comment>
<StructureElement
 TypeName="Default.DataState"
 Default=""
 Mode="Internal"
 Implemented="TRUE"
 NeedsRequirement="FALSE"
 Name="DataState"
>
<Comment>Data state of the ERTMS/ETCS operated system.</Comment>
</StructureElement><StructureElement
 TypeName="String"
 Default=""
 Mode="Internal"
 Implemented="TRUE"
 NeedsRequirement="FALSE"
 Name="Value"
>
<Comment>Value of the ERTMS/ETCS operated system.</Comment>
</StructureElement></Structure><Structure
 Implemented="TRUE"
 Name="BaliseGroup"
>
<ReqRef
 Id="61faae76-f226-4744-a4a6-06512a75b891"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
>
</ReqRef><StructureElement
 TypeName="Boolean"
 Default="Boolean.False"
 Mode="Internal"
 NeedsRequirement="FALSE"
 Name="NewCountry"
>
</StructureElement><StructureElement
 TypeName="Messages.NID_C"
 Default=""
 Mode="Internal"
 NeedsRequirement="FALSE"
 Name="NID_C"
>
</StructureElement><StructureElement
 TypeName="Messages.NID_BG"
 Default=""
 Mode="Internal"
 NeedsRequirement="FALSE"
 Name="NID_BG"
>
</StructureElement></Structure></Structures>
<Collections>
<Collection
 TypeName="Kernel.EmergencyStop"
 Default="[]"
 Implemented="TRUE"
 Name="EmergencyStops"
>
<ReqRef
 Id="2b2cca84-5637-4f57-be10-029b36aa0f1a"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
>
<Comment></Comment>
</ReqRef><ReqRef
 Id="19082c8b-d1cc-4d23-a9da-8581737a0760"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
>
</ReqRef><Comment>Represents the set of received emergency stops (conditional or unconditional).</Comment>
</Collection><Collection
 TypeName="BaliseGroup"
 MaxSize="20"
 Default="[]"
 Implemented="TRUE"
 Name="BaliseGroups"
>
<ReqRef
 Id="61faae76-f226-4744-a4a6-06512a75b891"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
>
</ReqRef><Comment></Comment>
</Collection></Collections>
<StateMachines>
<StateMachine
 InitialState="NoProcedure"
 NeedsRequirement="FALSE"
 Name="HandleModeChangeSM"
>
<ReqRef
 Id="9b24f0d9-f04e-410d-8c0f-8c2ea840f4c9"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
>
</ReqRef><Comment></Comment>
<States>
<State
 X="30"
 Y="600"
 Width="1020"
 Height="50"
 Name="NoProcedure"
>
<StateMachine
 InitialState=""
 NeedsRequirement="FALSE"
>
<Rules>
<Rule
 Priority="Processing"
 Implemented="TRUE"
 Name="StartOfMission Initiation"
>
<ReqRef
 Id="abbd517e-8b49-43b4-8dfa-117c8988fa86"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
>
</ReqRef><ReqRef
 Id="e989d863-8cfc-455e-a8bb-4bec3452097c"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
>
</ReqRef><ReqRef
 Id="aab5fe51-ccd2-4951-92ec-b9a6a5d04dd3"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
>
</ReqRef><SubRules></SubRules>
<Conditions>
<RuleCondition
 NeedsRequirement="FALSE"
 Name="StartOfMission Initiation"
>
<PreConditions>
<PreCondition>Kernel.Mode == Mode.SB</PreCondition><PreCondition>(DMI.MasterDMI()).DeskOpen == True</PreCondition><PreCondition>EURORADIO.SessionState == SessionState.Closed</PreCondition></PreConditions>
<Actions>
<Action>THIS &lt;- HandleModeChange.StartOfMission</Action><Action>DMI.MasterDMI().DisplayErtmsEtcsMode()</Action></Actions>
</RuleCondition></Conditions>
</Rule><Rule
 Priority="Processing"
 Implemented="TRUE"
 Name="ShuntingInitiatedByDriver Initiation"
>
<ReqRef
 Id="3d01d017-72ad-4ae6-888e-a4e7f0241a33"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
>
</ReqRef><ReqRef
 Id="a7dfd21b-40f7-4ea2-8604-1cb1cf5a2a65"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
>
</ReqRef><SubRules></SubRules>
<Conditions>
<RuleCondition
 Implemented="TRUE"
 Name="Launch ShuntingInitiatedByDriver"
>
<PreConditions>
<PreCondition>Kernel.Mode in [Mode.FS, Mode.LS, Mode.OS, Mode.SR, Mode.SN, Mode.UN]</PreCondition><PreCondition>Odometry.EstimatedSpeed == 0.0</PreCondition><PreCondition>DMI.MasterDMI().In_ShuntingRequest.InputInformation.RequestStatus == Request.Response</PreCondition></PreConditions>
<Actions>
<Action>HandleModeChange &lt;- HandleModeChange.ShuntingInitiatedByDriver</Action></Actions>
</RuleCondition></Conditions>
</Rule></Rules>
</StateMachine></State><State
 X="730"
 Y="160"
 Width="310"
 Height="50"
 NeedsRequirement="FALSE"
 Name="StartOfMission"
>
<ReqRef
 Id="8208d384-8400-46e8-98be-8183f5b72238"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
>
</ReqRef><StateMachine
 InitialState="S0"
 Implemented="TRUE"
 NeedsRequirement="FALSE"
>
<States>
<State
 X="1150"
 Y="50"
 Width="100"
 Height="50"
 NeedsRequirement="FALSE"
 Name="A31"
>
<StateMachine
 InitialState="OpenRBCSession"
 Implemented="TRUE"
 NeedsRequirement="FALSE"
>
<Rules>
<Rule
 Priority="Processing"
 Implemented="TRUE"
 Name="A31"
>
<ReqRef
 Id="0d5816be-e0d4-4b39-8132-11cda5f264fc"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
>
</ReqRef><SubRules></SubRules>
<Conditions>
<RuleCondition
 Implemented="TRUE"
 NeedsRequirement="FALSE"
 Name="Open session with RBC"
>
<ReqRef
 Id="c5b2c3fe-0dae-4997-bf3e-be2b4e554072"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
>
</ReqRef><PreConditions>
</PreConditions>
<Actions>
<Action>EURORADIO.OpenRBCSession()</Action><Action>THIS &lt;- HandleModeChange.StartOfMission.D31</Action></Actions>
</RuleCondition></Conditions>
</Rule></Rules>
</StateMachine></State><State
 X="1400"
 Y="690"
 Width="100"
 Height="50"
 NeedsRequirement="FALSE"
 Name="A39"
>
<StateMachine
 InitialState=""
 Implemented="TRUE"
 NeedsRequirement="FALSE"
>
<Rules>
<Rule
 Priority="Processing"
 Implemented="TRUE"
 Name="A39"
>
<ReqRef
 Id="78724a43-92f8-4ff3-9e8d-7ebf03afa832"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
>
</ReqRef><ReqRef
 Id="ae649b47-cdfc-4223-b13d-4b1efaef612d"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
>
</ReqRef><ReqRef
 Id="aba36681-0247-4508-92d9-1560c959b360"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
>
</ReqRef><SubRules></SubRules>
<Conditions>
<RuleCondition
 Implemented="TRUE"
 NeedsRequirement="FALSE"
 Name="Delete train position data and close the session with the RBC"
>
<PreConditions>
</PreConditions>
<Actions>
<Action>EURORADIO.CloseRBCSession()</Action><Action>Kernel.TrainPosition.Position.DataState &lt;- DataState.Unknown</Action><Action>THIS &lt;- HandleModeChange.StartOfMission.A40</Action></Actions>
</RuleCondition></Conditions>
</Rule></Rules>
</StateMachine></State><State
 X="1150"
 Y="150"
 Width="100"
 Height="50"
 NeedsRequirement="FALSE"
 Name="D31"
>
<StateMachine
 InitialState=""
 Implemented="TRUE"
 NeedsRequirement="FALSE"
>
<Rules>
<Rule
 Priority="Processing"
 Implemented="TRUE"
 Name="D31"
>
<ReqRef
 Id="5f727ae2-223d-4876-bd7a-f73476ce38ed"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
>
</ReqRef><SubRules></SubRules>
<Conditions>
<RuleCondition
 Implemented="TRUE"
 NeedsRequirement="FALSE"
 Name="D31"
>
<PreConditions>
<PreCondition>EURORADIO.RequestOpenRbcSession.RequestState == Request.Response</PreCondition></PreConditions>
<Actions>
<Action>EURORADIO.RequestOpenRbcSession.RequestState &lt;- Request.Disabled</Action><Action>EURORADIO.SessionState &lt;- EURORADIO.RequestOpenRbcSession.SessionState</Action></Actions>
<SubRules>
<Rule
 Priority="Processing"
 Implemented="TRUE"
 Name="Branch based on the session establishment"
>
<SubRules></SubRules>
<Conditions>
<RuleCondition
 Implemented="TRUE"
 NeedsRequirement="FALSE"
 Name="Session established"
>
<ReqRef
 Id="c961b910-b446-49da-a71a-a1e8b2a4719d"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
>
</ReqRef><ReqRef
 Id="bd791945-c05a-4d4d-932c-75ef1341b032"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
>
</ReqRef><PreConditions>
<PreCondition>EURORADIO.RequestOpenRbcSession.SessionState == SessionState.Established</PreCondition></PreConditions>
<Actions>
<Action>THIS &lt;- HandleModeChange.StartOfMission.D32</Action><Action>EURORADIO.CurrentRadioSession.SessionInfo.DataState &lt;- DataState.Valid</Action></Actions>
</RuleCondition><RuleCondition
 Implemented="TRUE"
 NeedsRequirement="FALSE"
 Name="Session establishment failure"
>
<PreConditions>
</PreConditions>
<Actions>
<Action>THIS &lt;- HandleModeChange.StartOfMission.A32</Action></Actions>
</RuleCondition></Conditions>
</Rule></SubRules>
</RuleCondition></Conditions>
</Rule></Rules>
</StateMachine></State><State
 X="1140"
 Y="260"
 Width="100"
 Height="50"
 NeedsRequirement="FALSE"
 Name="D32"
>
<StateMachine
 InitialState=""
 Implemented="TRUE"
 NeedsRequirement="FALSE"
>
<Rules>
<Rule
 Priority="Processing"
 Implemented="TRUE"
 Name="D32"
>
<ReqRef
 Id="c1fbe808-07a9-45cc-aca9-3ad7ce44ca51"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
>
</ReqRef><SubRules></SubRules>
<Conditions>
<RuleCondition
 Implemented="TRUE"
 NeedsRequirement="FALSE"
 Name="D32"
>
<PreConditions>
</PreConditions>
<Actions>
</Actions>
<SubRules>
<Rule
 Priority="Processing"
 Implemented="TRUE"
 Name="Train position data valid"
>
<SubRules></SubRules>
<Conditions>
<RuleCondition
 Implemented="TRUE"
 NeedsRequirement="FALSE"
 Name="Train position data valid"
>
<PreConditions>
<PreCondition>Kernel.TrainPosition.Position.DataState == DataState.Valid</PreCondition></PreConditions>
<Actions>
<Action>THIS &lt;- HandleModeChange.StartOfMission.A33</Action></Actions>
</RuleCondition></Conditions>
</Rule><Rule
 Priority="Processing"
 Implemented="TRUE"
 Name="Train position data invalid"
>
<SubRules></SubRules>
<Conditions>
<RuleCondition
 Implemented="TRUE"
 NeedsRequirement="FALSE"
 Name="Train position data invalid"
>
<PreConditions>
<PreCondition>Kernel.TrainPosition.Position.DataState == DataState.Invalid</PreCondition></PreConditions>
<Actions>
<Action>THIS &lt;- HandleModeChange.StartOfMission.A34</Action></Actions>
</RuleCondition></Conditions>
</Rule></SubRules>
</RuleCondition></Conditions>
</Rule></Rules>
</StateMachine></State><State
 X="10"
 Y="10"
 Width="100"
 Height="50"
 NeedsRequirement="FALSE"
 Name="S0"
>
<StateMachine
 InitialState=""
 Implemented="TRUE"
 NeedsRequirement="FALSE"
>
<Rules>
<Rule
 Priority="Processing"
 Implemented="TRUE"
 Name="S0"
>
<ReqRef
 Id="abbd517e-8b49-43b4-8dfa-117c8988fa86"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
>
</ReqRef><SubRules></SubRules>
<Conditions>
<RuleCondition
 Implemented="TRUE"
 NeedsRequirement="FALSE"
 Name="S0"
>
<PreConditions>
</PreConditions>
<Actions>
<Action>THIS &lt;- HandleModeChange.StartOfMission.S1</Action></Actions>
</RuleCondition></Conditions>
</Rule></Rules>
</StateMachine></State><State
 X="10"
 Y="100"
 Width="100"
 Height="50"
 NeedsRequirement="FALSE"
 Name="S1"
>
<StateMachine
 InitialState="AskDriverId"
 Implemented="TRUE"
 NeedsRequirement="FALSE"
>
<States>
<State
 X="190"
 Y="70"
 Width="150"
 Height="50"
 Implemented="TRUE"
 Name="AskDriverId"
>
<ReqRef
 Id="3dec40a2-4a61-4a9c-9c92-1d115e8e1756"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
>
</ReqRef><ReqRef
 Id="b5adeff5-835f-415a-a6c0-4bdaee8b3cb8"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
>
</ReqRef><StateMachine
 InitialState=""
 Implemented="TRUE"
 NeedsRequirement="FALSE"
>
<Rules>
<Rule
 Priority="Processing"
 Implemented="TRUE"
 NeedsRequirement="FALSE"
 Name="Ask Driver Id and possibly train running number"
>
<SubRules></SubRules>
<Conditions>
<RuleCondition
 Implemented="TRUE"
 NeedsRequirement="FALSE"
 Name="Ask Driver Id and possibly train running number"
>
<PreConditions>
</PreConditions>
<Actions>
<Action>THIS &lt;- HandleModeChange.StartOfMission.S1.DriverIdAsked</Action></Actions>
<SubRules>
<Rule
 Priority="Processing"
 Implemented="TRUE"
 Name="Invalid or Unknown train running number"
>
<ReqRef
 Id="b5adeff5-835f-415a-a6c0-4bdaee8b3cb8"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
>
</ReqRef><SubRules></SubRules>
<Conditions>
<RuleCondition
 Implemented="TRUE"
 NeedsRequirement="FALSE"
 Name="Invalid or Unknown train running number"
>
<PreConditions>
<PreCondition>Kernel.TrainRunningNumber.DataState in [DataState.Invalid, DataState.Unknown]</PreCondition></PreConditions>
<Actions>
</Actions>
<SubRules>
<Rule
 Priority="Processing"
 Implemented="TRUE"
 Name="Unknown train running number"
>
<SubRules></SubRules>
<Conditions>
<RuleCondition
 Implemented="TRUE"
 NeedsRequirement="FALSE"
 Name="Unknown train running number"
>
<PreConditions>
<PreCondition>Kernel.TrainRunningNumber.DataState == DataState.Unknown</PreCondition></PreConditions>
<Actions>
<Action>DMI.MasterDMI().InitiateTrainRunningNumberRequest(
  Number =&gt; Kernel.TrainRunningNumber.Value, 
  Enter =&gt; True, 
  ReValidate =&gt; False
)</Action></Actions>
</RuleCondition></Conditions>
</Rule><Rule
 Priority="Processing"
 Implemented="TRUE"
 Name="Invalid train running number"
>
<SubRules></SubRules>
<Conditions>
<RuleCondition
 Implemented="TRUE"
 NeedsRequirement="FALSE"
 Name="Invalid train running number"
>
<PreConditions>
<PreCondition>Kernel.TrainRunningNumber.DataState == DataState.Invalid</PreCondition></PreConditions>
<Actions>
<Action>DMI.MasterDMI().InitiateTrainRunningNumberRequest(
  Number =&gt; Kernel.TrainRunningNumber.Value, 
  Enter =&gt; True, 
  ReValidate =&gt; True
)</Action></Actions>
</RuleCondition></Conditions>
</Rule></SubRules>
</RuleCondition></Conditions>
</Rule><Rule
 Priority="Processing"
 Implemented="TRUE"
 Name="Invalid or Unknown driver ID"
>
<ReqRef
 Id="3dec40a2-4a61-4a9c-9c92-1d115e8e1756"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
>
</ReqRef><SubRules></SubRules>
<Conditions>
<RuleCondition
 Implemented="TRUE"
 NeedsRequirement="FALSE"
 Name="Invalid or Unknown driver ID"
>
<PreConditions>
<PreCondition>Kernel.DriverId.DataState in [DataState.Invalid, DataState.Unknown]</PreCondition></PreConditions>
<Actions>
</Actions>
<SubRules>
<Rule
 Priority="Processing"
 Implemented="TRUE"
 Name="Invalid driver ID"
>
<SubRules></SubRules>
<Conditions>
<RuleCondition
 Implemented="TRUE"
 NeedsRequirement="FALSE"
 Name="Invalid driver ID"
>
<PreConditions>
<PreCondition>Kernel.DriverId.DataState == DataState.Invalid</PreCondition></PreConditions>
<Actions>
<Action>DMI.MasterDMI().InitiateDriverIdRequest(
  Id =&gt; Kernel.DriverId.Value, 
  Enter =&gt; True, 
  ReValidate =&gt; True
)</Action></Actions>
</RuleCondition></Conditions>
</Rule><Rule
 Priority="Processing"
 Implemented="TRUE"
 Name="Unknown driver ID"
>
<SubRules></SubRules>
<Conditions>
<RuleCondition
 Implemented="TRUE"
 NeedsRequirement="FALSE"
 Name="Unknown driver ID"
>
<PreConditions>
<PreCondition>Kernel.DriverId.DataState == DataState.Unknown</PreCondition></PreConditions>
<Actions>
<Action>DMI.MasterDMI().InitiateDriverIdRequest(
  Id =&gt; Kernel.DriverId.Value, 
  Enter =&gt; True, 
  ReValidate =&gt; False
)</Action></Actions>
</RuleCondition></Conditions>
</Rule></SubRules>
</RuleCondition></Conditions>
</Rule></SubRules>
</RuleCondition></Conditions>
</Rule></Rules>
</StateMachine></State><State
 X="190"
 Y="200"
 Width="150"
 Height="50"
 Implemented="TRUE"
 NeedsRequirement="FALSE"
 Name="DriverIdAsked"
>
<StateMachine
 InitialState=""
 Implemented="TRUE"
 NeedsRequirement="FALSE"
>
<Rules>
<Rule
 Priority="Processing"
 Implemented="TRUE"
 Name="Receive Driver Id"
>
<ReqRef
 Id="fdd34be2-081f-4fd2-81c7-d31750a434b6"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
>
</ReqRef><ReqRef
 Id="4498594e-f543-4aac-a645-51b5961b91b3"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
>
</ReqRef><SubRules></SubRules>
<Conditions>
<RuleCondition
 Implemented="TRUE"
 NeedsRequirement="FALSE"
 Name="Receive Driver Id"
>
<PreConditions>
<PreCondition>DMI.MasterDMI().In_DriverId.InputInformation.RequestStatus == Request.Response</PreCondition></PreConditions>
<Actions>
<Action>Kernel.DriverId.Value &lt;- DMI.MasterDMI().In_DriverId.Id</Action><Action>Kernel.DriverId.DataState &lt;- DataState.Valid</Action><Action>DMI.MasterDMI().In_DriverId.InputInformation.RequestStatus &lt;- Request.Disabled</Action></Actions>
</RuleCondition></Conditions>
</Rule><Rule
 Priority="Processing"
 Implemented="TRUE"
 Name="Receive Train running number"
>
<ReqRef
 Id="ab1d5732-e882-44e5-82c4-b3366adc105e"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
>
</ReqRef><ReqRef
 Id="b603ef8b-509e-4363-8527-cab39ee0f193"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
>
</ReqRef><SubRules></SubRules>
<Conditions>
<RuleCondition
 Implemented="TRUE"
 NeedsRequirement="FALSE"
 Name="Receive Train running number"
>
<PreConditions>
<PreCondition>DMI.MasterDMI().In_TrainRunningNumber.InputInformation.RequestStatus == Request.Response</PreCondition></PreConditions>
<Actions>
<Action>Kernel.TrainRunningNumber.Value &lt;- DMI.MasterDMI().In_TrainRunningNumber.Number</Action><Action>Kernel.TrainRunningNumber.DataState &lt;- DataState.Valid</Action><Action>DMI.MasterDMI().In_TrainRunningNumber.InputInformation.RequestStatus &lt;- Request.Disabled</Action></Actions>
</RuleCondition></Conditions>
</Rule></Rules>
</StateMachine></State></States>
<Rules>
<Rule
 Priority="Processing"
 Implemented="TRUE"
 Name="E1 : Valid ID &amp; Train running number"
>
<ReqRef
 Id="7ef55f6e-2855-44c2-9bf0-ba1f05c5574c"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
>
</ReqRef><SubRules></SubRules>
<Conditions>
<RuleCondition
 Implemented="TRUE"
 NeedsRequirement="FALSE"
 Name="E1 : Valid ID &amp; Train running number"
>
<PreConditions>
<PreCondition>Kernel.DriverId.DataState == DataState.Valid</PreCondition><PreCondition>Kernel.TrainRunningNumber.DataState == DataState.Valid</PreCondition></PreConditions>
<Actions>
<Action>THIS &lt;- HandleModeChange.StartOfMission.D2</Action></Actions>
</RuleCondition></Conditions>
</Rule></Rules>
</StateMachine></State><State
 X="10"
 Y="300"
 Width="100"
 Height="50"
 NeedsRequirement="FALSE"
 Name="S2"
>
<ReqRef
 Id="570f9d96-ff82-4196-84c4-f4622f65c734"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
>
</ReqRef><StateMachine
 InitialState="OfferLevelSelection"
 Implemented="TRUE"
 NeedsRequirement="FALSE"
>
<States>
<State
 X="80"
 Y="310"
 Width="140"
 Height="50"
 Implemented="TRUE"
 Name="LevelSelectionOffered"
>
<ReqRef
 Id="44711e45-24b9-4434-8eef-30cd89f623a4"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
>
</ReqRef><ReqRef
 Id="7c664288-2b36-410e-9dce-05703e002b8e"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
>
</ReqRef><StateMachine
 InitialState=""
 Implemented="TRUE"
 NeedsRequirement="FALSE"
>
<ReqRef
 Id="523a3c43-b684-4928-848b-d441b5baa961"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
>
</ReqRef><ReqRef
 Id="5e931954-f188-4190-90e1-fde9d2d2ee5b"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
>
</ReqRef><Rules>
<Rule
 Priority="Processing"
 Implemented="TRUE"
 Name="Driver has selected a level"
>
<ReqRef
 Id="44711e45-24b9-4434-8eef-30cd89f623a4"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
>
</ReqRef><ReqRef
 Id="7c664288-2b36-410e-9dce-05703e002b8e"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
>
</ReqRef><ReqRef
 Id="35f74cc7-ac90-49d9-bf55-8c7c4445ca05"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
>
</ReqRef><ReqRef
 Id="523a3c43-b684-4928-848b-d441b5baa961"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
>
</ReqRef><SubRules></SubRules>
<Conditions>
<RuleCondition
 Implemented="TRUE"
 NeedsRequirement="FALSE"
 Name="Driver has selected a level"
>
<PreConditions>
<PreCondition>DMI.MasterDMI().In_ErtmsEtcsLevel.InputInformation.RequestStatus == Default.Request.Response</PreCondition></PreConditions>
<Actions>
<Action>THIS &lt;- HandleModeChange.StartOfMission.S2.ExitState</Action><Action>Kernel.Level.DataState &lt;- DataState.Valid</Action><Action>Kernel.Level.Value &lt;- DMI.MasterDMI().In_ErtmsEtcsLevel.Level</Action><Action>DMI.MasterDMI().In_ErtmsEtcsLevel.InputInformation.RequestStatus &lt;- Default.Request.Disabled</Action></Actions>
</RuleCondition></Conditions>
</Rule></Rules>
</StateMachine></State><State
 X="370"
 Y="310"
 Width="140"
 Height="50"
 Implemented="TRUE"
 Name="ExitState"
>
<ReqRef
 Id="1cc13002-553c-49af-a2a8-f528a7778ad8"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
>
</ReqRef><ReqRef
 Id="a4dec848-a075-4e4a-bd28-b22b5228bb83"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
>
</ReqRef><StateMachine
 InitialState=""
 Implemented="TRUE"
 NeedsRequirement="FALSE"
>
<Rules>
<Rule
 Priority="Processing"
 Implemented="TRUE"
 NeedsRequirement="FALSE"
 Name="Exit state"
>
<SubRules></SubRules>
<Conditions>
<RuleCondition
 Implemented="TRUE"
 NeedsRequirement="FALSE"
 Name="Exit state"
>
<PreConditions>
</PreConditions>
<Actions>
</Actions>
<SubRules>
<Rule
 Priority="Processing"
 Implemented="TRUE"
 Name="Level 2 or 3"
>
<ReqRef
 Id="1cc13002-553c-49af-a2a8-f528a7778ad8"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
>
</ReqRef><SubRules></SubRules>
<Conditions>
<RuleCondition
 Implemented="TRUE"
 NeedsRequirement="FALSE"
 Name="Level 2 or 3"
>
<PreConditions>
<PreCondition>Kernel.Level.Value in [Level.L2, Level.L3]</PreCondition></PreConditions>
<Actions>
<Action>THIS &lt;- HandleModeChange.StartOfMission.S3</Action></Actions>
</RuleCondition></Conditions>
</Rule><Rule
 Priority="Processing"
 Implemented="TRUE"
 Name="Level 0, 1 or LNTC"
>
<ReqRef
 Id="a4dec848-a075-4e4a-bd28-b22b5228bb83"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
>
</ReqRef><SubRules></SubRules>
<Conditions>
<RuleCondition
 Implemented="TRUE"
 NeedsRequirement="FALSE"
 Name="Level 0, 1 or LNTC"
>
<PreConditions>
<PreCondition>Kernel.Level.Value in [Level.L0, Level.L1, Level.LNTC]</PreCondition></PreConditions>
<Actions>
<Action>THIS &lt;- HandleModeChange.StartOfMission.S10</Action></Actions>
</RuleCondition></Conditions>
</Rule></SubRules>
</RuleCondition></Conditions>
</Rule></Rules>
</StateMachine></State><State
 X="80"
 Y="60"
 Width="140"
 Height="50"
 Implemented="TRUE"
 Name="OfferLevelSelection"
>
<ReqRef
 Id="44711e45-24b9-4434-8eef-30cd89f623a4"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
>
</ReqRef><ReqRef
 Id="7c664288-2b36-410e-9dce-05703e002b8e"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
>
</ReqRef><StateMachine
 InitialState=""
 NeedsRequirement="FALSE"
>
<Rules>
<Rule
 Priority="Processing"
 Implemented="TRUE"
 NeedsRequirement="FALSE"
 Name="Select level"
>
<SubRules></SubRules>
<Conditions>
<RuleCondition
 Implemented="TRUE"
 NeedsRequirement="FALSE"
 Name="SelectLevel"
>
<PreConditions>
</PreConditions>
<Actions>
</Actions>
<SubRules>
<Rule
 Priority="Processing"
 Implemented="TRUE"
 Name="Unknown level"
>
<ReqRef
 Id="44711e45-24b9-4434-8eef-30cd89f623a4"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
>
</ReqRef><SubRules></SubRules>
<Conditions>
<RuleCondition
 Implemented="TRUE"
 NeedsRequirement="FALSE"
 Name="Unknown level"
>
<PreConditions>
<PreCondition>Kernel.Level.DataState == DataState.Unknown</PreCondition></PreConditions>
<Actions>
<Action>THIS &lt;- HandleModeChange.StartOfMission.S2.LevelSelectionOffered</Action><Action>DMI.MasterDMI().InitiateLevelRequest(
  Level =&gt; Level.Unknown, 
  Enter =&gt; True, 
  ReValidate =&gt; False
)</Action></Actions>
</RuleCondition></Conditions>
</Rule><Rule
 Priority="Processing"
 Implemented="TRUE"
 Name="Invalid level"
>
<ReqRef
 Id="7c664288-2b36-410e-9dce-05703e002b8e"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
>
</ReqRef><SubRules></SubRules>
<Conditions>
<RuleCondition
 Implemented="TRUE"
 NeedsRequirement="FALSE"
 Name="Invalid level"
>
<PreConditions>
<PreCondition>Kernel.Level.DataState == DataState.Invalid</PreCondition></PreConditions>
<Actions>
<Action>THIS &lt;- HandleModeChange.StartOfMission.S2.LevelSelectionOffered</Action><Action>DMI.MasterDMI().InitiateLevelRequest(
  Level =&gt; Kernel.Level.Value, 
  Enter =&gt; True, 
  ReValidate =&gt; True
)</Action></Actions>
</RuleCondition></Conditions>
</Rule><Rule
 Priority="Processing"
 Implemented="TRUE"
 Name="Valid level"
>
<ReqRef
 Id="1cc13002-553c-49af-a2a8-f528a7778ad8"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
>
</ReqRef><ReqRef
 Id="a4dec848-a075-4e4a-bd28-b22b5228bb83"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
>
</ReqRef><SubRules></SubRules>
<Conditions>
<RuleCondition
 Implemented="TRUE"
 NeedsRequirement="FALSE"
 Name="Valid level"
>
<PreConditions>
<PreCondition>Kernel.Level.DataState == DataState.Valid</PreCondition></PreConditions>
<Actions>
<Action>THIS &lt;- HandleModeChange.StartOfMission.S2.ExitState</Action></Actions>
</RuleCondition></Conditions>
</Rule></SubRules>
</RuleCondition></Conditions>
</Rule></Rules>
</StateMachine></State></States>
</StateMachine></State><State
 X="280"
 Y="310"
 Width="100"
 Height="50"
 NeedsRequirement="FALSE"
 Name="S3"
>
<StateMachine
 InitialState="InitialState"
 Implemented="TRUE"
 NeedsRequirement="FALSE"
>
<States>
<State
 X="70"
 Y="180"
 Width="300"
 Height="50"
 Implemented="TRUE"
 Name="ReceiveNetworkIDs"
>
<ReqRef
 Id="88987d99-35ff-4f33-894e-06060476dc7d"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
>
</ReqRef><StateMachine
 InitialState=""
 Implemented="TRUE"
 NeedsRequirement="FALSE"
>
<Rules>
<Rule
 Priority="Processing"
 Implemented="TRUE"
 Name="OfferChangeNetworkID"
>
<ReqRef
 Id="88987d99-35ff-4f33-894e-06060476dc7d"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
>
</ReqRef><SubRules></SubRules>
<Conditions>
<RuleCondition
 Implemented="TRUE"
 NeedsRequirement="FALSE"
 Name="OfferChangeNetworkID"
>
<PreConditions>
<PreCondition>EURORADIO.AcquireListOfAvailableNetworks.RequestState == Default.Request.Response</PreCondition></PreConditions>
<Actions>
<Action>EURORADIO.AcquireListOfAvailableNetworks.RequestState &lt;- Default.Request.Disabled</Action></Actions>
<SubRules>
<Rule
 Priority="Processing"
 Implemented="TRUE"
 NeedsRequirement="FALSE"
 Name="E3"
>
<ReqRef
 Id="aaf6ac64-c5bf-4e56-9ed9-2cc794042907"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
>
</ReqRef><SubRules></SubRules>
<Conditions>
<RuleCondition
 Implemented="TRUE"
 NeedsRequirement="FALSE"
 Name="E3"
>
<PreConditions>
<PreCondition>EURORADIO.AcquireListOfAvailableNetworks.NetworkIDs == []</PreCondition></PreConditions>
<Actions>
<Action>THIS &lt;- HandleModeChange.StartOfMission.A29</Action></Actions>
</RuleCondition></Conditions>
</Rule><Rule
 Priority="Processing"
 Implemented="TRUE"
 NeedsRequirement="FALSE"
 Name="List not empty"
>
<ReqRef
 Id="5cc3aa7d-2f29-448d-ba8a-4b26df4678b0"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
>
</ReqRef><SubRules></SubRules>
<Conditions>
<RuleCondition
 Implemented="TRUE"
 NeedsRequirement="FALSE"
 Name="List not empty"
>
<PreConditions>
<PreCondition>EURORADIO.AcquireListOfAvailableNetworks.NetworkIDs != []</PreCondition></PreConditions>
<Actions>
<Action>THIS &lt;- HandleModeChange.StartOfMission.S3.RadioNetworkIdchangeOffered</Action><Action>DMI.MasterDMI().SelectNetworkId(EURORADIO.AcquireListOfAvailableNetworks.NetworkIDs)</Action></Actions>
</RuleCondition></Conditions>
</Rule></SubRules>
</RuleCondition></Conditions>
</Rule></Rules>
</StateMachine></State><State
 X="70"
 Y="300"
 Width="300"
 Height="50"
 Implemented="TRUE"
 Name="RadioNetworkIdchangeOffered"
>
<ReqRef
 Id="5cc3aa7d-2f29-448d-ba8a-4b26df4678b0"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
>
</ReqRef><StateMachine
 InitialState=""
 Implemented="TRUE"
 NeedsRequirement="FALSE"
>
<Rules>
<Rule
 Priority="Processing"
 Implemented="TRUE"
 Name="ReceiveNetworkIDResponse"
>
<ReqRef
 Id="5cc3aa7d-2f29-448d-ba8a-4b26df4678b0"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
>
</ReqRef><ReqRef
 Id="5e931954-f188-4190-90e1-fde9d2d2ee5b"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
>
</ReqRef><SubRules></SubRules>
<Conditions>
<RuleCondition
 Implemented="TRUE"
 NeedsRequirement="FALSE"
 Name="ReceiveNetworkIDResponse"
>
<PreConditions>
<PreCondition>DMI.MasterDMI().In_RBCContactInformationRadioNetworkId.InputInformation.RequestStatus == Request.Response</PreCondition></PreConditions>
<Actions>
<Action>THIS &lt;- HandleModeChange.StartOfMission.S3.RegisteringMobileTerminal</Action><Action>DMI.MasterDMI().In_RBCContactInformationRadioNetworkId.InputInformation.RequestStatus &lt;- Request.Disabled</Action></Actions>
<SubRules>
<Rule
 Priority="Processing"
 Implemented="TRUE"
 Name="Change"
>
<SubRules></SubRules>
<Conditions>
<RuleCondition
 Implemented="TRUE"
 NeedsRequirement="FALSE"
 Name="Change"
>
<PreConditions>
<PreCondition>DMI.MasterDMI().In_RBCContactInformationRadioNetworkId.DriverChangedNetworkId</PreCondition></PreConditions>
<Actions>
<Action>EURORADIO.NetworkID &lt;- DMI.MasterDMI().In_RBCContactInformationRadioNetworkId.SelectedID</Action><Action>EURORADIO.CurrentRadioSession.SessionInfo.DataState &lt;- DataState.Unknown</Action><Action>EURORADIO.RegisterMobileTerminal &lt;- EURORADIO.RegisterMobileTerminal.Registering</Action></Actions>
</RuleCondition></Conditions>
</Rule></SubRules>
</RuleCondition></Conditions>
</Rule></Rules>
</StateMachine></State><State
 X="510"
 Y="490"
 Width="300"
 Height="50"
 Implemented="TRUE"
 Name="OfferChangeRBCID"
>
<ReqRef
 Id="ff5aeaff-49e3-489d-816f-c49fc05bc951"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
>
</ReqRef><StateMachine
 InitialState=""
 Implemented="TRUE"
 NeedsRequirement="FALSE"
>
<Rules>
<Rule
 Priority="Processing"
 Implemented="TRUE"
 Name="OfferChangeRBCID"
>
<ReqRef
 Id="ff5aeaff-49e3-489d-816f-c49fc05bc951"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
>
</ReqRef><SubRules></SubRules>
<Conditions>
<RuleCondition
 Implemented="TRUE"
 NeedsRequirement="FALSE"
 Name="OfferChangeRBCID"
>
<PreConditions>
<PreCondition>EURORADIO.MobileTerminalRegisteredToNetwork == Boolean.True</PreCondition></PreConditions>
<Actions>
<Action>THIS &lt;- HandleModeChange.StartOfMission.S3.ChangeRBCIDOffered</Action></Actions>
<SubRules>
<Rule
 Priority="Processing"
 Implemented="TRUE"
 Name="Valid RBCID"
>
<ReqRef
 Id="bc8058d6-c833-43cf-93a4-f446a3a326ac"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
>
</ReqRef><SubRules></SubRules>
<Conditions>
<RuleCondition
 Implemented="TRUE"
 NeedsRequirement="FALSE"
 Name="Valid RBCID"
>
<PreConditions>
<PreCondition>EURORADIO.CurrentRadioSession.SessionInfo.DataState == DataState.Valid</PreCondition></PreConditions>
<Actions>
<Action>DMI.MasterDMI().InitiateRBCIdOrPhoneNumberRequest(
  Id =&gt; EURORADIO.CurrentRadioSession.SessionInfo.RBCIdOrPhoneNumber.Id, 
  PhoneNumber =&gt; EURORADIO.CurrentRadioSession.SessionInfo.RBCIdOrPhoneNumber.PhoneNumber, 
  Enter =&gt; False, 
  ReEnter =&gt; False, 
  UseEirene =&gt; True,
  UseLastStored =&gt; False
)</Action></Actions>
</RuleCondition></Conditions>
</Rule><Rule
 Priority="Processing"
 Implemented="TRUE"
 Name="Unknown RBCID"
>
<ReqRef
 Id="bc8058d6-c833-43cf-93a4-f446a3a326ac"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
>
</ReqRef><ReqRef
 Id="a9f86939-1651-4064-9732-2d860f2d28af"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
>
</ReqRef><SubRules></SubRules>
<Conditions>
<RuleCondition
 Implemented="TRUE"
 NeedsRequirement="FALSE"
 Name="Unknown RBCID"
>
<PreConditions>
<PreCondition>EURORADIO.CurrentRadioSession.SessionInfo.DataState == DataState.Unknown</PreCondition></PreConditions>
<Actions>
<Action>DMI.MasterDMI().InitiateRBCIdOrPhoneNumberRequest(
  Id =&gt; EURORADIO.CurrentRadioSession.SessionInfo.RBCIdOrPhoneNumber.Id, 
  PhoneNumber =&gt; EURORADIO.CurrentRadioSession.SessionInfo.RBCIdOrPhoneNumber.PhoneNumber, 
  Enter =&gt; True, 
  ReEnter =&gt; False, 
  UseEirene =&gt; True, 
  UseLastStored =&gt; False
)</Action></Actions>
</RuleCondition></Conditions>
</Rule><Rule
 Priority="Processing"
 Implemented="TRUE"
 Name="Invalid RBCID"
>
<ReqRef
 Id="1ab51773-764d-4fc1-b533-351222363321"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
>
</ReqRef><ReqRef
 Id="bc8058d6-c833-43cf-93a4-f446a3a326ac"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
>
</ReqRef><ReqRef
 Id="a9f86939-1651-4064-9732-2d860f2d28af"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
>
</ReqRef><SubRules></SubRules>
<Conditions>
<RuleCondition
 Implemented="TRUE"
 NeedsRequirement="FALSE"
 Name="Invalid RBCID"
>
<PreConditions>
<PreCondition>EURORADIO.CurrentRadioSession.SessionInfo.DataState == DataState.Invalid</PreCondition></PreConditions>
<Actions>
<Action>DMI.MasterDMI().InitiateRBCIdOrPhoneNumberRequest(
  Id =&gt; EURORADIO.CurrentRadioSession.SessionInfo.RBCIdOrPhoneNumber.Id, 
  PhoneNumber =&gt; EURORADIO.CurrentRadioSession.SessionInfo.RBCIdOrPhoneNumber.PhoneNumber, 
  Enter =&gt; False, 
  ReEnter =&gt; True, 
  UseEirene =&gt; True, 
  UseLastStored =&gt; True
)</Action></Actions>
</RuleCondition></Conditions>
</Rule></SubRules>
</RuleCondition></Conditions>
</Rule></Rules>
</StateMachine></State><State
 X="510"
 Y="590"
 Width="300"
 Height="50"
 Implemented="TRUE"
 Name="ChangeRBCIDOffered"
>
<ReqRef
 Id="ae370033-2f7d-478e-bce2-69e09a8cc718"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
>
</ReqRef><StateMachine
 InitialState=""
 Implemented="TRUE"
 NeedsRequirement="FALSE"
>
<Rules>
<Rule
 Priority="Processing"
 Implemented="TRUE"
 Name="ReceiveRBCIDResponse"
>
<ReqRef
 Id="ae370033-2f7d-478e-bce2-69e09a8cc718"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
>
</ReqRef><SubRules></SubRules>
<Conditions>
<RuleCondition
 Implemented="TRUE"
 NeedsRequirement="FALSE"
 Name="ReceiveRBCIDResponse"
>
<PreConditions>
<PreCondition>DMI.MasterDMI().In_RBCContactInformationRBCIdOrPhoneNumber.InputInformation.RequestStatus == Request.Response</PreCondition></PreConditions>
<Actions>
<Action>THIS &lt;- HandleModeChange.StartOfMission.S3.ExitState</Action><Action>DMI.MasterDMI().In_RBCContactInformationRBCIdOrPhoneNumber.InputInformation.RequestStatus &lt;- Request.Disabled</Action></Actions>
<SubRules>
<Rule
 Priority="Processing"
 Implemented="TRUE"
 Name="RBC Id Changed"
>
<SubRules></SubRules>
<Conditions>
<RuleCondition
 Implemented="TRUE"
 NeedsRequirement="FALSE"
 Name="RBC Id Changed"
>
<ReqRef
 Id="5e931954-f188-4190-90e1-fde9d2d2ee5b"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
>
</ReqRef><ReqRef
 Id="65c1baf8-73ca-4e1d-a95b-6371966bfa95"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
>
</ReqRef><PreConditions>
<PreCondition>DMI.MasterDMI().In_RBCContactInformationRBCIdOrPhoneNumber.DriverChangedId</PreCondition></PreConditions>
<Actions>
<Action>EURORADIO.CurrentRadioSession.SessionInfo.RBCIdOrPhoneNumber.Id &lt;- DMI.MasterDMI().In_RBCContactInformationRBCIdOrPhoneNumber.RBCContactInformation.RBCIdOrPhoneNumber.Id</Action><Action>EURORADIO.CurrentRadioSession.SessionInfo.DataState &lt;- DataState.Valid</Action><Action>EURORADIO.CurrentRadioSession.SessionInfo.RBCIdOrPhoneNumber.PhoneNumber &lt;- DMI.MasterDMI().In_RBCContactInformationRBCIdOrPhoneNumber.RBCContactInformation.RBCIdOrPhoneNumber.PhoneNumber</Action></Actions>
</RuleCondition></Conditions>
</Rule></SubRules>
</RuleCondition></Conditions>
</Rule></Rules>
</StateMachine></State><State
 X="510"
 Y="690"
 Width="300"
 Height="50"
 Implemented="TRUE"
 Name="ExitState"
>
<ReqRef
 Id="ae370033-2f7d-478e-bce2-69e09a8cc718"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
>
</ReqRef><StateMachine
 InitialState=""
 Implemented="TRUE"
 NeedsRequirement="FALSE"
>
<Rules>
<Rule
 Priority="Processing"
 Implemented="TRUE"
 Name="E5"
>
<ReqRef
 Id="ae370033-2f7d-478e-bce2-69e09a8cc718"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
>
</ReqRef><SubRules></SubRules>
<Conditions>
<RuleCondition
 Implemented="TRUE"
 NeedsRequirement="FALSE"
 Name="E5"
>
<PreConditions>
</PreConditions>
<Actions>
<Action>THIS &lt;- HandleModeChange.StartOfMission.A31</Action></Actions>
</RuleCondition></Conditions>
</Rule></Rules>
</StateMachine></State><State
 X="510"
 Y="120"
 Width="300"
 Height="50"
 Implemented="TRUE"
 Name="DriverResponse1"
>
<ReqRef
 Id="88987d99-35ff-4f33-894e-06060476dc7d"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
>
</ReqRef><StateMachine
 InitialState=""
 Implemented="TRUE"
 NeedsRequirement="FALSE"
>
<Rules>
<Rule
 Priority="Processing"
 Implemented="TRUE"
 NeedsRequirement="FALSE"
 Name="Acquire network IDs"
>
<ReqRef
 Id="88987d99-35ff-4f33-894e-06060476dc7d"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
>
</ReqRef><SubRules></SubRules>
<Conditions>
<RuleCondition
 Implemented="TRUE"
 NeedsRequirement="FALSE"
 Name="Acquire network IDs"
>
<PreConditions>
<PreCondition>DMI.MasterDMI().In_RBCContactInformationRadioNetworkId.InputInformation.RequestStatus == Default.Request.Response</PreCondition></PreConditions>
<Actions>
<Action>DMI.MasterDMI().In_RBCContactInformationRadioNetworkId.InputInformation.RequestStatus &lt;- Default.Request.Disabled</Action></Actions>
<SubRules>
<Rule
 Priority="Processing"
 Implemented="TRUE"
 NeedsRequirement="FALSE"
 Name="Driver elects to enter network ID"
>
<SubRules></SubRules>
<Conditions>
<RuleCondition
 Implemented="TRUE"
 NeedsRequirement="FALSE"
 Name="Driver elects to enter network ID"
>
<PreConditions>
<PreCondition>DMI.MasterDMI().In_RBCContactInformationRadioNetworkId.DriverElectsToChangeNetworkId</PreCondition></PreConditions>
<Actions>
<Action>EURORADIO.AcquireListOfAvailableNetworks.RequestState &lt;- Default.Request.Request</Action><Action>THIS &lt;- HandleModeChange.StartOfMission.S3.ReceiveNetworkIDs</Action></Actions>
</RuleCondition><RuleCondition
 Implemented="TRUE"
 NeedsRequirement="FALSE"
 Name="Otherwise"
>
<PreConditions>
</PreConditions>
<Actions>
<Action>THIS &lt;- HandleModeChange.StartOfMission.S3.OfferChangeRBCID</Action></Actions>
</RuleCondition></Conditions>
</Rule></SubRules>
</RuleCondition></Conditions>
</Rule></Rules>
</StateMachine></State><State
 X="510"
 Y="30"
 Width="300"
 Height="50"
 Implemented="TRUE"
 Name="InitialState"
>
<ReqRef
 Id="88987d99-35ff-4f33-894e-06060476dc7d"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
>
</ReqRef><StateMachine
 InitialState=""
 Implemented="TRUE"
 NeedsRequirement="FALSE"
>
<Rules>
<Rule
 Priority="Processing"
 Implemented="TRUE"
 NeedsRequirement="FALSE"
 Name="OfferReEnterNetworkID"
>
<ReqRef
 Id="88987d99-35ff-4f33-894e-06060476dc7d"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
>
</ReqRef><SubRules></SubRules>
<Conditions>
<RuleCondition
 Implemented="TRUE"
 NeedsRequirement="FALSE"
 Name="OfferReEnterNetworkID"
>
<PreConditions>
</PreConditions>
<Actions>
<Action>THIS &lt;- HandleModeChange.StartOfMission.S3.DriverResponse1</Action><Action>DMI.MasterDMI().InitiateNetworkIdRequest()</Action></Actions>
</RuleCondition></Conditions>
</Rule></Rules>
</StateMachine></State><State
 X="70"
 Y="410"
 Width="300"
 Height="50"
 Implemented="TRUE"
 NeedsRequirement="FALSE"
 Name="RegisteringMobileTerminal"
>
<StateMachine
 InitialState=""
 Implemented="TRUE"
 NeedsRequirement="FALSE"
>
<Rules>
<Rule
 Priority="Processing"
 Implemented="TRUE"
 NeedsRequirement="FALSE"
 Name="Mobile terminal registered"
>
<SubRules></SubRules>
<Conditions>
<RuleCondition
 Implemented="TRUE"
 NeedsRequirement="FALSE"
 Name="Mobile terminal registered"
>
<PreConditions>
<PreCondition>EURORADIO.MobileTerminalRegisteredToNetwork == Boolean.True</PreCondition></PreConditions>
<Actions>
<Action>THIS &lt;- HandleModeChange.StartOfMission.S3.OfferChangeRBCID</Action></Actions>
</RuleCondition></Conditions>
</Rule></Rules>
</StateMachine></State></States>
</StateMachine></State><State
 X="700"
 Y="550"
 Width="300"
 Height="50"
 NeedsRequirement="FALSE"
 Name="S10"
>
<StateMachine
 InitialState="RequestDriverSelection"
 Implemented="TRUE"
 NeedsRequirement="FALSE"
>
<States>
<State
 X="110"
 Y="70"
 Width="200"
 Height="50"
 Implemented="TRUE"
 Name="RequestDriverSelection"
>
<ReqRef
 Id="50de839c-3618-4979-b91c-f620d58a32ad"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
>
</ReqRef><StateMachine
 InitialState=""
 Implemented="TRUE"
 NeedsRequirement="FALSE"
>
<Rules>
<Rule
 Priority="Processing"
 Implemented="TRUE"
 NeedsRequirement="FALSE"
 Name="Request Driver selection"
>
<ReqRef
 Id="50de839c-3618-4979-b91c-f620d58a32ad"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
>
</ReqRef><SubRules></SubRules>
<Conditions>
<RuleCondition
 Implemented="TRUE"
 NeedsRequirement="FALSE"
 Name="Request Driver selection"
>
<PreConditions>
</PreConditions>
<Actions>
<Action>THIS &lt;- HandleModeChange.StartOfMission.S10.DriverSelectionRequested</Action><Action>DMI.MasterDMI().InitiateNonLeadingRequest()</Action><Action>DMI.MasterDMI().InitiateShuntingRequest()</Action><Action>DMI.MasterDMI().InitiateTrainDataEntryRequest()</Action></Actions>
</RuleCondition></Conditions>
</Rule></Rules>
</StateMachine></State><State
 X="110"
 Y="220"
 Width="200"
 Height="50"
 Implemented="TRUE"
 NeedsRequirement="FALSE"
 Name="DriverSelectionRequested"
>
<StateMachine
 InitialState=""
 Implemented="TRUE"
 NeedsRequirement="FALSE"
>
<Rules>
<Rule
 Priority="Processing"
 Implemented="TRUE"
 Name="E11"
>
<ReqRef
 Id="6fd0322c-1f7c-44ab-9b8d-3964217e243e"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
>
</ReqRef><SubRules></SubRules>
<Conditions>
<RuleCondition
 Implemented="TRUE"
 NeedsRequirement="FALSE"
 Name="E11: Train data entry selected by driver"
>
<PreConditions>
<PreCondition>DMI.MasterDMI().In_TrainDataEntryRequest.InputInformation.RequestStatus == Request.Response</PreCondition></PreConditions>
<Actions>
<Action>THIS &lt;- HandleModeChange.StartOfMission.S12</Action><Action>DMI.MasterDMI().In_TrainDataEntryRequest.InputInformation.RequestStatus &lt;- Request.Disabled</Action></Actions>
</RuleCondition></Conditions>
</Rule><Rule
 Priority="Processing"
 Implemented="TRUE"
 Name="E12"
>
<ReqRef
 Id="84e4bf85-c73c-4fd2-a440-bc180869ec08"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
>
</ReqRef><ReqRef
 Id="3d01d017-72ad-4ae6-888e-a4e7f0241a33"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
>
</ReqRef><ReqRef
 Id="a7dfd21b-40f7-4ea2-8604-1cb1cf5a2a65"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
>
</ReqRef><ReqRef
 Id="7c5af2d3-aa45-4d2e-b19d-ad71aaf624a2"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
>
</ReqRef><SubRules></SubRules>
<Conditions>
<RuleCondition
 Implemented="TRUE"
 NeedsRequirement="FALSE"
 Name="E12: Shunting selected by driver"
>
<PreConditions>
<PreCondition>DMI.MasterDMI().In_ShuntingRequest.InputInformation.RequestStatus == Request.Response</PreCondition></PreConditions>
<Actions>
<Action>HandleModeChange &lt;- HandleModeChange.ShuntingInitiatedByDriver</Action><Action>DMI.MasterDMI().In_ShuntingRequest.InputInformation.RequestStatus &lt;- Request.Disabled</Action><Action>DMI.MasterDMI().In_NonLeadingRequest.InputInformation.RequestStatus &lt;- Request.Disabled</Action><Action>DMI.MasterDMI().In_TrainData.InputInformation.RequestStatus &lt;- Request.Disabled</Action><Action>EURORADIO.OpenRBCSession()</Action></Actions>
<SubRules>
<Rule
 Priority="Processing"
 Implemented="TRUE"
 NeedsRequirement="FALSE"
 Name="Handle train position data state"
>
<ReqRef
 Id="42a6f10f-1298-4815-a950-88ff26725dd5"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
>
</ReqRef><ReqRef
 Id="ebe785eb-406c-4459-b678-43e24f9ace82"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
>
</ReqRef><ReqRef
 Id="306aeada-d0ba-4101-bb87-96fc5db2a745"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
>
</ReqRef><SubRules></SubRules>
<Conditions>
<RuleCondition
 Implemented="TRUE"
 Name="Invalid to unknown"
>
<PreConditions>
<PreCondition>TrainPosition.Position.DataState == DataState.Invalid</PreCondition></PreConditions>
<Actions>
<Action>TrainPosition.Position.DataState &lt;- Default.DataState.Unknown</Action></Actions>
</RuleCondition></Conditions>
</Rule></SubRules>
</RuleCondition></Conditions>
</Rule></Rules>
</StateMachine></State></States>
<Rules>
<Rule
 Priority="Processing"
 Implemented="TRUE"
 Name="Allow start"
>
<ReqRef
 Id="28015708-3b6f-4bfb-87a2-4901cf481c50"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
>
</ReqRef><SubRules></SubRules>
<Conditions>
<RuleCondition
 Implemented="TRUE"
 NeedsRequirement="FALSE"
 Name="Allow start for state S10"
>
<PreConditions>
<PreCondition>Kernel.TrainData.TrainData.DataState == DataState.Valid</PreCondition></PreConditions>
<Actions>
</Actions>
<SubRules>
<Rule
 Priority="Processing"
 Implemented="TRUE"
 NeedsRequirement="FALSE"
 Name="Allow to select start"
>
<SubRules></SubRules>
<Conditions>
<RuleCondition
 Implemented="TRUE"
 NeedsRequirement="FALSE"
 Name="Start not yet proposed to driver"
>
<PreConditions>
<PreCondition>DMI.MasterDMI().In_Start.InputInformation.RequestStatus == Request.Disabled</PreCondition></PreConditions>
<Actions>
<Action>DMI.MasterDMI().InitiateStartRequest()</Action></Actions>
</RuleCondition><RuleCondition
 Implemented="TRUE"
 NeedsRequirement="FALSE"
 Name="Driver selected Start"
>
<PreConditions>
<PreCondition>DMI.MasterDMI().In_Start.InputInformation.RequestStatus == Request.Response</PreCondition></PreConditions>
<Actions>
<Action>DMI.MasterDMI().In_Start.InputInformation.RequestStatus &lt;- Request.Disabled</Action></Actions>
<SubRules>
<Rule
 Priority="Processing"
 Implemented="TRUE"
 NeedsRequirement="FALSE"
 Name="Select state according to level"
>
<SubRules></SubRules>
<Conditions>
<RuleCondition
 Implemented="TRUE"
 NeedsRequirement="FALSE"
 Name="Level 0"
>
<PreConditions>
<PreCondition>Level.Value == Level.L0</PreCondition></PreConditions>
<Actions>
<Action>THIS &lt;- S23</Action></Actions>
</RuleCondition><RuleCondition
 Implemented="TRUE"
 NeedsRequirement="FALSE"
 Name="Level NTC"
>
<PreConditions>
<PreCondition>Level.Value == Level.LNTC</PreCondition></PreConditions>
<Actions>
<Action>THIS &lt;- S22</Action></Actions>
</RuleCondition><RuleCondition
 Implemented="TRUE"
 NeedsRequirement="FALSE"
 Name="Level 1, 2 or 3"
>
<PreConditions>
<PreCondition>Level.Value in [ Level.L1, Level.L2, Level.L3 ]</PreCondition></PreConditions>
<Actions>
<Action>THIS &lt;- S24</Action></Actions>
</RuleCondition></Conditions>
</Rule></SubRules>
</RuleCondition></Conditions>
</Rule></SubRules>
</RuleCondition></Conditions>
</Rule></Rules>
</StateMachine></State><State
 X="230"
 Y="470"
 Width="100"
 Height="50"
 NeedsRequirement="FALSE"
 Name="S11"
>
<StateMachine
 InitialState="SendTrainData"
 Implemented="TRUE"
 NeedsRequirement="FALSE"
>
<States>
<State
 X="60"
 Y="60"
 Width="200"
 Height="50"
 Implemented="TRUE"
 Name="SendTrainData"
>
<ReqRef
 Id="8b735562-2ede-429c-940c-7f53b0f6f675"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
>
</ReqRef><StateMachine
 InitialState=""
 Implemented="TRUE"
 NeedsRequirement="FALSE"
>
<Rules>
<Rule
 Priority="Processing"
 Implemented="TRUE"
 Name="Send train data"
>
<ReqRef
 Id="8b735562-2ede-429c-940c-7f53b0f6f675"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
>
</ReqRef><SubRules></SubRules>
<Conditions>
<RuleCondition
 Implemented="TRUE"
 NeedsRequirement="FALSE"
 Name="Send train data"
>
<PreConditions>
</PreConditions>
<Actions>
<Action>EURORADIO.TrainData.SendTrainData()</Action><Action>THIS &lt;- HandleModeChange.StartOfMission.S11.TrainDataSent</Action></Actions>
</RuleCondition></Conditions>
</Rule></Rules>
</StateMachine></State><State
 X="60"
 Y="170"
 Width="200"
 Height="50"
 Implemented="TRUE"
 Name="TrainDataSent"
>
<ReqRef
 Id="ae08f54c-5656-462e-9c38-46eec850f45a"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
>
</ReqRef><StateMachine
 InitialState=""
 Implemented="TRUE"
 NeedsRequirement="FALSE"
>
<Rules>
<Rule
 Priority="Processing"
 Implemented="TRUE"
 Name="E14"
>
<ReqRef
 Id="ae08f54c-5656-462e-9c38-46eec850f45a"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
>
</ReqRef><SubRules></SubRules>
<Conditions>
<RuleCondition
 Implemented="TRUE"
 NeedsRequirement="FALSE"
 Name="E14"
>
<PreConditions>
<PreCondition>Available ( EURORADIO.EuroradioMessageIn.ACKNOWLEDGEMENT_OF_TRAIN_DATA )</PreCondition></PreConditions>
<Actions>
<Action>THIS &lt;- HandleModeChange.StartOfMission.S20</Action></Actions>
</RuleCondition></Conditions>
</Rule></Rules>
</StateMachine></State></States>
</StateMachine></State><State
 X="800"
 Y="360"
 Width="100"
 Height="50"
 NeedsRequirement="FALSE"
 Name="S13"
>
<StateMachine
 InitialState="AskTrainRunningNumber"
 Implemented="TRUE"
 NeedsRequirement="FALSE"
>
<States>
<State
 X="110"
 Y="60"
 Width="250"
 Height="50"
 Implemented="TRUE"
 Name="AskTrainRunningNumber"
>
<ReqRef
 Id="4549d882-b756-48ca-9591-ed094820a8d6"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
>
</ReqRef><StateMachine
 InitialState=""
 Implemented="TRUE"
 NeedsRequirement="FALSE"
>
<Rules>
<Rule
 Priority="Processing"
 Implemented="TRUE"
 NeedsRequirement="FALSE"
 Name="Request train running number"
>
<SubRules></SubRules>
<Conditions>
<RuleCondition
 Implemented="TRUE"
 NeedsRequirement="FALSE"
 Name="Request train running number"
>
<PreConditions>
<PreCondition>Kernel.TrainRunningNumber.DataState in [Default.DataState.Invalid, Default.DataState.Unknown]</PreCondition></PreConditions>
<Actions>
<Action>THIS &lt;- HandleModeChange.StartOfMission.S13.TrainRunningNumberAsked</Action></Actions>
<SubRules>
<Rule
 Priority="Processing"
 Implemented="TRUE"
 NeedsRequirement="FALSE"
 Name="Invalid train running number"
>
<SubRules></SubRules>
<Conditions>
<RuleCondition
 Implemented="TRUE"
 NeedsRequirement="FALSE"
 Name="Invalid train running number"
>
<PreConditions>
<PreCondition>Kernel.TrainRunningNumber.DataState == Default.DataState.Invalid</PreCondition></PreConditions>
<Actions>
<Action>DMI.MasterDMI().InitiateTrainRunningNumberRequest(
  Number =&gt; Kernel.TrainRunningNumber.Value, 
  Enter =&gt; True, 
  ReValidate =&gt; True
)</Action></Actions>
</RuleCondition></Conditions>
</Rule><Rule
 Priority="Processing"
 Implemented="TRUE"
 NeedsRequirement="FALSE"
 Name="Unknown train running number"
>
<SubRules></SubRules>
<Conditions>
<RuleCondition
 Implemented="TRUE"
 NeedsRequirement="FALSE"
 Name="Unknown train running number"
>
<PreConditions>
<PreCondition>Kernel.TrainRunningNumber.DataState == Default.DataState.Unknown</PreCondition></PreConditions>
<Actions>
<Action>DMI.MasterDMI().InitiateTrainRunningNumberRequest(
  Number =&gt; Kernel.TrainRunningNumber.Value, 
  Enter =&gt; True, 
  ReValidate =&gt; False
)</Action></Actions>
</RuleCondition></Conditions>
</Rule></SubRules>
</RuleCondition></Conditions>
</Rule></Rules>
</StateMachine></State><State
 X="110"
 Y="210"
 Width="250"
 Height="50"
 NeedsRequirement="FALSE"
 Name="TrainRunningNumberAsked"
>
<StateMachine
 InitialState=""
 Implemented="TRUE"
 NeedsRequirement="FALSE"
>
<Rules>
<Rule
 Priority="Processing"
 Implemented="TRUE"
 NeedsRequirement="FALSE"
 Name="Receive driver response"
>
<ReqRef
 Id="b73d7793-cf2f-4c3f-92ea-d8c2b081c744"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
>
</ReqRef><ReqRef
 Id="bb40e241-378f-4872-9823-6f03bbc2d2e2"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
>
</ReqRef><SubRules></SubRules>
<Conditions>
<RuleCondition
 Implemented="TRUE"
 NeedsRequirement="FALSE"
 Name="Receive driver response"
>
<PreConditions>
<PreCondition>DMI.MasterDMI().In_TrainRunningNumber.InputInformation.RequestStatus == Request.Response</PreCondition></PreConditions>
<Actions>
<Action>Kernel.TrainRunningNumber.DataState &lt;- Default.DataState.Valid</Action><Action>DMI.MasterDMI().In_TrainRunningNumber.InputInformation.RequestStatus &lt;- Request.Disabled</Action><Action>Kernel.TrainRunningNumber.Value &lt;- DMI.MasterDMI().In_TrainRunningNumber.Number</Action></Actions>
</RuleCondition></Conditions>
</Rule></Rules>
</StateMachine></State></States>
<Rules>
<Rule
 Priority="Processing"
 Implemented="TRUE"
 Name="E18"
>
<ReqRef
 Id="f4b839b3-d1ea-4c3b-8a2b-8bda94f934c3"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
>
</ReqRef><SubRules></SubRules>
<Conditions>
<RuleCondition
 Implemented="TRUE"
 NeedsRequirement="FALSE"
 Name="E18"
>
<PreConditions>
<PreCondition>Kernel.TrainRunningNumber.DataState == Default.DataState.Valid</PreCondition></PreConditions>
<Actions>
<Action>THIS &lt;- HandleModeChange.StartOfMission.D10</Action></Actions>
</RuleCondition></Conditions>
</Rule></Rules>
</StateMachine></State><State
 X="10"
 Y="550"
 Width="600"
 Height="50"
 NeedsRequirement="FALSE"
 Name="S20"
>
<StateMachine
 InitialState="ProposeStart"
 Implemented="TRUE"
 NeedsRequirement="FALSE"
>
<States>
<State
 X="60"
 Y="60"
 Width="200"
 Height="50"
 Implemented="TRUE"
 Name="ProposeStart"
>
<ReqRef
 Id="c70a632c-3b48-4d02-90f3-3e843c5c1ea1"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
>
</ReqRef><StateMachine
 InitialState=""
 Implemented="TRUE"
 NeedsRequirement="FALSE"
>
<Rules>
<Rule
 Priority="Processing"
 Implemented="TRUE"
 Name="Start proposed"
>
<ReqRef
 Id="c70a632c-3b48-4d02-90f3-3e843c5c1ea1"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
>
</ReqRef><SubRules></SubRules>
<Conditions>
<RuleCondition
 Implemented="TRUE"
 NeedsRequirement="FALSE"
 Name="Start proposed"
>
<PreConditions>
</PreConditions>
<Actions>
<Action>DMI.MasterDMI().InitiateStartRequest()</Action><Action>THIS &lt;- HandleModeChange.StartOfMission.S20.StartProposed</Action></Actions>
</RuleCondition></Conditions>
</Rule></Rules>
</StateMachine></State><State
 X="60"
 Y="180"
 Width="200"
 Height="50"
 Implemented="TRUE"
 Name="StartProposed"
>
<ReqRef
 Id="eae06a67-b3dd-4f7a-9192-5393b3e88155"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
>
</ReqRef><ReqRef
 Id="77e79e6f-9bfd-4470-b548-0d714c901a83"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
>
</ReqRef><ReqRef
 Id="f83b0295-446e-4191-b73b-dc8da983ead7"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
>
</ReqRef><ReqRef
 Id="f8b0528a-9c12-4ef5-9509-bcb0bff33a6e"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
>
</ReqRef><StateMachine
 InitialState=""
 Implemented="TRUE"
 NeedsRequirement="FALSE"
>
<Rules>
<Rule
 Priority="Processing"
 Implemented="TRUE"
 Name="E20"
>
<ReqRef
 Id="eae06a67-b3dd-4f7a-9192-5393b3e88155"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
>
</ReqRef><SubRules></SubRules>
<Conditions>
<RuleCondition
 Implemented="TRUE"
 NeedsRequirement="FALSE"
 Name="E20"
>
<PreConditions>
<PreCondition>Kernel.Level.Value == Level.LNTC</PreCondition><PreCondition>DMI.MasterDMI().In_Start.InputInformation.RequestStatus == Request.Response</PreCondition></PreConditions>
<Actions>
<Action>THIS &lt;- HandleModeChange.StartOfMission.S22</Action><Action>DMI.MasterDMI().In_Start.InputInformation.RequestStatus &lt;- Request.Disabled</Action></Actions>
</RuleCondition></Conditions>
</Rule><Rule
 Priority="Processing"
 Implemented="TRUE"
 Name="E21"
>
<ReqRef
 Id="77e79e6f-9bfd-4470-b548-0d714c901a83"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
>
</ReqRef><SubRules></SubRules>
<Conditions>
<RuleCondition
 Implemented="TRUE"
 NeedsRequirement="FALSE"
 Name="E21"
>
<PreConditions>
<PreCondition>Kernel.Level.Value == Level.L0</PreCondition><PreCondition>DMI.MasterDMI().In_Start.InputInformation.RequestStatus == Request.Response</PreCondition></PreConditions>
<Actions>
<Action>THIS &lt;- HandleModeChange.StartOfMission.S23</Action><Action>DMI.MasterDMI().In_Start.InputInformation.RequestStatus &lt;- Request.Disabled</Action></Actions>
</RuleCondition></Conditions>
</Rule><Rule
 Priority="Processing"
 Implemented="TRUE"
 Name="E22"
>
<ReqRef
 Id="f83b0295-446e-4191-b73b-dc8da983ead7"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
>
</ReqRef><SubRules></SubRules>
<Conditions>
<RuleCondition
 Implemented="TRUE"
 NeedsRequirement="FALSE"
 Name="E22"
>
<PreConditions>
<PreCondition>Kernel.Level.Value == Level.L1</PreCondition><PreCondition>DMI.MasterDMI().In_Start.InputInformation.RequestStatus == Request.Response</PreCondition></PreConditions>
<Actions>
<Action>THIS &lt;- HandleModeChange.StartOfMission.S24</Action><Action>DMI.MasterDMI().In_Start.InputInformation.RequestStatus &lt;- Request.Disabled</Action></Actions>
</RuleCondition></Conditions>
</Rule><Rule
 Priority="Processing"
 Implemented="TRUE"
 Name="E24"
>
<ReqRef
 Id="f8b0528a-9c12-4ef5-9509-bcb0bff33a6e"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
>
</ReqRef><SubRules></SubRules>
<Conditions>
<RuleCondition
 Implemented="TRUE"
 NeedsRequirement="FALSE"
 Name="E24"
>
<PreConditions>
<PreCondition>Kernel.Level.Value in [Level.L2, Level.L3]</PreCondition><PreCondition>DMI.MasterDMI().In_Start.InputInformation.RequestStatus == Request.Response</PreCondition></PreConditions>
<Actions>
<Action>THIS &lt;- HandleModeChange.StartOfMission.S21</Action><Action>DMI.MasterDMI().In_Start.InputInformation.RequestStatus &lt;- Request.Disabled</Action></Actions>
</RuleCondition></Conditions>
</Rule></Rules>
</StateMachine></State></States>
<Rules>
<Rule
 Priority="Processing"
 Implemented="TRUE"
 Name="Allow reenter train data"
>
<ReqRef
 Id="5aca3d45-a3d1-4286-a5a4-f451779e43d4"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
>
</ReqRef><SubRules></SubRules>
<Conditions>
<RuleCondition
 Implemented="TRUE"
 NeedsRequirement="FALSE"
 Name="Allow reenter train data in state S20"
>
<PreConditions>
</PreConditions>
<Actions>
</Actions>
<SubRules>
<Rule
 Priority="Processing"
 Implemented="TRUE"
 NeedsRequirement="FALSE"
 Name="Allow Re-enter train data"
>
<SubRules></SubRules>
<Conditions>
<RuleCondition
 Implemented="TRUE"
 NeedsRequirement="FALSE"
 Name="Reenter train data not yet proposed to driver"
>
<PreConditions>
<PreCondition>DMI.MasterDMI().In_TrainData.InputInformation.RequestStatus == Request.Disabled</PreCondition></PreConditions>
<Actions>
<Action>DMI.MasterDMI().InitiateTrainDataRequest()</Action></Actions>
</RuleCondition><RuleCondition
 Implemented="TRUE"
 NeedsRequirement="FALSE"
 Name="Driver selected to reenter the train data"
>
<PreConditions>
<PreCondition>DMI.MasterDMI().In_TrainData.InputInformation.RequestStatus == Request.Response</PreCondition></PreConditions>
<Actions>
<Action>DMI.MasterDMI().In_TrainData.InputInformation.RequestStatus &lt;- Request.Disabled</Action><Action>Kernel.TrainData.TrainData.Value &lt;- DMI.MasterDMI().In_TrainData.Data</Action><Action>THIS &lt;- S12</Action></Actions>
</RuleCondition></Conditions>
</Rule></SubRules>
</RuleCondition></Conditions>
</Rule><Rule
 Priority="Processing"
 Implemented="TRUE"
 Name="Allow non leading"
>
<ReqRef
 Id="4691efdb-b90a-4120-a11d-7598ae98c8c7"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
>
</ReqRef><ReqRef
 Id="aba0e684-4967-4fc6-850e-d080a2909bc5"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
>
</ReqRef><SubRules></SubRules>
<Conditions>
<RuleCondition
 Implemented="TRUE"
 NeedsRequirement="FALSE"
 Name="Allow non leading for state S20"
>
<PreConditions>
</PreConditions>
<Actions>
</Actions>
<SubRules>
<Rule
 Priority="Processing"
 Implemented="TRUE"
 NeedsRequirement="FALSE"
 Name="Allow to select non leading"
>
<SubRules></SubRules>
<Conditions>
<RuleCondition
 Implemented="TRUE"
 NeedsRequirement="FALSE"
 Name="Non leading not yet proposed to driver"
>
<PreConditions>
<PreCondition>DMI.MasterDMI().In_NonLeadingRequest.InputInformation.RequestStatus == Request.Disabled</PreCondition></PreConditions>
<Actions>
<Action>DMI.MasterDMI().InitiateNonLeadingRequest()</Action></Actions>
</RuleCondition></Conditions>
</Rule></SubRules>
</RuleCondition></Conditions>
</Rule><Rule
 Priority="Processing"
 Implemented="TRUE"
 Name="Allow shunting"
>
<ReqRef
 Id="4691efdb-b90a-4120-a11d-7598ae98c8c7"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
>
</ReqRef><ReqRef
 Id="60a884ee-664d-4031-988d-f9da13132152"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
>
</ReqRef><SubRules></SubRules>
<Conditions>
<RuleCondition
 Implemented="TRUE"
 NeedsRequirement="FALSE"
 Name="Allow shunting for state S20"
>
<PreConditions>
</PreConditions>
<Actions>
</Actions>
<SubRules>
<Rule
 Priority="Processing"
 Implemented="TRUE"
 NeedsRequirement="FALSE"
 Name="Allow to select shunting"
>
<SubRules></SubRules>
<Conditions>
<RuleCondition
 Implemented="TRUE"
 NeedsRequirement="FALSE"
 Name="Shunting not yet proposed to driver"
>
<PreConditions>
<PreCondition>DMI.MasterDMI().In_ShuntingRequest.InputInformation.RequestStatus == Request.Disabled</PreCondition></PreConditions>
<Actions>
<Action>DMI.MasterDMI().InitiateShuntingRequest()</Action></Actions>
</RuleCondition><RuleCondition
 Implemented="TRUE"
 NeedsRequirement="FALSE"
 Name="Driver selected shunting"
>
<PreConditions>
<PreCondition>DMI.MasterDMI().In_ShuntingRequest.InputInformation.RequestStatus == Request.Response</PreCondition></PreConditions>
<Actions>
<Action>DMI.MasterDMI().In_ShuntingRequest.InputInformation.RequestStatus &lt;- Request.Disabled</Action><Action>THIS &lt;- ShuntingInitiatedByDriver</Action></Actions>
<SubRules>
<Rule
 Priority="Processing"
 Implemented="TRUE"
 NeedsRequirement="FALSE"
 Name="Check position validity"
>
<ReqRef
 Id="306aeada-d0ba-4101-bb87-96fc5db2a745"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
>
</ReqRef><SubRules></SubRules>
<Conditions>
<RuleCondition
 Implemented="TRUE"
 NeedsRequirement="FALSE"
 Name="Invalid position"
>
<PreConditions>
<PreCondition>TrainPosition.Position.DataState == DataState.Invalid</PreCondition></PreConditions>
<Actions>
<Action>TrainPosition.Position.DataState &lt;- DataState.Unknown</Action></Actions>
</RuleCondition></Conditions>
</Rule></SubRules>
</RuleCondition></Conditions>
</Rule></SubRules>
</RuleCondition></Conditions>
</Rule></Rules>
</StateMachine></State><State
 X="20"
 Y="810"
 Width="100"
 Height="50"
 NeedsRequirement="FALSE"
 Name="S24"
>
<StateMachine
 InitialState="DisplayDriverAckRequest"
 Implemented="TRUE"
 NeedsRequirement="FALSE"
>
<Rules>
<Rule
 Priority="Processing"
 Implemented="TRUE"
 Name="Display driver ack request"
>
<ReqRef
 Id="b993b468-098e-45b6-9120-8f3a2608780a"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
>
</ReqRef><SubRules></SubRules>
<Conditions>
<RuleCondition
 Implemented="TRUE"
 NeedsRequirement="FALSE"
 Name="Display driver ack request"
>
<PreConditions>
<PreCondition>DMI.MasterDMI().In_AcknOfSRMode.InputInformation.RequestStatus == Request.Disabled</PreCondition></PreConditions>
<Actions>
<Action>DMI.MasterDMI().InitiateAcknOfSRMode()</Action></Actions>
</RuleCondition></Conditions>
</Rule></Rules>
</StateMachine></State><State
 X="200"
 Y="820"
 Width="100"
 Height="50"
 NeedsRequirement="FALSE"
 Name="S25"
>
<StateMachine
 InitialState="DisplayDriverAckRequest"
 Implemented="TRUE"
 NeedsRequirement="FALSE"
>
<Rules>
<Rule
 Priority="Processing"
 Implemented="TRUE"
 NeedsRequirement="FALSE"
 Name="Display driver ack request for LS"
>
<ReqRef
 Id="9987667c-60f8-4136-98e0-3bb720a91f76"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
>
</ReqRef><ReqRef
 Id="aa3f1b72-e48c-4c84-af17-db6bfe3c11b1"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
>
</ReqRef><ReqRef
 Id="8c7eb4ff-2716-4d9f-a6f2-bd52aacc416b"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
>
</ReqRef><SubRules></SubRules>
<Conditions>
<RuleCondition
 Implemented="TRUE"
 NeedsRequirement="FALSE"
 Name="Display driver ack request for LS"
>
<PreConditions>
<PreCondition>MA.ModeProfile.CurrentMode() == Default.Mode.ModeProfile.LS</PreCondition></PreConditions>
<Actions>
<Action>DMI.MasterDMI().InitiateAcknOfLSMode()</Action></Actions>
</RuleCondition></Conditions>
</Rule><Rule
 Priority="Processing"
 Implemented="TRUE"
 NeedsRequirement="FALSE"
 Name="Display driver ack request for OS"
>
<ReqRef
 Id="9987667c-60f8-4136-98e0-3bb720a91f76"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
>
</ReqRef><ReqRef
 Id="4ebd4845-9d08-4721-8788-6991ab66d3eb"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
>
</ReqRef><ReqRef
 Id="c7906978-32c5-4b29-bb48-bb2bb5d7190b"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
>
</ReqRef><SubRules></SubRules>
<Conditions>
<RuleCondition
 Implemented="TRUE"
 NeedsRequirement="FALSE"
 Name="Display driver ack request for OS"
>
<PreConditions>
<PreCondition>MA.ModeProfile.CurrentMode() == Default.Mode.ModeProfile.OS</PreCondition></PreConditions>
<Actions>
<Action>DMI.MasterDMI().InitiateAcknOfOSMode()</Action></Actions>
</RuleCondition></Conditions>
</Rule><Rule
 Priority="Processing"
 Implemented="TRUE"
 NeedsRequirement="FALSE"
 Name="Display driver ack request for SH"
>
<ReqRef
 Id="9987667c-60f8-4136-98e0-3bb720a91f76"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
>
</ReqRef><ReqRef
 Id="91e483bb-c16e-4c94-8256-d3dcf2d0e0fb"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
>
</ReqRef><ReqRef
 Id="39ae88ad-20ca-43d1-8c3f-5f7172777b6e"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
>
</ReqRef><SubRules></SubRules>
<Conditions>
<RuleCondition
 Implemented="TRUE"
 NeedsRequirement="FALSE"
 Name="Display driver ack request for SH"
>
<PreConditions>
<PreCondition>MA.ModeProfile.CurrentMode() == Default.Mode.ModeProfile.SH</PreCondition></PreConditions>
<Actions>
<Action>DMI.MasterDMI().InitiateAcknOfSHMode()</Action></Actions>
</RuleCondition></Conditions>
</Rule></Rules>
</StateMachine></State><State
 X="10"
 Y="200"
 Width="100"
 Height="50"
 NeedsRequirement="FALSE"
 Name="D2"
>
<StateMachine
 InitialState=""
 Implemented="TRUE"
 NeedsRequirement="FALSE"
>
<Rules>
<Rule
 Priority="Processing"
 Implemented="TRUE"
 Name="D2"
>
<ReqRef
 Id="fd55504d-dcad-435b-b30f-48a7a37ff251"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
>
</ReqRef><ReqRef
 Id="2e3eda46-b060-4164-9dc4-05e853b23a11"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
>
<Comment>Closing the desk does not invalidates the train position stored in the engine</Comment>
</ReqRef><ReqRef
 Id="2716843f-aeab-4fa3-8b17-006bff38ba9a"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
>
</ReqRef><SubRules></SubRules>
<Conditions>
<RuleCondition
 Implemented="TRUE"
 NeedsRequirement="FALSE"
 Name="Valid stored position and level"
>
<ReqRef
 Id="6fdea10b-a5c0-4096-87cd-95798603eed3"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
>
</ReqRef><PreConditions>
<PreCondition>Kernel.Level.DataState == DataState.Valid</PreCondition><PreCondition>Kernel.TrainPosition.Position.DataState == DataState.Valid</PreCondition></PreConditions>
<Actions>
<Action>THIS &lt;- HandleModeChange.StartOfMission.D3</Action></Actions>
</RuleCondition><RuleCondition
 Implemented="TRUE"
 NeedsRequirement="FALSE"
 Name="Invalid stored position or level"
>
<ReqRef
 Id="07046c6a-c307-4f22-82f0-ebe5cfc912d8"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
>
</ReqRef><PreConditions>
</PreConditions>
<Actions>
<Action>THIS &lt;- HandleModeChange.StartOfMission.S2</Action></Actions>
<SubRules>
<Rule
 Priority="Processing"
 Implemented="TRUE"
 NeedsRequirement="FALSE"
 Name="Update level state"
>
<SubRules></SubRules>
<Conditions>
<RuleCondition
 Implemented="TRUE"
 NeedsRequirement="FALSE"
 Name="Level was valid"
>
<ReqRef
 Id="5ffd63ff-4c11-496d-9401-99006c03df8c"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
>
</ReqRef><ReqRef
 Id="72d0b26b-453c-43da-811b-bb300e22a117"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
>
</ReqRef><PreConditions>
<PreCondition>Level.DataState == Default.DataState.Valid</PreCondition></PreConditions>
<Actions>
<Action>Level.DataState &lt;- Default.DataState.Invalid</Action></Actions>
</RuleCondition></Conditions>
</Rule><Rule
 Priority="Processing"
 Implemented="TRUE"
 NeedsRequirement="FALSE"
 Name="Update phone ID state"
>
<SubRules></SubRules>
<Conditions>
<RuleCondition
 Implemented="TRUE"
 NeedsRequirement="FALSE"
 Name="Phone ID was valid"
>
<ReqRef
 Id="5ffd63ff-4c11-496d-9401-99006c03df8c"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
>
</ReqRef><PreConditions>
<PreCondition>EURORADIO.CurrentRadioSession.SessionInfo.DataState == DataState.Valid</PreCondition></PreConditions>
<Actions>
<Action>EURORADIO.CurrentRadioSession.SessionInfo.DataState &lt;- DataState.Invalid</Action></Actions>
</RuleCondition></Conditions>
</Rule></SubRules>
</RuleCondition></Conditions>
</Rule></Rules>
</StateMachine></State><State
 X="280"
 Y="200"
 Width="100"
 Height="50"
 NeedsRequirement="FALSE"
 Name="D3"
>
<StateMachine
 InitialState=""
 Implemented="TRUE"
 NeedsRequirement="FALSE"
>
<Rules>
<Rule
 Priority="Processing"
 Implemented="TRUE"
 NeedsRequirement="FALSE"
 Name="D3"
>
<ReqRef
 Id="b3c23b39-6eae-4cf8-b2b1-8c9ee868368c"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
>
</ReqRef><ReqRef
 Id="3d01119c-9a06-4fe4-8e31-dcced163ddc9"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
>
</ReqRef><SubRules></SubRules>
<Conditions>
<RuleCondition
 Implemented="TRUE"
 NeedsRequirement="FALSE"
 Name="Level 0, 1, NTC"
>
<ReqRef
 Id="b3c23b39-6eae-4cf8-b2b1-8c9ee868368c"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
>
</ReqRef><PreConditions>
<PreCondition>Kernel.Level.Value in [Level.L0, Level.L1, Level.LNTC]</PreCondition></PreConditions>
<Actions>
<Action>THIS &lt;- HandleModeChange.StartOfMission.S10</Action></Actions>
</RuleCondition><RuleCondition
 Implemented="TRUE"
 NeedsRequirement="FALSE"
 Name="Level 2, 3"
>
<ReqRef
 Id="3d01119c-9a06-4fe4-8e31-dcced163ddc9"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
>
</ReqRef><PreConditions>
<PreCondition>Kernel.Level.Value in [Level.L2, Level.L3]</PreCondition></PreConditions>
<Actions>
<Action>THIS &lt;- HandleModeChange.StartOfMission.D7</Action></Actions>
</RuleCondition></Conditions>
</Rule></Rules>
</StateMachine></State><State
 X="1400"
 Y="330"
 Width="100"
 Height="50"
 NeedsRequirement="FALSE"
 Name="A32"
>
<StateMachine
 InitialState=""
 Implemented="TRUE"
 NeedsRequirement="FALSE"
>
<Rules>
<Rule
 Priority="Processing"
 Implemented="TRUE"
 Name="A32"
>
<ReqRef
 Id="56576e5f-6491-43ac-bb6d-439d660b8baf"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
>
</ReqRef><ReqRef
 Id="97f97df2-7ec4-48d8-a999-6068f0d43b01"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
>
</ReqRef><ReqRef
 Id="f7f64285-3893-4d88-a8cc-f1648cd075cc"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
>
</ReqRef><ReqRef
 Id="2a24f59d-dee8-4d3d-abc7-cb4d05ba118d"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
>
</ReqRef><ReqRef
 Id="c304ce24-e48e-45dd-b7a6-264940ebbb40"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
>
</ReqRef><SubRules></SubRules>
<Conditions>
<RuleCondition
 Implemented="TRUE"
 NeedsRequirement="FALSE"
 Name="Inform driver session has failed"
>
<PreConditions>
</PreConditions>
<Actions>
<Action>DMI.MasterDMI().DisplaySafeRadioConnectionIndication(EURORADIO.SafeRadioConnectionStatus.ConnectionLostOrSetUpFailed)</Action><Action>THIS &lt;- HandleModeChange.StartOfMission.S10</Action></Actions>
</RuleCondition></Conditions>
</Rule></Rules>
</StateMachine></State><State
 X="1390"
 Y="170"
 Width="100"
 Height="50"
 NeedsRequirement="FALSE"
 Name="A33"
>
<StateMachine
 InitialState=""
 Implemented="TRUE"
 NeedsRequirement="FALSE"
>
<Rules>
<Rule
 Priority="Processing"
 Implemented="TRUE"
 Name="A33"
>
<ReqRef
 Id="aa43ddb6-13a5-4b3e-bbcc-bf985bea4175"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
>
</ReqRef><ReqRef
 Id="ca2f6d51-ace7-440e-8348-3cf6fa973ffe"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
>
</ReqRef><SubRules></SubRules>
<Conditions>
<RuleCondition
 Implemented="TRUE"
 NeedsRequirement="FALSE"
 Name="Transmit valid SoM position report if train position is valid"
>
<PreConditions>
<PreCondition>TrainPosition.Position.DataState == DataState.Valid</PreCondition></PreConditions>
<Actions>
<Action>EURORADIO.PositionReport.SendSOMPositionReport()</Action><Action>THIS &lt;- HandleModeChange.StartOfMission.S10</Action></Actions>
</RuleCondition></Conditions>
</Rule></Rules>
</StateMachine></State><State
 X="1140"
 Y="400"
 Width="100"
 Height="50"
 NeedsRequirement="FALSE"
 Name="A34"
>
<StateMachine
 InitialState="ReportPositionToRBC"
 Implemented="TRUE"
 NeedsRequirement="FALSE"
>
<States>
<State
 Y="60"
 Width="100"
 Height="50"
 Implemented="TRUE"
 Name="ReportPositionToRBC"
>
<ReqRef
 Id="6375b0de-0293-4d16-abdf-cb5f39a35143"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
>
</ReqRef><StateMachine
 InitialState=""
 Implemented="TRUE"
 NeedsRequirement="FALSE"
>
<Rules>
<Rule
 Priority="Processing"
 Implemented="TRUE"
 Name="Report invalid or unknown position"
>
<ReqRef
 Id="6375b0de-0293-4d16-abdf-cb5f39a35143"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
>
</ReqRef><SubRules></SubRules>
<Conditions>
<RuleCondition
 Implemented="TRUE"
 NeedsRequirement="FALSE"
 Name="Report invalid or unknown position"
>
<PreConditions>
</PreConditions>
<Actions>
<Action>EURORADIO.PositionReport.SendSOMPositionReport()</Action><Action>THIS &lt;- HandleModeChange.StartOfMission.A34.WaitForRBCResponse</Action></Actions>
</RuleCondition></Conditions>
</Rule></Rules>
</StateMachine></State><State
 X="110"
 Y="60"
 Width="100"
 Height="50"
 Implemented="TRUE"
 Name="WaitForRBCResponse"
>
<ReqRef
 Id="55fef314-9384-40f6-ab17-5880cc15474b"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
>
</ReqRef><StateMachine
 InitialState=""
 Implemented="TRUE"
 NeedsRequirement="FALSE"
>
<Rules>
<Rule
 Priority="Processing"
 Implemented="TRUE"
 Name="Analyze RBC response"
>
<ReqRef
 Id="55fef314-9384-40f6-ab17-5880cc15474b"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
>
</ReqRef><SubRules></SubRules>
<Conditions>
<RuleCondition
 Implemented="TRUE"
 Name="RBC reports valid position"
>
<ReqRef
 Id="14a1f1dd-6b8c-4693-bfb6-d34586f029de"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
>
</ReqRef><PreConditions>
<PreCondition>Available ( EURORADIO.EuroradioMessageIn.SOM_POSITION_REPORT_CONFIRMED_BY_RBC )</PreCondition></PreConditions>
<Actions>
<Action>THIS &lt;- HandleModeChange.StartOfMission.A35</Action></Actions>
</RuleCondition><RuleCondition
 Implemented="TRUE"
 Name="RBC reports train accepted"
>
<ReqRef
 Id="605de9cc-4900-46af-9c8f-c8b14126696e"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
>
</ReqRef><PreConditions>
<PreCondition>Available ( EURORADIO.EuroradioMessageIn.TRAIN_ACCEPTED )</PreCondition></PreConditions>
<Actions>
<Action>THIS &lt;- HandleModeChange.StartOfMission.A23</Action></Actions>
</RuleCondition><RuleCondition
 Implemented="TRUE"
 Name="RBC reports train rejected"
>
<ReqRef
 Id="605de9cc-4900-46af-9c8f-c8b14126696e"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
>
</ReqRef><PreConditions>
<PreCondition>Available ( EURORADIO.EuroradioMessageIn.TRAIN_REJECTED )</PreCondition></PreConditions>
<Actions>
<Action>THIS &lt;- HandleModeChange.StartOfMission.A38</Action></Actions>
</RuleCondition></Conditions>
</Rule></Rules>
</StateMachine></State></States>
</StateMachine></State><State
 X="1400"
 Y="400"
 Width="100"
 Height="50"
 NeedsRequirement="FALSE"
 Name="A35"
>
<StateMachine
 InitialState=""
 Implemented="TRUE"
 NeedsRequirement="FALSE"
>
<ReqRef
 Id="36c2465e-e5e2-46dd-b60a-a01ee7032c51"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
>
</ReqRef><Rules>
<Rule
 Priority="Processing"
 Implemented="TRUE"
 Name="A35"
>
<ReqRef
 Id="4db9aa98-3d77-411b-8528-257702a16967"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
>
<Comment>The position report has been received while leaving D33</Comment>
</ReqRef><SubRules></SubRules>
<Conditions>
<RuleCondition
 Implemented="TRUE"
 NeedsRequirement="FALSE"
 Name="RBC informs that the reported position is valid"
>
<PreConditions>
</PreConditions>
<Actions>
<Action>THIS &lt;- HandleModeChange.StartOfMission.S10</Action><Action>Kernel.TrainPosition.Position.DataState &lt;- DataState.Valid</Action></Actions>
</RuleCondition></Conditions>
</Rule></Rules>
</StateMachine></State><State
 X="1140"
 Y="600"
 Width="100"
 Height="50"
 NeedsRequirement="FALSE"
 Name="A23"
>
<StateMachine
 InitialState=""
 Implemented="TRUE"
 NeedsRequirement="FALSE"
>
<Rules>
<Rule
 Priority="Processing"
 Implemented="TRUE"
 Name="A23"
>
<ReqRef
 Id="1494c427-572b-4bfa-bfea-2aa68994f26e"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
>
</ReqRef><Comment>The acceptation message has already been received in D22</Comment>
<SubRules></SubRules>
<Conditions>
<RuleCondition
 Implemented="TRUE"
 NeedsRequirement="FALSE"
 Name="A23"
>
<Comment></Comment>
<PreConditions>
</PreConditions>
<Actions>
<Action>THIS &lt;- HandleModeChange.StartOfMission.A24</Action></Actions>
</RuleCondition></Conditions>
</Rule></Rules>
</StateMachine></State><State
 X="1140"
 Y="690"
 Width="100"
 Height="50"
 NeedsRequirement="FALSE"
 Name="A24"
>
<StateMachine
 InitialState=""
 Implemented="TRUE"
 NeedsRequirement="FALSE"
>
<Rules>
<Rule
 Priority="Processing"
 Implemented="TRUE"
 Name="A24"
>
<ReqRef
 Id="b0a496b8-7273-4f49-8da4-0d91a260e5ba"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
>
</ReqRef><ReqRef
 Id="36c2465e-e5e2-46dd-b60a-a01ee7032c51"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
>
</ReqRef><SubRules></SubRules>
<Conditions>
<RuleCondition
 Implemented="TRUE"
 NeedsRequirement="FALSE"
 Name="Delete train position"
>
<PreConditions>
</PreConditions>
<Actions>
<Action>Kernel.TrainPosition.Position.DataState &lt;- DataState.Unknown</Action><Action>THIS &lt;- HandleModeChange.StartOfMission.S10</Action></Actions>
</RuleCondition></Conditions>
</Rule></Rules>
</StateMachine></State><State
 X="1400"
 Y="600"
 Width="100"
 Height="50"
 NeedsRequirement="FALSE"
 Name="A38"
>
<StateMachine
 InitialState=""
 Implemented="TRUE"
 NeedsRequirement="FALSE"
>
<Rules>
<Rule
 Priority="Processing"
 Implemented="TRUE"
 Name="A38"
>
<ReqRef
 Id="28f4ed40-a3e4-43f7-b9c4-0bdb249e27bd"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
>
</ReqRef><Comment>The message that indicates that the train is rejected by the RBC has been recevied in D22</Comment>
<SubRules></SubRules>
<Conditions>
<RuleCondition
 Implemented="TRUE"
 NeedsRequirement="FALSE"
 Name="RBC informs that it rejects the train "
>
<Comment></Comment>
<PreConditions>
</PreConditions>
<Actions>
<Action>THIS &lt;- HandleModeChange.StartOfMission.A39</Action></Actions>
</RuleCondition></Conditions>
</Rule></Rules>
</StateMachine></State><State
 X="1150"
 Y="780"
 Width="100"
 Height="50"
 NeedsRequirement="FALSE"
 Name="A40"
>
<StateMachine
 InitialState=""
 Implemented="TRUE"
 NeedsRequirement="FALSE"
>
<Rules>
<Rule
 Priority="Processing"
 Implemented="TRUE"
 Name="A40"
>
<ReqRef
 Id="eb19f005-dc60-4a70-82ac-33c7a4d74922"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
>
</ReqRef><SubRules></SubRules>
<Conditions>
<RuleCondition
 Implemented="TRUE"
 NeedsRequirement="FALSE"
 Name="Inform driver that the train is rejected"
>
<PreConditions>
</PreConditions>
<Actions>
<Action>DMI.MasterDMI().DisplayTrainIsRejected()</Action><Action>THIS &lt;- HandleModeChange.StartOfMission.S10</Action></Actions>
</RuleCondition></Conditions>
</Rule></Rules>
</StateMachine></State><State
 X="940"
 Y="430"
 Width="100"
 Height="50"
 NeedsRequirement="FALSE"
 Name="S12"
>
<StateMachine
 InitialState="RequestTrainData"
 Implemented="TRUE"
 NeedsRequirement="FALSE"
>
<States>
<State
 X="100"
 Y="70"
 Width="200"
 Height="50"
 Implemented="TRUE"
 Name="RequestTrainData"
>
<ReqRef
 Id="92ebef6e-9acb-432c-8a1c-932271343aec"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
>
</ReqRef><StateMachine
 InitialState=""
 Implemented="TRUE"
 NeedsRequirement="FALSE"
>
<Rules>
<Rule
 Priority="Processing"
 Implemented="TRUE"
 NeedsRequirement="FALSE"
 Name="RequestTrainData"
>
<ReqRef
 Id="92ebef6e-9acb-432c-8a1c-932271343aec"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
>
</ReqRef><SubRules></SubRules>
<Conditions>
<RuleCondition
 Implemented="TRUE"
 NeedsRequirement="FALSE"
 Name="RequestTrainData"
>
<PreConditions>
</PreConditions>
<Actions>
<Action>THIS &lt;- HandleModeChange.StartOfMission.S12.TrainDataRequested</Action><Action>DMI.MasterDMI().InitiateTrainDataRequest()</Action><Action>Kernel.TrainData.TrainData.DataState &lt;- DataState.Unknown</Action></Actions>
</RuleCondition></Conditions>
</Rule></Rules>
</StateMachine></State><State
 X="100"
 Y="200"
 Width="200"
 Height="50"
 Implemented="TRUE"
 Name="TrainDataRequested"
>
<ReqRef
 Id="47f6b9b0-cb96-4c74-a411-82cd5d418626"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
>
</ReqRef><StateMachine
 InitialState=""
 Implemented="TRUE"
 NeedsRequirement="FALSE"
>
<Rules>
<Rule
 Priority="Processing"
 Implemented="TRUE"
 NeedsRequirement="FALSE"
 Name="E16"
>
<ReqRef
 Id="47f6b9b0-cb96-4c74-a411-82cd5d418626"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
>
</ReqRef><SubRules></SubRules>
<Conditions>
<RuleCondition
 Implemented="TRUE"
 NeedsRequirement="FALSE"
 Name="E16"
>
<ReqRef
 Id="3fe59c76-6a3c-4709-8caa-9700dc06cd90"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
>
</ReqRef><ReqRef
 Id="57063dee-6c81-4684-9575-1957646474ab"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
>
</ReqRef><PreConditions>
<PreCondition>DMI.MasterDMI().In_TrainData.InputInformation.RequestStatus == Request.Response</PreCondition></PreConditions>
<Actions>
<Action>THIS &lt;- HandleModeChange.StartOfMission.D12</Action><Action>DMI.MasterDMI().In_TrainData.InputInformation.RequestStatus &lt;- Request.Disabled</Action><Action>Kernel.TrainData.TrainData.DataState &lt;- DataState.Valid</Action><Action>Kernel.TrainData.TrainData.Value &lt;- DMI.MasterDMI().In_TrainData.Data</Action></Actions>
</RuleCondition></Conditions>
</Rule></Rules>
</StateMachine></State></States>
</StateMachine></State><State
 X="930"
 Y="250"
 Width="100"
 Height="50"
 NeedsRequirement="FALSE"
 Name="D12"
>
<StateMachine
 InitialState=""
 Implemented="TRUE"
 NeedsRequirement="FALSE"
>
<Rules>
<Rule
 Priority="Processing"
 Implemented="TRUE"
 NeedsRequirement="FALSE"
 Name="D12"
>
<SubRules></SubRules>
<Conditions>
<RuleCondition
 Implemented="TRUE"
 NeedsRequirement="FALSE"
 Name="D12"
>
<PreConditions>
</PreConditions>
<Actions>
</Actions>
<SubRules>
<Rule
 Priority="Processing"
 Implemented="TRUE"
 Name="Train running number is unknown or invalid"
>
<ReqRef
 Id="885747bc-9ec2-456a-8a96-9c54af37246b"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
>
</ReqRef><SubRules></SubRules>
<Conditions>
<RuleCondition
 Implemented="TRUE"
 NeedsRequirement="FALSE"
 Name="Train running number is invalid or unknown"
>
<PreConditions>
<PreCondition>Kernel.TrainRunningNumber.DataState in [DataState.Unknown, DataState.Invalid]</PreCondition></PreConditions>
<Actions>
<Action>THIS &lt;- HandleModeChange.StartOfMission.S13</Action></Actions>
</RuleCondition></Conditions>
</Rule><Rule
 Priority="Processing"
 Implemented="TRUE"
 Name="Train running number is valid"
>
<ReqRef
 Id="eb92da4b-0617-4b51-a599-d01aebed2eb2"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
>
</ReqRef><SubRules></SubRules>
<Conditions>
<RuleCondition
 Implemented="TRUE"
 NeedsRequirement="FALSE"
 Name="Train running number is valid"
>
<PreConditions>
<PreCondition>Kernel.TrainRunningNumber.DataState == DataState.Valid</PreCondition></PreConditions>
<Actions>
<Action>THIS &lt;- HandleModeChange.StartOfMission.D10</Action></Actions>
</RuleCondition></Conditions>
</Rule></SubRules>
</RuleCondition></Conditions>
</Rule></Rules>
</StateMachine></State><State
 X="680"
 Y="250"
 Width="100"
 Height="50"
 NeedsRequirement="FALSE"
 Name="D10"
>
<StateMachine
 InitialState=""
 Implemented="TRUE"
 NeedsRequirement="FALSE"
>
<Rules>
<Rule
 Priority="Processing"
 Implemented="TRUE"
 NeedsRequirement="FALSE"
 Name="D10"
>
<SubRules></SubRules>
<Conditions>
<RuleCondition
 Implemented="TRUE"
 NeedsRequirement="FALSE"
 Name="D10"
>
<PreConditions>
</PreConditions>
<Actions>
</Actions>
<SubRules>
<Rule
 Priority="Processing"
 Implemented="TRUE"
 Name="Level2 or Level3"
>
<ReqRef
 Id="9e3ba5d0-8241-4037-a570-8b0cedd629f1"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
>
</ReqRef><SubRules></SubRules>
<Conditions>
<RuleCondition
 Implemented="TRUE"
 NeedsRequirement="FALSE"
 Name="Level2 or Level3"
>
<PreConditions>
<PreCondition>Kernel.Level.Value in [Level.L2, Level.L3]</PreCondition></PreConditions>
<Actions>
<Action>THIS &lt;- HandleModeChange.StartOfMission.D11</Action></Actions>
</RuleCondition></Conditions>
</Rule><Rule
 Priority="Processing"
 Implemented="TRUE"
 Name="Level0, Level1, Level NTC"
>
<ReqRef
 Id="4f058292-dd24-489c-bbc9-498c1d9a0e38"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
>
</ReqRef><SubRules></SubRules>
<Conditions>
<RuleCondition
 Implemented="TRUE"
 NeedsRequirement="FALSE"
 Name="Level0, Level1, Level NTC"
>
<PreConditions>
<PreCondition>Kernel.Level.Value in [Level.L0, Level.L1, Level.LNTC]</PreCondition></PreConditions>
<Actions>
<Action>THIS &lt;- HandleModeChange.StartOfMission.S20</Action></Actions>
</RuleCondition></Conditions>
</Rule></SubRules>
</RuleCondition></Conditions>
</Rule></Rules>
</StateMachine></State><State
 X="680"
 Y="430"
 Width="100"
 Height="50"
 NeedsRequirement="FALSE"
 Name="D11"
>
<StateMachine
 InitialState=""
 Implemented="TRUE"
 NeedsRequirement="FALSE"
>
<Rules>
<Rule
 Priority="Processing"
 Implemented="TRUE"
 Name="D11"
>
<ReqRef
 Id="a2f8c5d0-9029-4c1f-b5bf-fee1dca550f7"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
>
</ReqRef><SubRules></SubRules>
<Conditions>
<RuleCondition
 Implemented="TRUE"
 NeedsRequirement="FALSE"
 Name="Session is open"
>
<PreConditions>
<PreCondition>EURORADIO.HasActiveSession()</PreCondition></PreConditions>
<Actions>
<Action>THIS &lt;- HandleModeChange.StartOfMission.S11</Action></Actions>
</RuleCondition><RuleCondition
 Implemented="TRUE"
 NeedsRequirement="FALSE"
 Name="Session is not open"
>
<PreConditions>
</PreConditions>
<Actions>
<Action>THIS &lt;- HandleModeChange.StartOfMission.S10</Action></Actions>
</RuleCondition></Conditions>
</Rule></Rules>
</StateMachine></State><State
 X="110"
 Y="700"
 Width="100"
 Height="50"
 NeedsRequirement="FALSE"
 Name="S21"
>
<StateMachine
 InitialState="SendMARequest"
 Implemented="TRUE"
 NeedsRequirement="FALSE"
>
<States>
<State
 X="110"
 Y="190"
 Width="200"
 Height="50"
 Implemented="TRUE"
 Name="MARequestSent"
>
<ReqRef
 Id="ab41f6d7-19db-4d3e-95a6-8e15abbd4088"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
>
</ReqRef><ReqRef
 Id="d7eddae1-a7bf-4be3-8180-19f2e70ac2fd"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
>
</ReqRef><ReqRef
 Id="9055a6b1-6135-49e8-a779-622b3270c280"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
>
</ReqRef><StateMachine
 InitialState=""
 Implemented="TRUE"
 NeedsRequirement="FALSE"
>
<Rules>
<Rule
 Priority="Processing"
 Implemented="TRUE"
 NeedsRequirement="FALSE"
 Name="ReceiveRBCAnswer"
>
<SubRules></SubRules>
<Conditions>
<RuleCondition
 Implemented="TRUE"
 Name="E26: SR mode"
>
<ReqRef
 Id="ab41f6d7-19db-4d3e-95a6-8e15abbd4088"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
>
</ReqRef><PreConditions>
<PreCondition>SR.SRAuthorised()</PreCondition></PreConditions>
<Actions>
<Action>THIS &lt;- HandleModeChange.StartOfMission.S24</Action></Actions>
</RuleCondition><RuleCondition
 Implemented="TRUE"
 Name="E27: OS/LS/SH mode"
>
<ReqRef
 Id="d7eddae1-a7bf-4be3-8180-19f2e70ac2fd"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
>
</ReqRef><ReqRef
 Id="c7906978-32c5-4b29-bb48-bb2bb5d7190b"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
>
</ReqRef><ReqRef
 Id="91e483bb-c16e-4c94-8256-d3dcf2d0e0fb"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
>
</ReqRef><ReqRef
 Id="aa3f1b72-e48c-4c84-af17-db6bfe3c11b1"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
>
</ReqRef><PreConditions>
<PreCondition>MA.ModeProfile.ModeProfileIsApplicable()</PreCondition><PreCondition>Available ( MA.MA )</PreCondition></PreConditions>
<Actions>
<Action>THIS &lt;- HandleModeChange.StartOfMission.S25</Action></Actions>
</RuleCondition></Conditions>
</Rule></Rules>
</StateMachine></State><State
 X="110"
 Y="80"
 Width="200"
 Height="50"
 Implemented="TRUE"
 Name="SendMARequest"
>
<ReqRef
 Id="488e6e9f-80b1-48fe-9293-96f3d69e7bd9"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
>
</ReqRef><StateMachine
 InitialState=""
 Implemented="TRUE"
 NeedsRequirement="FALSE"
>
<Rules>
<Rule
 Priority="Processing"
 Implemented="TRUE"
 Name="Send MA request"
>
<ReqRef
 Id="488e6e9f-80b1-48fe-9293-96f3d69e7bd9"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
>
</ReqRef><SubRules></SubRules>
<Conditions>
<RuleCondition
 Implemented="TRUE"
 NeedsRequirement="FALSE"
 Name="Send MA request"
>
<PreConditions>
</PreConditions>
<Actions>
<Action>EURORADIO.SendMARequest ( aReason =&gt; Messages.Q_MARQSTREASON.Start_selected_by_driver )</Action><Action>THIS &lt;- HandleModeChange.StartOfMission.S21.MARequestSent</Action></Actions>
</RuleCondition></Conditions>
</Rule></Rules>
</StateMachine></State></States>
</StateMachine></State><State
 X="360"
 Y="880"
 Width="100"
 Height="50"
 NeedsRequirement="FALSE"
 Name="S22"
>
<StateMachine
 InitialState="DisplayDriverAckRequest"
 Implemented="TRUE"
 NeedsRequirement="FALSE"
>
<Rules>
<Rule
 Priority="Processing"
 Implemented="TRUE"
 Name="Display driver ack request"
>
<ReqRef
 Id="195e2b98-7877-4e7a-850f-134fe5fac373"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
>
</ReqRef><SubRules></SubRules>
<Conditions>
<RuleCondition
 Implemented="TRUE"
 NeedsRequirement="FALSE"
 Name="Display driver ack request"
>
<PreConditions>
<PreCondition>DMI.MasterDMI().In_AcknOfSNMode.InputInformation.RequestStatus == Request.Disabled</PreCondition></PreConditions>
<Actions>
<Action>DMI.MasterDMI().InitiateAcknOfSNMode(Kernel.NationalSystemId)</Action></Actions>
</RuleCondition></Conditions>
</Rule></Rules>
</StateMachine></State><State
 X="500"
 Y="880"
 Width="100"
 Height="50"
 NeedsRequirement="FALSE"
 Name="S23"
>
<StateMachine
 InitialState="DisplayDriverAckRequest"
 Implemented="TRUE"
 NeedsRequirement="FALSE"
>
<Rules>
<Rule
 Priority="Processing"
 Implemented="TRUE"
 Name="Display driver ack request"
>
<ReqRef
 Id="0bdf5b27-3f33-4831-9b62-9424f5bd350a"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
>
</ReqRef><SubRules></SubRules>
<Conditions>
<RuleCondition
 Implemented="TRUE"
 NeedsRequirement="FALSE"
 Name="Display driver ack request"
>
<PreConditions>
<PreCondition>DMI.MasterDMI().In_AcknOfUNMode.InputInformation.RequestStatus == Request.Disabled</PreCondition></PreConditions>
<Actions>
<Action>DMI.MasterDMI().InitiateAcknOfUNMode()</Action></Actions>
</RuleCondition></Conditions>
</Rule></Rules>
</StateMachine></State><State
 X="480"
 Y="50"
 Width="100"
 Height="50"
 NeedsRequirement="FALSE"
 Name="D7"
>
<StateMachine
 InitialState=""
 Implemented="TRUE"
 NeedsRequirement="FALSE"
>
<Rules>
<Rule
 Priority="Processing"
 Implemented="TRUE"
 NeedsRequirement="FALSE"
 Name="Terminal registered to network"
>
<ReqRef
 Id="65314800-5286-475e-b755-60e19e8cb01d"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
>
</ReqRef><SubRules></SubRules>
<Conditions>
<RuleCondition
 Implemented="TRUE"
 NeedsRequirement="FALSE"
 Name="Terminal registered to network"
>
<PreConditions>
<PreCondition>EURORADIO.MobileTerminalRegisteredToNetwork == Boolean.True</PreCondition></PreConditions>
<Actions>
<Action>THIS &lt;- HandleModeChange.StartOfMission.A31</Action></Actions>
</RuleCondition></Conditions>
</Rule><Rule
 Priority="Processing"
 Implemented="TRUE"
 NeedsRequirement="FALSE"
 Name="Terminal not registered to network"
>
<ReqRef
 Id="25c7ba02-1985-488d-b506-b24eef2b11b4"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
>
</ReqRef><SubRules></SubRules>
<Conditions>
<RuleCondition
 Implemented="TRUE"
 NeedsRequirement="FALSE"
 Name="Terminal not registered to network"
>
<PreConditions>
<PreCondition>EURORADIO.MobileTerminalRegisteredToNetwork == Boolean.False</PreCondition></PreConditions>
<Actions>
<Action>THIS &lt;- HandleModeChange.StartOfMission.A29</Action></Actions>
</RuleCondition></Conditions>
</Rule></Rules>
</StateMachine></State><State
 X="470"
 Y="310"
 Width="100"
 Height="50"
 NeedsRequirement="FALSE"
 Name="A29"
>
<StateMachine
 InitialState="InformDriver"
 Implemented="TRUE"
 NeedsRequirement="FALSE"
>
<Rules>
<Rule
 Priority="Processing"
 Implemented="TRUE"
 NeedsRequirement="FALSE"
 Name="A29"
>
<ReqRef
 Id="251b9c82-1dc9-4d99-8648-7a96b0526d5b"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
>
</ReqRef><SubRules></SubRules>
<Conditions>
<RuleCondition
 Implemented="TRUE"
 NeedsRequirement="FALSE"
 Name="Inform Driver equipment failed"
>
<PreConditions>
</PreConditions>
<Actions>
<Action>THIS &lt;- HandleModeChange.StartOfMission.S10</Action><Action>DMI.MasterDMI().DisplayRadioNetworkRegistrationFailed()</Action></Actions>
</RuleCondition></Conditions>
</Rule></Rules>
</StateMachine></State></States>
<Rules>
<Rule
 Priority="Processing"
 Implemented="TRUE"
 NeedsRequirement="FALSE"
 Name="End of SoM"
>
<ReqRef
 Id="4a239d79-5277-403e-b678-13601d0dec4e"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
>
</ReqRef><SubRules></SubRules>
<Conditions>
<RuleCondition
 Implemented="TRUE"
 NeedsRequirement="FALSE"
 Name="End of SoM"
>
<PreConditions>
</PreConditions>
<Actions>
</Actions>
<SubRules>
<Rule
 Priority="Processing"
 Implemented="TRUE"
 NeedsRequirement="FALSE"
 Name="Transition to a mode different from SB"
>
<SubRules></SubRules>
<Conditions>
<RuleCondition
 Implemented="TRUE"
 NeedsRequirement="FALSE"
 Name="Transition to a mode different from SB"
>
<PreConditions>
<PreCondition>Kernel.Mode != Default.Mode.SB</PreCondition></PreConditions>
<Actions>
<Action>HandleModeChange &lt;- HandleModeChange.NoProcedure</Action></Actions>
</RuleCondition></Conditions>
</Rule><Rule
 Priority="Processing"
 Implemented="TRUE"
 NeedsRequirement="FALSE"
 Name="Desk is closed"
>
<SubRules></SubRules>
<Conditions>
<RuleCondition
 Implemented="TRUE"
 Name="Desk is closed"
>
<ReqRef
 Id="608406fc-a153-4f2f-926d-023b26c6965b"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
>
</ReqRef><ReqRef
 Id="826a1ea7-693d-4abb-9475-72996312573e"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
>
</ReqRef><ReqRef
 Id="62447353-db71-4da7-ae7c-c93316af9ecd"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
>
</ReqRef><ReqRef
 Id="adc2c38e-7f74-4a2a-8cf4-5f8966540e5b"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
>
</ReqRef><ReqRef
 Id="e03c410e-3ebf-44e4-9c9e-bf1a71f283e8"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
>
</ReqRef><ReqRef
 Id="ed3df83d-be18-41a0-98f2-30f3879fdf96"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
>
</ReqRef><ReqRef
 Id="00f5d4b3-3539-4dee-a16b-8445554306d2"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
>
</ReqRef><ReqRef
 Id="5964ef59-e4aa-4ee3-bb6a-f1056fa3b656"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
>
</ReqRef><ReqRef
 Id="ab0153d8-5c2f-4e9a-b689-74694042a017"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
>
</ReqRef><ReqRef
 Id="fe20e6f0-0c95-465f-86a8-bfa2963de515"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
>
</ReqRef><ReqRef
 Id="83709cd5-3863-48a0-8264-34f65a482b28"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
>
</ReqRef><ReqRef
 Id="00ea92e0-e83e-498f-ae22-9c7c39f07162"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
>
</ReqRef><ReqRef
 Id="51668b83-2011-4cfe-b5d6-d55503b8349d"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
>
</ReqRef><ReqRef
 Id="d6a971ed-2255-4bd4-851b-bf9a20c6697c"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
>
</ReqRef><ReqRef
 Id="43f7bd10-27ce-491f-83f9-b80556c00900"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
>
</ReqRef><ReqRef
 Id="84ba275c-56ed-4a57-9fa7-83653416a2da"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
>
</ReqRef><ReqRef
 Id="804ec746-0da5-4425-83ca-696c55289bc0"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
>
</ReqRef><PreConditions>
<PreCondition>DMI.DriverClosedTheDesk(DMI.MasterDMI())</PreCondition></PreConditions>
<Actions>
<Action>EURORADIO.CloseRBCSession()</Action><Action>HandleModeChange &lt;- HandleModeChange.NoProcedure</Action><Action>HandlingOfAcceptedAndStoredInformation.DeskClosedDuringSoM &lt;- True</Action></Actions>
</RuleCondition></Conditions>
</Rule></SubRules>
</RuleCondition></Conditions>
</Rule><Rule
 Priority="Processing"
 Implemented="TRUE"
 Name="Loss of open session"
>
<ReqRef
 Id="0e26286f-b4f4-4ca9-82ab-e0db75aadf0b"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
>
</ReqRef><SubRules></SubRules>
<Conditions>
<RuleCondition
 Implemented="TRUE"
 NeedsRequirement="FALSE"
 Name="After D11"
>
<PreConditions>
<PreCondition>THIS in [ S11, S20, S21, S22, S23, S24, S25 ]</PreCondition><PreCondition>EURORADIO.SessionState != SessionState.Established</PreCondition><PreCondition>Kernel.Level.Value in [Level.L2, Level.L3]</PreCondition></PreConditions>
<Actions>
<Action>THIS &lt;- S10</Action></Actions>
</RuleCondition></Conditions>
</Rule><Rule
 Priority="Processing"
 Implemented="TRUE"
 Name="Allow override"
>
<ReqRef
 Id="4691efdb-b90a-4120-a11d-7598ae98c8c7"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
>
</ReqRef><ReqRef
 Id="2812be46-6d39-4894-be55-c728964a7c49"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
>
</ReqRef><SubRules></SubRules>
<Conditions>
<RuleCondition
 Implemented="TRUE"
 NeedsRequirement="FALSE"
 Name="Allow override for states S10 and S20"
>
<PreConditions>
<PreCondition>THIS in [S10, S20] </PreCondition><PreCondition>Kernel.TrainData.TrainData.DataState == DataState.Valid</PreCondition></PreConditions>
<Actions>
</Actions>
<SubRules>
<Rule
 Priority="Processing"
 Implemented="TRUE"
 NeedsRequirement="FALSE"
 Name="Allow override"
>
<SubRules></SubRules>
<Conditions>
<RuleCondition
 Implemented="TRUE"
 NeedsRequirement="FALSE"
 Name="Override not yet proposed to driver"
>
<PreConditions>
<PreCondition>DMI.MasterDMI().In_OverrideRequest.InputInformation.RequestStatus == Request.Disabled</PreCondition></PreConditions>
<Actions>
<Action>DMI.MasterDMI().InitiateOverrideRequest()</Action></Actions>
</RuleCondition></Conditions>
</Rule></SubRules>
</RuleCondition></Conditions>
</Rule><Rule
 Priority="Processing"
 Implemented="TRUE"
 Name="Allow reenter driver ID"
>
<ReqRef
 Id="c01d4cc9-6034-43bf-ba70-4d4fe10dffd9"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
>
</ReqRef><SubRules></SubRules>
<Conditions>
<RuleCondition
 Implemented="TRUE"
 NeedsRequirement="FALSE"
 Name="Allow reenter driver ID for states S10 and S20"
>
<PreConditions>
<PreCondition>THIS in [S10, S20] </PreCondition></PreConditions>
<Actions>
</Actions>
<SubRules>
<Rule
 Priority="Processing"
 Implemented="TRUE"
 NeedsRequirement="FALSE"
 Name="Allow Re-enter driver ID"
>
<SubRules></SubRules>
<Conditions>
<RuleCondition
 Implemented="TRUE"
 NeedsRequirement="FALSE"
 Name="Reenter driver ID not yet proposed to driver"
>
<PreConditions>
<PreCondition>DMI.MasterDMI().In_DriverId.InputInformation.RequestStatus == Request.Disabled</PreCondition></PreConditions>
<Actions>
<Action>DMI.MasterDMI().InitiateDriverIdRequest(
  Id =&gt; DriverId.Value, 
  Enter =&gt; True,
  ReValidate =&gt; False
)</Action></Actions>
</RuleCondition><RuleCondition
 Implemented="TRUE"
 NeedsRequirement="FALSE"
 Name="Driver selected to reenter its driver ID"
>
<PreConditions>
<PreCondition>DMI.MasterDMI().In_DriverId.InputInformation.RequestStatus == Request.Response</PreCondition></PreConditions>
<Actions>
<Action>DMI.MasterDMI().In_DriverId.InputInformation.RequestStatus &lt;- Request.Disabled</Action><Action>DriverId.Value &lt;- DMI.MasterDMI().In_DriverId.Id</Action></Actions>
</RuleCondition></Conditions>
</Rule></SubRules>
</RuleCondition></Conditions>
</Rule><Rule
 Priority="Processing"
 Implemented="TRUE"
 Name="Allow reenter train running number"
>
<ReqRef
 Id="b9721346-42ac-4a79-8f62-10d5ff6a5abb"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
>
</ReqRef><SubRules></SubRules>
<Conditions>
<RuleCondition
 Implemented="TRUE"
 NeedsRequirement="FALSE"
 Name="Allow reenter train running number for states S10 and S20"
>
<PreConditions>
<PreCondition>THIS in [S10, S20] </PreCondition></PreConditions>
<Actions>
</Actions>
<SubRules>
<Rule
 Priority="Processing"
 Implemented="TRUE"
 NeedsRequirement="FALSE"
 Name="Allow Re-enter train running number"
>
<SubRules></SubRules>
<Conditions>
<RuleCondition
 Implemented="TRUE"
 NeedsRequirement="FALSE"
 Name="Reenter train running number not yet proposed to driver"
>
<PreConditions>
<PreCondition>DMI.MasterDMI().In_TrainRunningNumber.InputInformation.RequestStatus == Request.Disabled</PreCondition></PreConditions>
<Actions>
<Action>DMI.MasterDMI().InitiateTrainRunningNumberRequest(
  Number =&gt; TrainRunningNumber.Value, 
  Enter =&gt; True,
  ReValidate =&gt; False
)</Action></Actions>
</RuleCondition><RuleCondition
 Implemented="TRUE"
 NeedsRequirement="FALSE"
 Name="Driver selected to reenter the train runnning number"
>
<PreConditions>
<PreCondition>DMI.MasterDMI().In_TrainRunningNumber.InputInformation.RequestStatus == Request.Response</PreCondition></PreConditions>
<Actions>
<Action>DMI.MasterDMI().In_TrainRunningNumber.InputInformation.RequestStatus &lt;- Request.Disabled</Action><Action>TrainRunningNumber.Value &lt;- DMI.MasterDMI().In_TrainRunningNumber.Number</Action></Actions>
</RuleCondition></Conditions>
</Rule></SubRules>
</RuleCondition></Conditions>
</Rule><Rule
 Priority="Processing"
 Implemented="TRUE"
 Name="Allow reenter level"
>
<ReqRef
 Id="1e7f3c89-d89b-4d31-b758-514c92ae3bf1"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
>
</ReqRef><SubRules></SubRules>
<Conditions>
<RuleCondition
 Implemented="TRUE"
 NeedsRequirement="FALSE"
 Name="Allow reenter level for states S10 and S20"
>
<PreConditions>
<PreCondition>THIS in [S10, S20] </PreCondition></PreConditions>
<Actions>
</Actions>
<SubRules>
<Rule
 Priority="Processing"
 Implemented="TRUE"
 NeedsRequirement="FALSE"
 Name="Allow Re-enter level"
>
<SubRules></SubRules>
<Conditions>
<RuleCondition
 Implemented="TRUE"
 NeedsRequirement="FALSE"
 Name="Reenter level not yet proposed to driver"
>
<PreConditions>
<PreCondition>DMI.MasterDMI().In_ErtmsEtcsLevelEntryRequest.InputInformation.RequestStatus == Request.Disabled</PreCondition></PreConditions>
<Actions>
<Action>DMI.MasterDMI().InitiateLevelEntryRequest()</Action></Actions>
</RuleCondition><RuleCondition
 Implemented="TRUE"
 NeedsRequirement="FALSE"
 Name="Driver selected to reenter the level"
>
<PreConditions>
<PreCondition>DMI.MasterDMI().In_ErtmsEtcsLevelEntryRequest.InputInformation.RequestStatus == Request.Response</PreCondition></PreConditions>
<Actions>
<Action>DMI.MasterDMI().In_ErtmsEtcsLevelEntryRequest.InputInformation.RequestStatus &lt;- Request.Disabled</Action><Action>THIS &lt;- S2</Action></Actions>
<SubRules>
<Rule
 Priority="Processing"
 Implemented="TRUE"
 Name="Handle change of level validity"
>
<ReqRef
 Id="0e06c751-a7a2-4c82-9441-dfc783509c2a"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
>
</ReqRef><SubRules></SubRules>
<Conditions>
<RuleCondition
 Implemented="TRUE"
 NeedsRequirement="FALSE"
 Name="Valid level"
>
<PreConditions>
<PreCondition>Level.DataState == DataState.Valid</PreCondition></PreConditions>
<Actions>
<Action>Level.DataState &lt;- DataState.Invalid</Action></Actions>
</RuleCondition></Conditions>
</Rule><Rule
 Priority="Processing"
 Implemented="TRUE"
 Name="Handle change of RBC ID / Phone number validity"
>
<ReqRef
 Id="0e06c751-a7a2-4c82-9441-dfc783509c2a"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
>
</ReqRef><SubRules></SubRules>
<Conditions>
<RuleCondition
 Implemented="TRUE"
 NeedsRequirement="FALSE"
 Name="Valid RBC ID / Phone number"
>
<PreConditions>
<PreCondition>EURORADIO.CurrentRadioSession.SessionInfo.DataState == DataState.Valid</PreCondition></PreConditions>
<Actions>
<Action>EURORADIO.CurrentRadioSession.SessionInfo.DataState &lt;- DataState.Invalid</Action></Actions>
</RuleCondition></Conditions>
</Rule></SubRules>
</RuleCondition></Conditions>
</Rule></SubRules>
</RuleCondition></Conditions>
</Rule></Rules>
</StateMachine></State><State
 X="320"
 Y="330"
 Width="500"
 Height="50"
 NeedsRequirement="FALSE"
 Name="TrainTrip"
>
<ReqRef
 Id="dc6e23b7-6b64-46ae-8eff-b7bc7d636a3a"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
>
</ReqRef><StateMachine
 InitialState="S010"
 NeedsRequirement="FALSE"
>
<States>
<State
 X="10"
 Y="10"
 Width="80"
 Height="40"
 Implemented="TRUE"
 Name="S010"
>
<ReqRef
 Id="7a800db1-0312-49df-8a67-3d61c0b8c37b"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
>
</ReqRef><StateMachine
 InitialState=""
 NeedsRequirement="FALSE"
>
<Rules>
<Rule
 Priority="Processing"
 Implemented="TRUE"
 Name="E015"
>
<ReqRef
 Id="7a800db1-0312-49df-8a67-3d61c0b8c37b"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
>
</ReqRef><SubRules></SubRules>
<Conditions>
<RuleCondition
 NeedsRequirement="FALSE"
 Name="E015"
>
<PreConditions>
</PreConditions>
<Actions>
<Action>THIS &lt;- HandleModeChange.TrainTrip.A025</Action></Actions>
</RuleCondition></Conditions>
</Rule></Rules>
</StateMachine></State><State
 X="170"
 Y="10"
 Width="80"
 Height="40"
 Implemented="TRUE"
 Name="A025"
>
<ReqRef
 Id="eb5aeb5a-ad87-4472-bf20-a249e1f525d2"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
>
</ReqRef><StateMachine
 InitialState=""
 NeedsRequirement="FALSE"
>
<Rules>
<Rule
 Priority="Processing"
 Implemented="TRUE"
 Verified="TRUE"
 Name="A025"
>
<ReqRef
 Id="eb5aeb5a-ad87-4472-bf20-a249e1f525d2"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
>
</ReqRef><SubRules></SubRules>
<Conditions>
<RuleCondition
 Implemented="TRUE"
 Verified="TRUE"
 NeedsRequirement="FALSE"
 Name="A025"
>
<PreConditions>
</PreConditions>
<Actions>
<Action>Kernel.Mode &lt;- Mode.TR</Action><Action>THIS &lt;- HandleModeChange.TrainTrip.D020</Action></Actions>
</RuleCondition></Conditions>
</Rule></Rules>
</StateMachine></State><State
 X="490"
 Y="10"
 Width="80"
 Height="40"
 Implemented="TRUE"
 NeedsRequirement="FALSE"
 Name="A030"
>
<ReqRef
 Id="21b9d8d4-21b1-4c6d-a127-d82c90e0fdd8"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
>
</ReqRef><StateMachine
 InitialState=""
 NeedsRequirement="FALSE"
>
<Rules>
<Rule
 Priority="Processing"
 Implemented="TRUE"
 Name="A030"
>
<ReqRef
 Id="570307dd-e817-45d9-b3d0-1400a19b04f2"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
>
</ReqRef><SubRules></SubRules>
<Conditions>
<RuleCondition
 Implemented="TRUE"
 Name="A030"
>
<PreConditions>
</PreConditions>
<Actions>
<Action>THIS &lt;- HandleModeChange.TrainTrip.A035</Action></Actions>
</RuleCondition></Conditions>
</Rule></Rules>
</StateMachine></State><State
 X="490"
 Y="90"
 Width="80"
 Height="40"
 Implemented="TRUE"
 Name="A035"
>
<ReqRef
 Id="9be8a6ae-9abe-4a16-8a19-f28a0581c994"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
>
</ReqRef><StateMachine
 InitialState=""
 Implemented="TRUE"
 NeedsRequirement="FALSE"
>
<Rules>
<Rule
 Priority="Processing"
 Implemented="TRUE"
 Name="A035"
>
<ReqRef
 Id="9be8a6ae-9abe-4a16-8a19-f28a0581c994"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
>
</ReqRef><SubRules></SubRules>
<Conditions>
<RuleCondition
 Implemented="TRUE"
 NeedsRequirement="FALSE"
 Name="A035"
>
<PreConditions>
</PreConditions>
<Actions>
<Action>THIS &lt;- HandleModeChange.TrainTrip.S050</Action><Action>MA.MA &lt;- EMPTY</Action><Action>TrackDescription.StaticSpeedProfile.SSP &lt;- []</Action><Action>TrackDescription.Gradient.Gradients &lt;- []</Action><Action>TrackDescription.AxleLoad.ASP.ALs &lt;- []</Action><Action>TrackDescription.PermittedBrakingDistance.SpeedRestrictionsProfile.SpeedRestrictions &lt;- []</Action><Action>TrackDescription.AdhesionFactors.AdhFactors &lt;- []</Action><Action>TrackDescription.ReversingArea.ReversingAreaProfile &lt;- EMPTY</Action></Actions>
</RuleCondition></Conditions>
</Rule></Rules>
</StateMachine></State><State
 X="490"
 Y="170"
 Width="80"
 Height="40"
 Implemented="TRUE"
 NeedsRequirement="FALSE"
 Name="S050"
>
<ReqRef
 Id="faeb30d5-16e6-44fb-95d1-4045678c6c60"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
>
</ReqRef><StateMachine
 InitialState=""
 NeedsRequirement="FALSE"
>
<Rules>
<Rule
 Priority="Processing"
 Implemented="TRUE"
 Name="E055"
>
<ReqRef
 Id="69bdfec5-14ae-43a8-9b36-15d441915044"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
>
</ReqRef><ReqRef
 Id="19c49a5f-d2e2-456a-847c-6d87a956a360"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
>
</ReqRef><ReqRef
 Id="5922076b-396c-4635-a3bc-dd00149b3647"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
>
</ReqRef><ReqRef
 Id="baa74e49-0452-49c0-a452-f75558625db1"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
>
</ReqRef><ReqRef
 Id="3d8929cd-3036-4ab6-a142-7e62115e9f72"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
>
</ReqRef><SubRules></SubRules>
<Conditions>
<RuleCondition
 NeedsRequirement="FALSE"
 Name="E055"
>
<PreConditions>
<PreCondition>Odometry.EstimatedSpeed == 0.0</PreCondition></PreConditions>
<Actions>
<Action>THIS &lt;- HandleModeChange.TrainTrip.S060</Action></Actions>
</RuleCondition></Conditions>
</Rule></Rules>
</StateMachine></State><State
 X="490"
 Y="250"
 Width="80"
 Height="40"
 Implemented="TRUE"
 NeedsRequirement="FALSE"
 Name="S060"
>
<ReqRef
 Id="0bae6856-8d5d-4916-83a0-b8fa4be991ae"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
>
</ReqRef><StateMachine
 InitialState="RequestDriverAck"
 NeedsRequirement="FALSE"
>
<ReqRef
 Id="0bae6856-8d5d-4916-83a0-b8fa4be991ae"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
>
</ReqRef><States>
<State
 X="30"
 Y="30"
 Width="110"
 Height="50"
 Implemented="TRUE"
 Name="RequestDriverAck"
>
<ReqRef
 Id="8df0e2ea-eb7f-40b5-b72c-11d3fc2ee7b4"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
>
</ReqRef><StateMachine
 InitialState=""
 NeedsRequirement="FALSE"
>
<Rules>
<Rule
 Priority="Processing"
 Implemented="TRUE"
 Verified="TRUE"
 Name="Request driver ack"
>
<ReqRef
 Id="8df0e2ea-eb7f-40b5-b72c-11d3fc2ee7b4"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
>
</ReqRef><SubRules></SubRules>
<Conditions>
<RuleCondition
 Implemented="TRUE"
 Verified="TRUE"
 NeedsRequirement="FALSE"
 Name="Request driver ack"
>
<PreConditions>
</PreConditions>
<Actions>
<Action>DMI.MasterDMI().InitiateAcknOfTrainTrip()</Action><Action>THIS &lt;- HandleModeChange.TrainTrip.S060.DriverAckRequested</Action></Actions>
</RuleCondition></Conditions>
</Rule></Rules>
</StateMachine></State><State
 X="30"
 Y="130"
 Width="110"
 Height="50"
 Implemented="TRUE"
 Name="DriverAckRequested"
>
<ReqRef
 Id="c08c4dd4-2d01-4cfc-ae12-f6e093ce97f9"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
>
</ReqRef><StateMachine
 InitialState=""
 NeedsRequirement="FALSE"
>
<Rules>
<Rule
 Priority="Processing"
 Implemented="TRUE"
 Verified="TRUE"
 Name="E065"
>
<ReqRef
 Id="c08c4dd4-2d01-4cfc-ae12-f6e093ce97f9"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
>
</ReqRef><ReqRef
 Id="19c49a5f-d2e2-456a-847c-6d87a956a360"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
>
</ReqRef><ReqRef
 Id="5922076b-396c-4635-a3bc-dd00149b3647"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
>
</ReqRef><ReqRef
 Id="baa74e49-0452-49c0-a452-f75558625db1"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
>
</ReqRef><ReqRef
 Id="3d8929cd-3036-4ab6-a142-7e62115e9f72"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
>
</ReqRef><SubRules></SubRules>
<Conditions>
<RuleCondition
 Implemented="TRUE"
 Verified="TRUE"
 NeedsRequirement="FALSE"
 Name="E065"
>
<PreConditions>
<PreCondition>DMI.MasterDMI().In_AcknOfTrainTrip.InputInformation.RequestStatus == Default.Request.Response</PreCondition></PreConditions>
<Actions>
<Action>DMI.MasterDMI().In_AcknOfTrainTrip.InputInformation.RequestStatus &lt;- Default.Request.Disabled</Action><Action>THIS &lt;- HandleModeChange.TrainTrip.D080</Action></Actions>
</RuleCondition></Conditions>
</Rule></Rules>
</StateMachine></State></States>
</StateMachine></State><State
 X="330"
 Y="330"
 Width="80"
 Height="40"
 Implemented="TRUE"
 NeedsRequirement="FALSE"
 Name="D080"
>
<ReqRef
 Id="9cef3130-290c-46a6-af7c-07e1df0ea3f3"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
>
</ReqRef><StateMachine
 InitialState=""
 NeedsRequirement="FALSE"
>
<Rules>
<Rule
 Priority="Processing"
 Implemented="TRUE"
 NeedsRequirement="FALSE"
 Name="D080"
>
<ReqRef
 Id="9cef3130-290c-46a6-af7c-07e1df0ea3f3"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
>
</ReqRef><SubRules></SubRules>
<Conditions>
<RuleCondition
 NeedsRequirement="FALSE"
 Name="D080"
>
<PreConditions>
</PreConditions>
<Actions>
</Actions>
<SubRules>
<Rule
 Priority="Processing"
 Implemented="TRUE"
 Verified="TRUE"
 Name="Level 1, 2, 3"
>
<ReqRef
 Id="7364d3c3-544e-4eea-adda-1d2b6461aaac"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
>
</ReqRef><ReqRef
 Id="3d8929cd-3036-4ab6-a142-7e62115e9f72"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
>
</ReqRef><SubRules></SubRules>
<Conditions>
<RuleCondition
 NeedsRequirement="FALSE"
 Name="Level 1, 2, 3"
>
<PreConditions>
<PreCondition>Kernel.Level.Value in [Level.L1, Level.L2, Level.L3]</PreCondition></PreConditions>
<Actions>
<Action>THIS &lt;- HandleModeChange.TrainTrip.A105</Action></Actions>
</RuleCondition></Conditions>
</Rule><Rule
 Priority="Processing"
 Implemented="TRUE"
 Verified="TRUE"
 Name="Level 0, NTC"
>
<ReqRef
 Id="20a77818-d458-4cc3-a579-79971189457e"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
>
</ReqRef><ReqRef
 Id="19c49a5f-d2e2-456a-847c-6d87a956a360"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
>
</ReqRef><SubRules></SubRules>
<Conditions>
<RuleCondition
 Implemented="TRUE"
 Verified="TRUE"
 NeedsRequirement="FALSE"
 Name="Level 0, NTC"
>
<PreConditions>
<PreCondition>Kernel.Level.Value in [Level.L0, Level.LNTC]</PreCondition></PreConditions>
<Actions>
<Action>THIS &lt;- HandleModeChange.TrainTrip.D085</Action></Actions>
</RuleCondition></Conditions>
</Rule></SubRules>
</RuleCondition></Conditions>
</Rule></Rules>
</StateMachine></State><State
 X="730"
 Y="500"
 Width="80"
 Height="40"
 Implemented="TRUE"
 Name="A150"
>
<ReqRef
 Id="c66d9504-6139-4a0b-b411-04a20973be2e"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
>
</ReqRef><StateMachine
 InitialState=""
 NeedsRequirement="FALSE"
>
</StateMachine></State><State
 X="330"
 Y="420"
 Width="80"
 Height="40"
 Implemented="TRUE"
 Name="A105"
>
<ReqRef
 Id="458c52b6-b128-424e-b29e-05cf4a057a91"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
>
</ReqRef><StateMachine
 InitialState=""
 NeedsRequirement="FALSE"
>
</StateMachine></State><State
 X="330"
 Y="500"
 Width="80"
 Height="40"
 Implemented="TRUE"
 NeedsRequirement="FALSE"
 Name="D110"
>
<ReqRef
 Id="4985c0db-75ef-450e-b5e1-2b9b3de3503e"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
>
</ReqRef><StateMachine
 InitialState=""
 NeedsRequirement="FALSE"
>
<Rules>
<Rule
 Priority="Processing"
 Implemented="TRUE"
 Verified="TRUE"
 NeedsRequirement="FALSE"
 Name="D110"
>
<ReqRef
 Id="4985c0db-75ef-450e-b5e1-2b9b3de3503e"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
>
</ReqRef><SubRules></SubRules>
<Conditions>
<RuleCondition
 Implemented="TRUE"
 Verified="TRUE"
 NeedsRequirement="FALSE"
 Name="D110"
>
<PreConditions>
</PreConditions>
<Actions>
</Actions>
<SubRules>
<Rule
 Priority="Processing"
 Implemented="TRUE"
 Verified="TRUE"
 Name="Level 1"
>
<ReqRef
 Id="781ffdfe-d64c-4a5b-8759-e92aa9394b13"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
>
</ReqRef><SubRules></SubRules>
<Conditions>
<RuleCondition
 Implemented="TRUE"
 Verified="TRUE"
 NeedsRequirement="FALSE"
 Name="Level 1"
>
<PreConditions>
<PreCondition>Kernel.Level.Value == Level.L1</PreCondition></PreConditions>
<Actions>
<Action>THIS &lt;- HandleModeChange.TrainTrip.S140</Action></Actions>
</RuleCondition></Conditions>
</Rule><Rule
 Priority="Processing"
 Implemented="TRUE"
 Verified="TRUE"
 Name="Level 2, Level 3"
>
<ReqRef
 Id="7c644530-c702-4fd9-a9a1-a73f90a2bdf8"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
>
</ReqRef><SubRules></SubRules>
<Conditions>
<RuleCondition
 Implemented="TRUE"
 Verified="TRUE"
 NeedsRequirement="FALSE"
 Name="Level 2, Level 3"
>
<PreConditions>
<PreCondition>Kernel.Level.Value in [Level.L2, Level.L3]</PreCondition></PreConditions>
<Actions>
<Action>THIS &lt;- HandleModeChange.TrainTrip.A115</Action></Actions>
</RuleCondition></Conditions>
</Rule></SubRules>
</RuleCondition></Conditions>
</Rule></Rules>
</StateMachine></State><State
 X="20"
 Y="500"
 Width="80"
 Height="40"
 Implemented="TRUE"
 NeedsRequirement="FALSE"
 Name="S120"
>
<ReqRef
 Id="d66a7056-b379-4f68-842b-d83ef90bf4bc"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
>
</ReqRef><StateMachine
 InitialState=""
 NeedsRequirement="FALSE"
>
<Rules>
<Rule
 Priority="Processing"
 Implemented="TRUE"
 Verified="TRUE"
 NeedsRequirement="FALSE"
 Name="S120"
>
<SubRules></SubRules>
<Conditions>
<RuleCondition
 Implemented="TRUE"
 Name="E125"
>
<ReqRef
 Id="03e81fdf-21c4-4670-be56-584116d35c0d"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
>
</ReqRef><PreConditions>
<PreCondition>Available ( EURORADIO.EuroradioMessageIn.RECOGNITION_OF_EXIT_FROM_TRIP_MODE )</PreCondition></PreConditions>
<Actions>
<Action>THIS &lt;- HandleModeChange.TrainTrip.D130</Action></Actions>
</RuleCondition><RuleCondition
 Implemented="TRUE"
 Name="No order received, maximum number of requests reached"
>
<ReqRef
 Id="c4552b18-7c1b-4778-a53c-1272271bb392"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
>
</ReqRef><ReqRef
 Id="84b1f605-4265-4bb8-965e-ea245a16e6d0"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
>
</ReqRef><PreConditions>
<PreCondition>EURORADIO.PositionReport.LastPositionReport.Time + EURORADIO.TimeBeforeMessageRepetition &gt;= CurrentTime</PreCondition><PreCondition>EURORADIO.PositionReport.NumberOfSentReportRepetitions == 3</PreCondition></PreConditions>
<Actions>
<Action>EURORADIO.CloseRBCSession()</Action><Action>EURORADIO.PositionReport.NumberOfSentReportRepetitions &lt;- 0</Action></Actions>
</RuleCondition><RuleCondition
 Implemented="TRUE"
 Name="No order received, a new request can be sent"
>
<ReqRef
 Id="f4b1a027-643a-48c1-a840-1735e19ae661"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
>
</ReqRef><PreConditions>
<PreCondition>EURORADIO.PositionReport.LastPositionReport.Time + EURORADIO.TimeBeforeMessageRepetition &gt;= CurrentTime</PreCondition><PreCondition>EURORADIO.HasActiveSession()</PreCondition></PreConditions>
<Actions>
<Action>EURORADIO.PositionReport.SendPositionReport()</Action><Action>EURORADIO.PositionReport.NumberOfSentReportRepetitions &lt;- EURORADIO.PositionReport.NumberOfSentReportRepetitions + 1</Action><Action>EURORADIO.PositionReport.LastPositionReport.Time &lt;- CurrentTime</Action></Actions>
</RuleCondition></Conditions>
</Rule></Rules>
</StateMachine></State><State
 X="20"
 Y="580"
 Width="80"
 Height="40"
 Implemented="TRUE"
 NeedsRequirement="FALSE"
 Name="D130"
>
<ReqRef
 Id="a2fcf695-a724-4a9e-850c-aa791e0d2403"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
>
</ReqRef><StateMachine
 InitialState=""
 NeedsRequirement="FALSE"
>
<Rules>
<Rule
 Priority="Processing"
 Implemented="TRUE"
 Verified="TRUE"
 NeedsRequirement="FALSE"
 Name="D130"
>
<ReqRef
 Id="a2fcf695-a724-4a9e-850c-aa791e0d2403"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
>
</ReqRef><SubRules></SubRules>
<Conditions>
<RuleCondition
 Implemented="TRUE"
 Verified="TRUE"
 NeedsRequirement="FALSE"
 Name="D130"
>
<PreConditions>
</PreConditions>
<Actions>
</Actions>
<SubRules>
<Rule
 Priority="Processing"
 Implemented="TRUE"
 Verified="TRUE"
 Name="No emergency stop"
>
<ReqRef
 Id="3991569f-53ae-4c85-ae2e-22ccdea80ca5"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
>
</ReqRef><SubRules></SubRules>
<Conditions>
<RuleCondition
 Implemented="TRUE"
 Verified="TRUE"
 NeedsRequirement="FALSE"
 Name="No emergency stop"
>
<PreConditions>
<PreCondition>Kernel.EmergencyStops == []</PreCondition></PreConditions>
<Actions>
<Action>THIS &lt;- HandleModeChange.TrainTrip.S140</Action></Actions>
</RuleCondition></Conditions>
</Rule><Rule
 Priority="Processing"
 Implemented="TRUE"
 Verified="TRUE"
 Name="Pending emergency stop"
>
<ReqRef
 Id="0bf0ab9d-7ce3-46d5-a104-d59dbbcf8e4a"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
>
</ReqRef><SubRules></SubRules>
<Conditions>
<RuleCondition
 Implemented="TRUE"
 Verified="TRUE"
 NeedsRequirement="FALSE"
 Name="Pending emergency stop"
>
<PreConditions>
<PreCondition>Kernel.EmergencyStops != []</PreCondition></PreConditions>
<Actions>
<Action>THIS &lt;- HandleModeChange.TrainTrip.S130</Action></Actions>
</RuleCondition></Conditions>
</Rule></SubRules>
</RuleCondition></Conditions>
</Rule></Rules>
</StateMachine></State><State
 X="260"
 Y="580"
 Width="80"
 Height="40"
 Implemented="TRUE"
 NeedsRequirement="FALSE"
 Name="S130"
>
<ReqRef
 Id="a2fcf695-a724-4a9e-850c-aa791e0d2403"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
>
</ReqRef><StateMachine
 InitialState=""
 NeedsRequirement="FALSE"
>
<Rules>
<Rule
 Priority="Processing"
 Implemented="TRUE"
 Verified="TRUE"
 Name="E135"
>
<ReqRef
 Id="d0b99ecd-1992-4aae-9fe2-9ea2b7873292"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
>
</ReqRef><SubRules></SubRules>
<Conditions>
<RuleCondition
 Implemented="TRUE"
 Verified="TRUE"
 NeedsRequirement="FALSE"
 Name="E135"
>
<PreConditions>
<PreCondition>Kernel.EmergencyStops == []</PreCondition></PreConditions>
<Actions>
<Action>THIS &lt;- HandleModeChange.TrainTrip.S140</Action></Actions>
</RuleCondition></Conditions>
</Rule></Rules>
</StateMachine></State><State
 X="20"
 Y="660"
 Width="400"
 Height="40"
 Implemented="TRUE"
 NeedsRequirement="FALSE"
 Name="S140"
>
<ReqRef
 Id="05d0b794-9069-41fe-b9f7-f7085e32d535"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
>
</ReqRef><StateMachine
 InitialState="RequestDriverSelection"
 NeedsRequirement="FALSE"
>
<ReqRef
 Id="05d0b794-9069-41fe-b9f7-f7085e32d535"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
>
</ReqRef><States>
<State
 X="100"
 Y="60"
 Width="100"
 Height="50"
 Implemented="TRUE"
 Name="RequestDriverSelection"
>
<ReqRef
 Id="dfdc851b-0f50-470e-8cbc-c7d0ae012b9d"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
>
</ReqRef><StateMachine
 InitialState=""
 NeedsRequirement="FALSE"
>
<Rules>
<Rule
 Priority="Processing"
 Implemented="TRUE"
 Verified="TRUE"
 Name="RequestDriverSelection"
>
<ReqRef
 Id="dfdc851b-0f50-470e-8cbc-c7d0ae012b9d"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
>
</ReqRef><SubRules></SubRules>
<Conditions>
<RuleCondition
 Implemented="TRUE"
 Verified="TRUE"
 NeedsRequirement="FALSE"
 Name="RequestDriverSelection"
>
<PreConditions>
</PreConditions>
<Actions>
<Action>THIS &lt;- HandleModeChange.TrainTrip.S140.DriverSelectionRequested</Action><Action>DMI.MasterDMI().InitiateShuntingRequest()</Action></Actions>
<SubRules>
<Rule
 Priority="Processing"
 Implemented="TRUE"
 Verified="TRUE"
 Name="Valid train data"
>
<ReqRef
 Id="9f33f81f-8311-4e08-b43d-80816d35a690"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
>
</ReqRef><SubRules></SubRules>
<Conditions>
<RuleCondition
 Implemented="TRUE"
 Verified="TRUE"
 NeedsRequirement="FALSE"
 Name="Valid Train data"
>
<PreConditions>
<PreCondition>Kernel.TrainData.TrainData.DataState == DataState.Valid</PreCondition></PreConditions>
<Actions>
<Action>DMI.MasterDMI().InitiateStartRequest()</Action></Actions>
</RuleCondition></Conditions>
</Rule></SubRules>
</RuleCondition></Conditions>
</Rule></Rules>
</StateMachine></State><State
 X="100"
 Y="180"
 Width="100"
 Height="50"
 Implemented="TRUE"
 Name="DriverSelectionRequested"
>
<ReqRef
 Id="8ed924c8-449b-49e3-b97b-9d9bac584781"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
>
</ReqRef><ReqRef
 Id="a4b631e4-9069-4f56-b3ab-340f8ec68908"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
>
</ReqRef><ReqRef
 Id="e4f509dd-fcb0-4205-8e6b-921aae447bca"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
>
</ReqRef><StateMachine
 InitialState=""
 NeedsRequirement="FALSE"
>
<Rules>
<Rule
 Priority="Processing"
 Implemented="TRUE"
 NeedsRequirement="FALSE"
 Name="Driver has answered"
>
<ReqRef
 Id="6114bfb9-055b-4951-93ea-75d62541b167"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
>
</ReqRef><SubRules></SubRules>
<Conditions>
<RuleCondition
 NeedsRequirement="FALSE"
 Name="Driver has answered"
>
<PreConditions>
</PreConditions>
<Actions>
</Actions>
<SubRules>
<Rule
 Priority="Processing"
 Implemented="TRUE"
 Verified="TRUE"
 Name="E155"
>
<ReqRef
 Id="a4b631e4-9069-4f56-b3ab-340f8ec68908"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
>
</ReqRef><SubRules></SubRules>
<Conditions>
<RuleCondition
 Implemented="TRUE"
 Verified="TRUE"
 NeedsRequirement="FALSE"
 Name="E155"
>
<PreConditions>
<PreCondition>DMI.MasterDMI().In_Start.InputInformation.RequestStatus == Request.Response</PreCondition><PreCondition>Kernel.Level.Value in [Level.L2, Level.L3]</PreCondition></PreConditions>
<Actions>
<Action>THIS &lt;- HandleModeChange.TrainTrip.S150</Action><Action>DMI.MasterDMI().In_Start.InputInformation.RequestStatus &lt;- Request.Disabled</Action><Action>DMI.MasterDMI().In_ShuntingRequest.InputInformation.RequestStatus &lt;- Request.Disabled</Action></Actions>
</RuleCondition></Conditions>
</Rule><Rule
 Priority="Processing"
 Implemented="TRUE"
 Verified="TRUE"
 Name="E150"
>
<ReqRef
 Id="8ed924c8-449b-49e3-b97b-9d9bac584781"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
>
</ReqRef><SubRules></SubRules>
<Conditions>
<RuleCondition
 Implemented="TRUE"
 Verified="TRUE"
 NeedsRequirement="FALSE"
 Name="E150"
>
<PreConditions>
<PreCondition>Kernel.Level.Value == Level.L1</PreCondition><PreCondition>DMI.MasterDMI().In_Start.InputInformation.RequestStatus == Request.Response</PreCondition></PreConditions>
<Actions>
<Action>THIS &lt;- HandleModeChange.TrainTrip.S160</Action><Action>DMI.MasterDMI().In_Start.InputInformation.RequestStatus &lt;- Request.Disabled</Action><Action>DMI.MasterDMI().In_ShuntingRequest.InputInformation.RequestStatus &lt;- Request.Disabled</Action></Actions>
</RuleCondition></Conditions>
</Rule><Rule
 Priority="Processing"
 Implemented="TRUE"
 Verified="TRUE"
 Name="E145"
>
<ReqRef
 Id="e4f509dd-fcb0-4205-8e6b-921aae447bca"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
>
</ReqRef><ReqRef
 Id="3d01d017-72ad-4ae6-888e-a4e7f0241a33"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
>
</ReqRef><ReqRef
 Id="a7dfd21b-40f7-4ea2-8604-1cb1cf5a2a65"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
>
</ReqRef><SubRules></SubRules>
<Conditions>
<RuleCondition
 Implemented="TRUE"
 Verified="TRUE"
 NeedsRequirement="FALSE"
 Name="E145: Shunting selected by driver"
>
<PreConditions>
<PreCondition>DMI.MasterDMI().In_ShuntingRequest.InputInformation.RequestStatus == Request.Response</PreCondition></PreConditions>
<Actions>
<Action>Kernel.HandleModeChange &lt;- HandleModeChange.ShuntingInitiatedByDriver</Action><Action>DMI.MasterDMI().In_ShuntingRequest.InputInformation.RequestStatus &lt;- Request.Disabled</Action><Action>DMI.MasterDMI().In_Start.InputInformation.RequestStatus &lt;- Request.Disabled</Action></Actions>
</RuleCondition></Conditions>
</Rule></SubRules>
</RuleCondition></Conditions>
</Rule></Rules>
</StateMachine></State></States>
</StateMachine></State><State
 X="340"
 Y="740"
 Width="80"
 Height="40"
 Implemented="TRUE"
 NeedsRequirement="FALSE"
 Name="S150"
>
<ReqRef
 Id="79973edc-1e31-489a-82f9-9c7f7b894493"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
>
</ReqRef><StateMachine
 InitialState="SendMARequest"
 NeedsRequirement="FALSE"
>
<ReqRef
 Id="79973edc-1e31-489a-82f9-9c7f7b894493"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
>
</ReqRef><States>
<State
 X="110"
 Y="60"
 Width="100"
 Height="50"
 Implemented="TRUE"
 Name="SendMARequest"
>
<ReqRef
 Id="b490aef9-44fa-4043-a130-aa1a33c15e0c"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
>
</ReqRef><StateMachine
 InitialState=""
 NeedsRequirement="FALSE"
>
<Rules>
<Rule
 Priority="Processing"
 Implemented="TRUE"
 Verified="TRUE"
 Name="Send MA request"
>
<ReqRef
 Id="b490aef9-44fa-4043-a130-aa1a33c15e0c"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
>
</ReqRef><SubRules></SubRules>
<Conditions>
<RuleCondition
 Implemented="TRUE"
 Verified="TRUE"
 NeedsRequirement="FALSE"
 Name="Send MA request"
>
<PreConditions>
</PreConditions>
<Actions>
<Action>EURORADIO.SendMARequest ( aReason =&gt; Messages.Q_MARQSTREASON.Start_selected_by_driver )</Action><Action>THIS &lt;- HandleModeChange.TrainTrip.S150.MARequestSent</Action></Actions>
</RuleCondition></Conditions>
</Rule></Rules>
</StateMachine></State><State
 X="110"
 Y="160"
 Width="100"
 Height="50"
 Implemented="TRUE"
 Name="MARequestSent"
>
<ReqRef
 Id="a54617b4-525f-472d-9e22-cd671feaee3b"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
>
</ReqRef><ReqRef
 Id="c5dfe3ed-6a84-4f83-a94d-2d2859aa42fc"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
>
</ReqRef><ReqRef
 Id="6ed812c6-f711-468a-8c0f-0843bf2384be"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
>
</ReqRef><StateMachine
 InitialState=""
 NeedsRequirement="FALSE"
>
<Rules>
<Rule
 Priority="Processing"
 Implemented="TRUE"
 Verified="TRUE"
 NeedsRequirement="FALSE"
 Name="MARequestSent"
>
<SubRules></SubRules>
<Conditions>
<RuleCondition
 Implemented="TRUE"
 Name="E26"
>
<ReqRef
 Id="a54617b4-525f-472d-9e22-cd671feaee3b"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
>
</ReqRef><PreConditions>
<PreCondition>SR.SRAuthorised()</PreCondition></PreConditions>
<Actions>
<Action>Kernel.HandleModeChange &lt;- HandleModeChange.TrainTrip.S160</Action></Actions>
</RuleCondition><RuleCondition
 Implemented="TRUE"
 Name="E175"
>
<ReqRef
 Id="c5dfe3ed-6a84-4f83-a94d-2d2859aa42fc"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
>
</ReqRef><ReqRef
 Id="c7906978-32c5-4b29-bb48-bb2bb5d7190b"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
>
</ReqRef><ReqRef
 Id="91e483bb-c16e-4c94-8256-d3dcf2d0e0fb"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
>
</ReqRef><ReqRef
 Id="aa3f1b72-e48c-4c84-af17-db6bfe3c11b1"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
>
</ReqRef><PreConditions>
<PreCondition>Available ( MA.MA )</PreCondition><PreCondition>MA.ModeProfile.ModeProfileIsApplicable()</PreCondition></PreConditions>
<Actions>
<Action>Kernel.HandleModeChange &lt;- HandleModeChange.TrainTrip.S170</Action></Actions>
</RuleCondition></Conditions>
</Rule></Rules>
</StateMachine></State></States>
</StateMachine></State><State
 X="20"
 Y="820"
 Width="80"
 Height="40"
 Implemented="TRUE"
 NeedsRequirement="FALSE"
 Name="S160"
>
<ReqRef
 Id="d20ca54f-b973-4b49-9923-a3eaf4c2d07e"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
>
</ReqRef><ReqRef
 Id="d20ca54f-b973-4b49-9923-a3eaf4c2d07e"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
>
</ReqRef><StateMachine
 InitialState="RequestDriverAck"
 NeedsRequirement="FALSE"
>
<ReqRef
 Id="d20ca54f-b973-4b49-9923-a3eaf4c2d07e"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
>
</ReqRef><Rules>
<Rule
 Priority="Processing"
 Implemented="TRUE"
 Name="Request driver ack"
>
<ReqRef
 Id="da598b1f-9157-4e9a-8888-5cfc296ac2a3"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
>
</ReqRef><ReqRef
 Id="67821ca1-b727-417d-bd7e-38b05017910c"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
>
</ReqRef><SubRules></SubRules>
<Conditions>
<RuleCondition
 Implemented="TRUE"
 NeedsRequirement="FALSE"
 Name="Request driver ack"
>
<PreConditions>
<PreCondition>DMI.MasterDMI().In_AcknOfSRMode.InputInformation.RequestStatus == Request.Disabled</PreCondition></PreConditions>
<Actions>
<Action>DMI.MasterDMI().InitiateAcknOfSRMode()</Action></Actions>
</RuleCondition></Conditions>
</Rule></Rules>
</StateMachine></State><State
 X="340"
 Y="820"
 Width="80"
 Height="40"
 Implemented="TRUE"
 NeedsRequirement="FALSE"
 Name="S170"
>
<ReqRef
 Id="607f77f2-dd97-4b41-bd65-683352dfdfc9"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
>
</ReqRef><ReqRef
 Id="607f77f2-dd97-4b41-bd65-683352dfdfc9"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
>
</ReqRef><StateMachine
 InitialState="RequestDriverAck"
 NeedsRequirement="FALSE"
>
<States>
<State
 X="70"
 Y="50"
 Width="110"
 Height="50"
 Implemented="TRUE"
 Name="RequestDriverAck"
>
<ReqRef
 Id="24c07d7e-5637-4dfa-8ad0-b07595006ea3"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
>
</ReqRef><StateMachine
 InitialState=""
 NeedsRequirement="FALSE"
>
<Rules>
<Rule
 Priority="Processing"
 Implemented="TRUE"
 Verified="TRUE"
 Name="Request driver ack"
>
<ReqRef
 Id="24c07d7e-5637-4dfa-8ad0-b07595006ea3"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
>
</ReqRef><ReqRef
 Id="7a006572-8e75-4e6b-be5e-b096bfa7f855"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
>
</ReqRef><SubRules></SubRules>
<Conditions>
<RuleCondition
 Implemented="TRUE"
 Verified="TRUE"
 NeedsRequirement="FALSE"
 Name="Request driver ack"
>
<PreConditions>
</PreConditions>
<Actions>
<Action>THIS &lt;- HandleModeChange.TrainTrip.S170.DriverAckRequested</Action></Actions>
<SubRules>
<Rule
 Priority="Processing"
 Implemented="TRUE"
 Verified="TRUE"
 NeedsRequirement="FALSE"
 Name="Request ack for OS"
>
<ReqRef
 Id="c7906978-32c5-4b29-bb48-bb2bb5d7190b"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
>
</ReqRef><ReqRef
 Id="4ebd4845-9d08-4721-8788-6991ab66d3eb"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
>
</ReqRef><SubRules></SubRules>
<Conditions>
<RuleCondition
 Implemented="TRUE"
 Verified="TRUE"
 NeedsRequirement="FALSE"
 Name="OS"
>
<PreConditions>
<PreCondition>MA.ModeProfile.CurrentMode() == Default.Mode.ModeProfile.OS</PreCondition></PreConditions>
<Actions>
<Action>DMI.MasterDMI().InitiateAcknOfOSMode()</Action></Actions>
</RuleCondition></Conditions>
</Rule><Rule
 Priority="Processing"
 Implemented="TRUE"
 Verified="TRUE"
 NeedsRequirement="FALSE"
 Name="Request ack for LS"
>
<ReqRef
 Id="aa3f1b72-e48c-4c84-af17-db6bfe3c11b1"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
>
</ReqRef><ReqRef
 Id="8c7eb4ff-2716-4d9f-a6f2-bd52aacc416b"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
>
</ReqRef><SubRules></SubRules>
<Conditions>
<RuleCondition
 Implemented="TRUE"
 Verified="TRUE"
 NeedsRequirement="FALSE"
 Name="LS"
>
<PreConditions>
<PreCondition>MA.ModeProfile.CurrentMode() == Default.Mode.ModeProfile.LS</PreCondition></PreConditions>
<Actions>
<Action>DMI.MasterDMI().InitiateAcknOfLSMode()</Action></Actions>
</RuleCondition></Conditions>
</Rule><Rule
 Priority="Processing"
 Implemented="TRUE"
 Verified="TRUE"
 NeedsRequirement="FALSE"
 Name="Request ack for SH"
>
<ReqRef
 Id="91e483bb-c16e-4c94-8256-d3dcf2d0e0fb"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
>
</ReqRef><ReqRef
 Id="39ae88ad-20ca-43d1-8c3f-5f7172777b6e"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
>
</ReqRef><SubRules></SubRules>
<Conditions>
<RuleCondition
 Implemented="TRUE"
 Verified="TRUE"
 NeedsRequirement="FALSE"
 Name="SH"
>
<PreConditions>
<PreCondition>MA.ModeProfile.CurrentMode() == Default.Mode.ModeProfile.SH</PreCondition></PreConditions>
<Actions>
<Action>DMI.MasterDMI().InitiateAcknOfSHMode()</Action></Actions>
</RuleCondition></Conditions>
</Rule></SubRules>
</RuleCondition></Conditions>
</Rule></Rules>
</StateMachine></State><State
 X="70"
 Y="160"
 Width="110"
 Height="50"
 Implemented="TRUE"
 Name="DriverAckRequested"
>
<ReqRef
 Id="af1d067a-7dc9-45dc-9ce8-dcbd2fe36941"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
>
</ReqRef><StateMachine
 InitialState=""
 NeedsRequirement="FALSE"
>
</StateMachine></State></States>
</StateMachine></State><State
 X="330"
 Y="10"
 Width="80"
 Height="40"
 Implemented="TRUE"
 NeedsRequirement="FALSE"
 Name="D020"
>
<ReqRef
 Id="708eaaf1-04ba-46c2-aa01-47d2ddd20b8d"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
>
</ReqRef><StateMachine
 InitialState=""
 NeedsRequirement="FALSE"
>
<Rules>
<Rule
 Priority="Processing"
 Implemented="TRUE"
 NeedsRequirement="FALSE"
 Name="D020"
>
<ReqRef
 Id="708eaaf1-04ba-46c2-aa01-47d2ddd20b8d"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
>
</ReqRef><SubRules></SubRules>
<Conditions>
<RuleCondition
 Implemented="TRUE"
 Verified="TRUE"
 NeedsRequirement="FALSE"
 Name="D020"
>
<PreConditions>
</PreConditions>
<Actions>
</Actions>
<SubRules>
<Rule
 Priority="Processing"
 Implemented="TRUE"
 Verified="TRUE"
 Name="Level 0, 1, NTC"
>
<ReqRef
 Id="4ab254b6-4bbf-464c-9170-75905b61adcb"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
>
</ReqRef><SubRules></SubRules>
<Conditions>
<RuleCondition
 NeedsRequirement="FALSE"
 Name="Level 0, 1, NTC"
>
<PreConditions>
<PreCondition>Kernel.Level.Value in [Level.L0, Level.L1, Level.LNTC]</PreCondition></PreConditions>
<Actions>
<Action>THIS &lt;- HandleModeChange.TrainTrip.A035</Action></Actions>
</RuleCondition></Conditions>
</Rule><Rule
 Priority="Processing"
 Implemented="TRUE"
 Verified="TRUE"
 Name="Level 2, 3"
>
<ReqRef
 Id="34640ebd-9a29-4cc2-9bfc-c11616a1eac8"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
>
</ReqRef><SubRules></SubRules>
<Conditions>
<RuleCondition
 NeedsRequirement="FALSE"
 Name="Level 2, 3"
>
<PreConditions>
<PreCondition>Kernel.Level.Value in [Level.L2, Level.L3]</PreCondition></PreConditions>
<Actions>
<Action>THIS &lt;- HandleModeChange.TrainTrip.A030</Action></Actions>
</RuleCondition></Conditions>
</Rule></SubRules>
</RuleCondition></Conditions>
</Rule></Rules>
</StateMachine></State><State
 X="650"
 Y="330"
 Width="80"
 Height="40"
 Implemented="TRUE"
 NeedsRequirement="FALSE"
 Name="D085"
>
<ReqRef
 Id="8a4ca614-e3bc-4aa4-ad33-afce78253af2"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
>
</ReqRef><StateMachine
 InitialState=""
 NeedsRequirement="FALSE"
>
<Rules>
<Rule
 Priority="Processing"
 Implemented="TRUE"
 Verified="TRUE"
 NeedsRequirement="FALSE"
 Name="D085"
>
<ReqRef
 Id="8a4ca614-e3bc-4aa4-ad33-afce78253af2"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
>
</ReqRef><SubRules></SubRules>
<Conditions>
<RuleCondition
 Implemented="TRUE"
 Verified="TRUE"
 NeedsRequirement="FALSE"
 Name="D085"
>
<PreConditions>
</PreConditions>
<Actions>
</Actions>
<SubRules>
<Rule
 Priority="Processing"
 Implemented="TRUE"
 Verified="TRUE"
 Name="Valid data"
>
<ReqRef
 Id="ad21fa53-6db5-4bf3-af13-6d90389c9bdb"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
>
</ReqRef><ReqRef
 Id="5922076b-396c-4635-a3bc-dd00149b3647"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
>
</ReqRef><ReqRef
 Id="baa74e49-0452-49c0-a452-f75558625db1"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
>
</ReqRef><SubRules></SubRules>
<Conditions>
<RuleCondition
 Implemented="TRUE"
 Verified="TRUE"
 NeedsRequirement="FALSE"
 Name="Valid data"
>
<PreConditions>
<PreCondition>Kernel.TrainData.TrainData.DataState == Default.DataState.Valid</PreCondition></PreConditions>
<Actions>
<Action>THIS &lt;- HandleModeChange.TrainTrip.D090</Action></Actions>
</RuleCondition></Conditions>
</Rule><Rule
 Priority="Processing"
 Implemented="TRUE"
 Verified="TRUE"
 Name="No valid data"
>
<ReqRef
 Id="68b4d5bd-48d1-4e00-b91b-a41dc51986be"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
>
</ReqRef><ReqRef
 Id="19c49a5f-d2e2-456a-847c-6d87a956a360"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
>
</ReqRef><SubRules></SubRules>
<Conditions>
<RuleCondition
 Implemented="TRUE"
 Verified="TRUE"
 NeedsRequirement="FALSE"
 Name="No valid data"
>
<PreConditions>
<PreCondition>Kernel.TrainData.TrainData.DataState != Default.DataState.Valid</PreCondition></PreConditions>
<Actions>
<Action>THIS &lt;- HandleModeChange.TrainTrip.A140</Action></Actions>
</RuleCondition></Conditions>
</Rule></SubRules>
</RuleCondition></Conditions>
</Rule></Rules>
</StateMachine></State><State
 X="650"
 Y="410"
 Width="80"
 Height="40"
 Implemented="TRUE"
 NeedsRequirement="FALSE"
 Name="D090"
>
<ReqRef
 Id="2aca08c0-e2e9-4d56-93f8-31654c48705d"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
>
</ReqRef><StateMachine
 InitialState=""
 NeedsRequirement="FALSE"
>
<Rules>
<Rule
 Priority="Processing"
 Implemented="TRUE"
 Verified="TRUE"
 NeedsRequirement="FALSE"
 Name="D090"
>
<ReqRef
 Id="2aca08c0-e2e9-4d56-93f8-31654c48705d"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
>
</ReqRef><SubRules></SubRules>
<Conditions>
<RuleCondition
 Implemented="TRUE"
 Verified="TRUE"
 NeedsRequirement="FALSE"
 Name="D090"
>
<PreConditions>
</PreConditions>
<Actions>
</Actions>
<SubRules>
<Rule
 Priority="Processing"
 Implemented="TRUE"
 Verified="TRUE"
 Name="Level 0"
>
<ReqRef
 Id="e7bdf687-c54b-4d32-a5c6-00cd7f6bd21e"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
>
</ReqRef><ReqRef
 Id="5922076b-396c-4635-a3bc-dd00149b3647"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
>
</ReqRef><SubRules></SubRules>
<Conditions>
<RuleCondition
 Implemented="TRUE"
 Verified="TRUE"
 NeedsRequirement="FALSE"
 Name="Level 0"
>
<PreConditions>
<PreCondition>Kernel.Level.Value == Default.Level.L0</PreCondition></PreConditions>
<Actions>
<Action>THIS &lt;- HandleModeChange.TrainTrip.A145</Action></Actions>
</RuleCondition></Conditions>
</Rule><Rule
 Priority="Processing"
 Implemented="TRUE"
 Verified="TRUE"
 Name="Level NTC"
>
<ReqRef
 Id="602dc383-9138-403a-ac74-13e9cb2047eb"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
>
</ReqRef><ReqRef
 Id="baa74e49-0452-49c0-a452-f75558625db1"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
>
</ReqRef><SubRules></SubRules>
<Conditions>
<RuleCondition
 Implemented="TRUE"
 Verified="TRUE"
 NeedsRequirement="FALSE"
 Name="Level NTC"
>
<PreConditions>
<PreCondition>Kernel.Level.Value == Default.Level.LNTC</PreCondition></PreConditions>
<Actions>
<Action>THIS &lt;- HandleModeChange.TrainTrip.A150</Action></Actions>
</RuleCondition></Conditions>
</Rule></SubRules>
</RuleCondition></Conditions>
</Rule></Rules>
</StateMachine></State><State
 X="650"
 Y="250"
 Width="80"
 Height="40"
 Implemented="TRUE"
 Name="A140"
>
<ReqRef
 Id="97a651d7-2517-48ce-8d06-d2c205c7cc1d"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
>
</ReqRef><StateMachine
 InitialState=""
 NeedsRequirement="FALSE"
>
</StateMachine></State><State
 X="570"
 Y="500"
 Width="80"
 Height="40"
 Implemented="TRUE"
 Name="A145"
>
<ReqRef
 Id="ad5e8878-4a8a-4a39-9072-970084488dfa"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
>
</ReqRef><StateMachine
 InitialState=""
 NeedsRequirement="FALSE"
>
</StateMachine></State><State
 X="20"
 Y="420"
 Width="80"
 Height="40"
 Implemented="TRUE"
 NeedsRequirement="FALSE"
 Name="A115"
>
<ReqRef
 Id="9e235c11-59a2-4259-80f0-b5b1a76e3673"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
>
</ReqRef><StateMachine
 InitialState=""
 NeedsRequirement="FALSE"
>
<Rules>
<Rule
 Priority="Processing"
 Implemented="TRUE"
 Verified="TRUE"
 Name="A115"
>
<ReqRef
 Id="b1fe97fd-7b59-47e6-b2b5-b1ae367f3a0c"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
>
</ReqRef><SubRules></SubRules>
<Conditions>
<RuleCondition
 Implemented="TRUE"
 Verified="TRUE"
 NeedsRequirement="FALSE"
 Name="A115"
>
<PreConditions>
</PreConditions>
<Actions>
<Action>THIS &lt;- HandleModeChange.TrainTrip.S120</Action></Actions>
</RuleCondition></Conditions>
</Rule></Rules>
</StateMachine></State></States>
<Rules>
<Rule
 Priority="Processing"
 Implemented="TRUE"
 Name="RBC session is lost"
>
<ReqRef
 Id="988a3e55-0b0a-467b-a0e7-398bad5bf268"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
>
</ReqRef><SubRules></SubRules>
<Conditions>
<RuleCondition
 Implemented="TRUE"
 Name="RBC session is lost"
>
<PreConditions>
<PreCondition>Kernel.Level.Value in [Level.L2, Level.L3]</PreCondition><PreCondition>NOT EURORADIO.HasActiveSession()</PreCondition><PreCondition>Mode == Mode.PT</PreCondition></PreConditions>
<Actions>
<Action>DMI.MasterDMI().InitiateOverrideRequest()</Action></Actions>
</RuleCondition></Conditions>
</Rule></Rules>
</StateMachine></State><State
 X="30"
 Y="160"
 Width="380"
 Height="50"
 Implemented="TRUE"
 NeedsRequirement="FALSE"
 Name="ShuntingInitiatedByDriver"
>
<StateMachine
 InitialState="S0"
 NeedsRequirement="FALSE"
>
<ReqRef
 Id="20733b5e-b944-4ff3-ba02-861e2acb6911"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
>
</ReqRef><States>
<State
 X="60"
 Y="180"
 Width="100"
 Height="50"
 Implemented="TRUE"
 NeedsRequirement="FALSE"
 Name="D020"
>
<StateMachine
 InitialState=""
 Implemented="TRUE"
 NeedsRequirement="FALSE"
>
<Rules>
<Rule
 Priority="Processing"
 Implemented="TRUE"
 NeedsRequirement="FALSE"
 Name="D020"
>
<SubRules></SubRules>
<Conditions>
<RuleCondition
 Implemented="TRUE"
 Name="Level 0, 1 or NTC"
>
<ReqRef
 Id="e890e98d-15ce-46e7-ba5f-e5a0c704d832"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
>
</ReqRef><PreConditions>
<PreCondition>Level.Value in [Level.L0, Level.L1, Level.LNTC]</PreCondition></PreConditions>
<Actions>
<Action>THIS &lt;- ShuntingInitiatedByDriver.A050</Action></Actions>
</RuleCondition><RuleCondition
 Implemented="TRUE"
 Name="Level 2 or 3"
>
<ReqRef
 Id="42a7e2ab-4f12-4436-8a10-d922ea35b779"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
>
</ReqRef><PreConditions>
<PreCondition>Level.Value in [Level.L2, Level.L3]</PreCondition></PreConditions>
<Actions>
<Action>THIS &lt;- ShuntingInitiatedByDriver.A045</Action></Actions>
</RuleCondition></Conditions>
</Rule></Rules>
</StateMachine></State><State
 X="60"
 Y="310"
 Width="100"
 Height="50"
 Implemented="TRUE"
 Name="A050"
>
<ReqRef
 Id="21984b69-0068-4a67-b99c-ffceb9070f60"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
>
</ReqRef><StateMachine
 InitialState=""
 Implemented="TRUE"
 NeedsRequirement="FALSE"
>
<Rules>
<Rule
 Priority="Processing"
 Implemented="TRUE"
 Name="A050"
>
<ReqRef
 Id="122422ab-96f8-41c0-9965-09ccffc8b79f"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
>
</ReqRef><ReqRef
 Id="0df24273-c216-4ef5-8d1d-23e83f6d6c2d"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
>
</ReqRef><SubRules></SubRules>
<Conditions>
<RuleCondition
 Implemented="TRUE"
 NeedsRequirement="FALSE"
 Name="Transition to SH mode"
>
<PreConditions>
</PreConditions>
<Actions>
<Action>THIS &lt;- HandleModeChange.ShuntingInitiatedByDriver.D040</Action></Actions>
<SubRules>
<Rule
 Priority="Processing"
 Implemented="TRUE"
 Name="Handle new balises"
>
<ReqRef
 Id="21984b69-0068-4a67-b99c-ffceb9070f60"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
>
</ReqRef><SubRules></SubRules>
<Conditions>
<RuleCondition
 Implemented="TRUE"
 NeedsRequirement="FALSE"
 Name="New list of balises received"
>
<PreConditions>
<PreCondition>Available ( FIRST_IN EURORADIO.EuroradioMessageIn.SH_AUTHORISED.Sequence1 | Available ( X.LIST_OF_BALISES_FOR_SH_AREA ) )</PreCondition></PreConditions>
<Actions>
<Action>Shunting.HandleNewListOfBaliseGroups ( ( FIRST_IN EURORADIO.EuroradioMessageIn.SH_AUTHORISED.Sequence1 | Available ( X.LIST_OF_BALISES_FOR_SH_AREA ) ).LIST_OF_BALISES_FOR_SH_AREA )</Action></Actions>
</RuleCondition><RuleCondition
 Implemented="TRUE"
 NeedsRequirement="FALSE"
 Name="Balises not received"
>
<PreConditions>
</PreConditions>
<Actions>
<Action>Kernel.Shunting.BaliseGroupsForShArea &lt;- []</Action></Actions>
</RuleCondition></Conditions>
</Rule></SubRules>
</RuleCondition></Conditions>
</Rule></Rules>
</StateMachine></State><State
 X="360"
 Y="180"
 Width="100"
 Height="50"
 Implemented="TRUE"
 Name="A045"
>
<ReqRef
 Id="457bd04c-8b77-4ecc-b5ec-c4dbce5c1e53"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
>
</ReqRef><Comment></Comment>
<StateMachine
 InitialState=""
 Implemented="TRUE"
 NeedsRequirement="FALSE"
>
<Rules>
<Rule
 Priority="Processing"
 Implemented="TRUE"
 Name="A045"
>
<ReqRef
 Id="457bd04c-8b77-4ecc-b5ec-c4dbce5c1e53"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
>
</ReqRef><ReqRef
 Id="3e2e1297-75d8-4cb1-86a6-44e815a1d9cf"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
>
</ReqRef><ReqRef
 Id="58b99381-a184-4b10-8c25-d125705b5194"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
>
</ReqRef><ReqRef
 Id="1b8d900f-c280-48ab-867c-7a40ffdaaea3"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
>
</ReqRef><SubRules></SubRules>
<Conditions>
<RuleCondition
 Implemented="TRUE"
 NeedsRequirement="FALSE"
 Name="Send Request for Shunting"
>
<PreConditions>
</PreConditions>
<Actions>
<Action>THIS &lt;- HandleModeChange.ShuntingInitiatedByDriver.S050</Action><Action>EURORADIO.SendRequestForShunting()</Action><Action>Shunting.NumberOfSentRequestRepetitions &lt;- 0</Action><Action>Shunting.TimeOfTheLastSentRequest &lt;- CurrentTime</Action></Actions>
</RuleCondition></Conditions>
</Rule></Rules>
</StateMachine></State><State
 X="360"
 Y="310"
 Width="100"
 Height="50"
 Implemented="TRUE"
 Name="S050"
>
<ReqRef
 Id="431525e9-6114-43ef-a6c4-f75462a54f16"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
>
</ReqRef><StateMachine
 InitialState=""
 Implemented="TRUE"
 NeedsRequirement="FALSE"
>
<Rules>
<Rule
 Priority="UpdateINTERNAL"
 Implemented="TRUE"
 Name="S050"
>
<ReqRef
 Id="431525e9-6114-43ef-a6c4-f75462a54f16"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
>
</ReqRef><SubRules></SubRules>
<Conditions>
<RuleCondition
 Implemented="TRUE"
 Name="E090: SH authorised"
>
<ReqRef
 Id="61faae76-f226-4744-a4a6-06512a75b891"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
>
</ReqRef><PreConditions>
<PreCondition>Available ( EURORADIO.EuroradioMessageIn.SH_AUTHORISED )</PreCondition></PreConditions>
<Actions>
<Action>THIS &lt;- HandleModeChange.ShuntingInitiatedByDriver.A050</Action></Actions>
</RuleCondition><RuleCondition
 Implemented="TRUE"
 Name="E215: SH refused"
>
<ReqRef
 Id="f966dba5-db59-4c31-b423-6ec37205dcf2"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
>
</ReqRef><PreConditions>
<PreCondition>Available ( EURORADIO.EuroradioMessageIn.SH_REFUSED )</PreCondition></PreConditions>
<Actions>
<Action>THIS &lt;- HandleModeChange.ShuntingInitiatedByDriver.A220</Action></Actions>
</RuleCondition><RuleCondition
 Implemented="TRUE"
 Name="No answer, maximum number of requests reached"
>
<ReqRef
 Id="1b8d900f-c280-48ab-867c-7a40ffdaaea3"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
>
</ReqRef><Comment></Comment>
<PreConditions>
<PreCondition>Shunting.TimeOfTheLastSentRequest + EURORADIO.TimeBeforeMessageRepetition &lt;= CurrentTime</PreCondition><PreCondition>Shunting.NumberOfSentRequestRepetitions == 3</PreCondition></PreConditions>
<Actions>
<Action>DMI.MasterDMI().DisplayShuntingRequestNotAnsweredByRbc()</Action><Action>EURORADIO.CloseRBCSession()</Action></Actions>
</RuleCondition><RuleCondition
 Implemented="TRUE"
 Name="No answer, a new request can be sent"
>
<ReqRef
 Id="58b99381-a184-4b10-8c25-d125705b5194"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
>
</ReqRef><PreConditions>
<PreCondition>Shunting.TimeOfTheLastSentRequest + EURORADIO.TimeBeforeMessageRepetition &lt;= CurrentTime</PreCondition><PreCondition>EURORADIO.HasActiveSession()</PreCondition></PreConditions>
<Actions>
<Action>EURORADIO.SendRequestForShunting()</Action><Action>Shunting.NumberOfSentRequestRepetitions &lt;- Shunting.NumberOfSentRequestRepetitions + 1</Action><Action>Shunting.TimeOfTheLastSentRequest &lt;- CurrentTime</Action></Actions>
</RuleCondition><RuleCondition
 Implemented="TRUE"
 Name="No answer, no communication session"
>
<ReqRef
 Id="24ae765e-d289-46fa-a044-79cf087add58"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
>
</ReqRef><PreConditions>
<PreCondition>EURORADIO.NoSession()</PreCondition></PreConditions>
<Actions>
<Action>THIS &lt;- HandleModeChange.Override</Action></Actions>
</RuleCondition></Conditions>
</Rule></Rules>
</StateMachine></State><State
 X="660"
 Y="240"
 Width="100"
 Height="50"
 Implemented="TRUE"
 Name="A220"
>
<ReqRef
 Id="ff9286d9-70ab-48f9-8f38-21024af06e76"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
>
</ReqRef><StateMachine
 InitialState=""
 Implemented="TRUE"
 NeedsRequirement="FALSE"
>
<Rules>
<Rule
 Priority="Processing"
 Implemented="TRUE"
 Name="A220"
>
<ReqRef
 Id="ff9286d9-70ab-48f9-8f38-21024af06e76"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
>
</ReqRef><SubRules></SubRules>
<Conditions>
<RuleCondition
 Implemented="TRUE"
 NeedsRequirement="FALSE"
 Name="E13: Inform driver SH refused"
>
<PreConditions>
</PreConditions>
<Actions>
<Action>DMI.MasterDMI().DisplayShuntingRefusedByRbc()</Action></Actions>
<SubRules>
<Rule
 Priority="Processing"
 Implemented="TRUE"
 Name="Post action"
>
<SubRules></SubRules>
<Conditions>
<RuleCondition
 Implemented="TRUE"
 Name="E13: Shunting refused"
>
<ReqRef
 Id="2e9f9917-e8f9-49b1-89ca-a25dc8ef2e05"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
>
</ReqRef><ReqRef
 Id="d973b79d-a502-4a1d-bb38-c759e6101d62"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
>
</ReqRef><PreConditions>
<PreCondition>Kernel.Mode == Mode.SB</PreCondition></PreConditions>
<Actions>
<Action>THIS &lt;- HandleModeChange.StartOfMission.S10</Action></Actions>
</RuleCondition><RuleCondition
 Implemented="TRUE"
 Name="E165: Shunting refused"
>
<ReqRef
 Id="e4f509dd-fcb0-4205-8e6b-921aae447bca"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
>
</ReqRef><PreConditions>
<PreCondition>Kernel.Mode == Mode.PT</PreCondition></PreConditions>
<Actions>
<Action>THIS &lt;- HandleModeChange.TrainTrip.S140</Action></Actions>
</RuleCondition><RuleCondition
 Implemented="TRUE"
 Name="End procedure"
>
<ReqRef
 Id="209690fa-85f2-4338-98b6-c636b00a1007"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
>
</ReqRef><PreConditions>
</PreConditions>
<Actions>
<Action>THIS &lt;- HandleModeChange.NoProcedure</Action></Actions>
</RuleCondition></Conditions>
</Rule></SubRules>
</RuleCondition></Conditions>
</Rule></Rules>
</StateMachine></State><State
 X="60"
 Y="440"
 Width="100"
 Height="50"
 Implemented="TRUE"
 NeedsRequirement="FALSE"
 Name="D040"
>
<StateMachine
 InitialState=""
 Implemented="TRUE"
 NeedsRequirement="FALSE"
>
<Rules>
<Rule
 Priority="Processing"
 Implemented="TRUE"
 NeedsRequirement="FALSE"
 Name="D040"
>
<SubRules></SubRules>
<Conditions>
<RuleCondition
 Implemented="TRUE"
 Name="Mission is on-going"
>
<ReqRef
 Id="5aeb9959-1698-4ea4-a60e-da2bb3797ccf"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
>
</ReqRef><PreConditions>
<PreCondition>MissionIsOnGoing</PreCondition></PreConditions>
<Actions>
<Action>THIS &lt;- ShuntingInitiatedByDriver.A100</Action></Actions>
</RuleCondition><RuleCondition
 Implemented="TRUE"
 Name="No on-going mission"
>
<ReqRef
 Id="68435f48-b3c4-4b8d-ae9d-1d5a4a33dd0b"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
>
</ReqRef><PreConditions>
<PreCondition>NOT MissionIsOnGoing</PreCondition></PreConditions>
<Actions>
<Action>THIS &lt;- ShuntingInitiatedByDriver.D080</Action></Actions>
</RuleCondition></Conditions>
</Rule></Rules>
</StateMachine></State><State
 X="660"
 Y="570"
 Width="100"
 Height="50"
 Implemented="TRUE"
 Name="S100"
>
<ReqRef
 Id="8a2197b0-8bfc-49a1-a13f-20909b2be98c"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
>
</ReqRef><Comment></Comment>
<StateMachine
 InitialState=""
 Implemented="TRUE"
 NeedsRequirement="FALSE"
>
<Rules>
<Rule
 Priority="Processing"
 Implemented="TRUE"
 Name="S100"
>
<ReqRef
 Id="8a2197b0-8bfc-49a1-a13f-20909b2be98c"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
>
</ReqRef><ReqRef
 Id="dd7c262e-fb20-4039-bbc5-e87aeac2d131"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
>
</ReqRef><SubRules></SubRules>
<Conditions>
<RuleCondition
 Implemented="TRUE"
 NeedsRequirement="FALSE"
 Name="E055: RBC order to terminate session"
>
<PreConditions>
<PreCondition>Available ( EURORADIO.EuroradioMessageIn.ACKNOWLEDGEMENT_OF_TERMINATION_OF_A_COMMUNICATION_SESSION )</PreCondition></PreConditions>
<Actions>
<Action>THIS &lt;- HandleModeChange.ShuntingInitiatedByDriver.A115</Action></Actions>
</RuleCondition><RuleCondition
 Implemented="TRUE"
 Name="No order received, maximum number of requests reached"
>
<ReqRef
 Id="0df24273-c216-4ef5-8d1d-23e83f6d6c2d"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
>
</ReqRef><ReqRef
 Id="c4552b18-7c1b-4778-a53c-1272271bb392"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
>
</ReqRef><PreConditions>
<PreCondition>EURORADIO.PositionReport.LastPositionReport.Time + EURORADIO.TimeBeforeMessageRepetition &gt;= CurrentTime</PreCondition><PreCondition>EURORADIO.PositionReport.NumberOfSentReportRepetitions == 3</PreCondition></PreConditions>
<Actions>
<Action>EURORADIO.CloseRBCSession()</Action><Action>THIS &lt;- HandleModeChange.NoProcedure</Action><Action>EURORADIO.PositionReport.NumberOfSentReportRepetitions &lt;- 0</Action></Actions>
</RuleCondition><RuleCondition
 Implemented="TRUE"
 Name="No order received, a new request can be sent"
>
<ReqRef
 Id="60acc0ca-e056-4297-ae12-7f37389323d3"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
>
</ReqRef><PreConditions>
<PreCondition>EURORADIO.PositionReport.LastPositionReport.Time + EURORADIO.TimeBeforeMessageRepetition &gt;= CurrentTime</PreCondition><PreCondition>EURORADIO.HasActiveSession()</PreCondition></PreConditions>
<Actions>
<Action>EURORADIO.PositionReport.SendPositionReport()</Action><Action>EURORADIO.PositionReport.NumberOfSentReportRepetitions &lt;- EURORADIO.PositionReport.NumberOfSentReportRepetitions + 1</Action><Action>EURORADIO.PositionReport.LastPositionReport.Time &lt;- CurrentTime</Action></Actions>
</RuleCondition></Conditions>
</Rule></Rules>
</StateMachine></State><State
 X="360"
 Y="570"
 Width="100"
 Height="50"
 Implemented="TRUE"
 Name="A115"
>
<ReqRef
 Id="27f88b30-f620-4d1c-aae4-860de3b3a7df"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
>
</ReqRef><StateMachine
 InitialState=""
 Implemented="TRUE"
 NeedsRequirement="FALSE"
>
<Rules>
<Rule
 Priority="Processing"
 Implemented="TRUE"
 Name="A115"
>
<ReqRef
 Id="27f88b30-f620-4d1c-aae4-860de3b3a7df"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
>
</ReqRef><ReqRef
 Id="29c239c8-dea5-47f0-9916-581993980f9f"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
>
</ReqRef><SubRules></SubRules>
<Conditions>
<RuleCondition
 Implemented="TRUE"
 NeedsRequirement="FALSE"
 Name="Terminate session"
>
<PreConditions>
</PreConditions>
<Actions>
<Action>THIS &lt;- HandleModeChange.NoProcedure</Action><Action>EURORADIO.CloseRBCSession()</Action></Actions>
</RuleCondition></Conditions>
</Rule></Rules>
</StateMachine></State><State
 X="60"
 Y="570"
 Width="100"
 Height="50"
 Implemented="TRUE"
 Name="A100"
>
<ReqRef
 Id="7ca0878c-f3b5-45ba-ad1f-001f5cf3180d"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
>
</ReqRef><StateMachine
 InitialState=""
 Implemented="TRUE"
 NeedsRequirement="FALSE"
>
<Rules>
<Rule
 Priority="Processing"
 Implemented="TRUE"
 Name="A100"
>
<ReqRef
 Id="7ca0878c-f3b5-45ba-ad1f-001f5cf3180d"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
>
</ReqRef><SubRules></SubRules>
<Conditions>
<RuleCondition
 Implemented="TRUE"
 NeedsRequirement="FALSE"
 Name="End the mission"
>
<PreConditions>
</PreConditions>
<Actions>
<Action>THIS &lt;- HandleModeChange.EndOfMission</Action></Actions>
</RuleCondition></Conditions>
</Rule></Rules>
</StateMachine></State><State
 X="360"
 Y="440"
 Width="100"
 Height="50"
 Implemented="TRUE"
 NeedsRequirement="FALSE"
 Name="D080"
>
<StateMachine
 InitialState=""
 Implemented="TRUE"
 NeedsRequirement="FALSE"
>
<Rules>
<Rule
 Priority="Processing"
 Implemented="TRUE"
 NeedsRequirement="FALSE"
 Name="D080"
>
<SubRules></SubRules>
<Conditions>
<RuleCondition
 Implemented="TRUE"
 Name="Level 2 or 3"
>
<ReqRef
 Id="0cd426d1-35bd-4be9-be23-a5f473998d40"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
>
</ReqRef><PreConditions>
<PreCondition>Level.Value in [Level.L2, Level.L3]</PreCondition></PreConditions>
<Actions>
<Action>THIS &lt;- ShuntingInitiatedByDriver.A095</Action></Actions>
</RuleCondition><RuleCondition
 Implemented="TRUE"
 Name="Level 0, 1 or NTC"
>
<ReqRef
 Id="465fdc06-3913-4ca5-89e8-36b2eec18509"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
>
</ReqRef><PreConditions>
<PreCondition>Level.Value in [Level.L0, Level.L1, Level.LNTC]</PreCondition></PreConditions>
<Actions>
<Action>HandleModeChange &lt;- HandleModeChange.NoProcedure</Action></Actions>
</RuleCondition></Conditions>
</Rule></Rules>
</StateMachine></State><State
 X="660"
 Y="440"
 Width="100"
 Height="50"
 Implemented="TRUE"
 Name="A095"
>
<ReqRef
 Id="6f5b08a4-6fc6-431d-926a-e1b6bfaa34e7"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
>
</ReqRef><StateMachine
 InitialState=""
 Implemented="TRUE"
 NeedsRequirement="FALSE"
>
<Rules>
<Rule
 Priority="Processing"
 Implemented="TRUE"
 Name="A095"
>
<ReqRef
 Id="6f5b08a4-6fc6-431d-926a-e1b6bfaa34e7"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
>
</ReqRef><SubRules></SubRules>
<Conditions>
<RuleCondition
 Implemented="TRUE"
 NeedsRequirement="FALSE"
 Name="Report mode change to RBC"
>
<PreConditions>
</PreConditions>
<Actions>
<Action>THIS &lt;- HandleModeChange.ShuntingInitiatedByDriver.S100</Action></Actions>
</RuleCondition></Conditions>
</Rule></Rules>
</StateMachine></State><State
 X="60"
 Y="50"
 Width="100"
 Height="50"
 Implemented="TRUE"
 NeedsRequirement="FALSE"
 Name="S0"
>
<StateMachine
 InitialState=""
 Implemented="TRUE"
 NeedsRequirement="FALSE"
>
<Rules>
<Rule
 Priority="Processing"
 Implemented="TRUE"
 Name="E015"
>
<ReqRef
 Id="3d01d017-72ad-4ae6-888e-a4e7f0241a33"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
>
</ReqRef><ReqRef
 Id="a7dfd21b-40f7-4ea2-8604-1cb1cf5a2a65"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
>
</ReqRef><SubRules></SubRules>
<Conditions>
<RuleCondition
 Implemented="TRUE"
 NeedsRequirement="FALSE"
 Name="E015"
>
<PreConditions>
</PreConditions>
<Actions>
<Action>THIS &lt;- HandleModeChange.ShuntingInitiatedByDriver.D020</Action></Actions>
</RuleCondition></Conditions>
</Rule></Rules>
</StateMachine></State></States>
</StateMachine></State><State
 X="730"
 Y="60"
 Width="310"
 Height="50"
 Name="Override"
>
<StateMachine
 InitialState=""
 NeedsRequirement="FALSE"
>
<ReqRef
 Id="4327460f-edc2-4267-8dc2-70ca734e4df9"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
>
</ReqRef></StateMachine></State><State
 X="30"
 Y="60"
 Width="380"
 Height="50"
 NeedsRequirement="FALSE"
 Name="EndOfMission"
>
<ReqRef
 Id="5f9152b9-260e-437e-a7d1-b6acb37d9dba"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
>
</ReqRef><StateMachine
 InitialState="Step1"
 NeedsRequirement="FALSE"
>
<ReqRef
 Id="5f9152b9-260e-437e-a7d1-b6acb37d9dba"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
>
</ReqRef><States>
<State
 X="60"
 Y="50"
 Width="100"
 Height="50"
 Implemented="TRUE"
 Name="Step1"
>
<ReqRef
 Id="9a9d1994-65cc-4ce3-8805-06dbf30f991b"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
>
</ReqRef><StateMachine
 InitialState="Step1"
>
<States>
<State
 Implemented="TRUE"
 Name="Step1"
>
<StateMachine
 InitialState=""
>
<Rules>
<Rule
 Priority="Processing"
 Implemented="TRUE"
 Name="Check communcation sessions"
>
<SubRules></SubRules>
<Conditions>
<RuleCondition
 Name="RIU session exists"
>
<ReqRef
 Id="76ba8efa-4749-4010-974a-06666af596e4"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
>
</ReqRef><PreConditions>
<PreCondition>False</PreCondition></PreConditions>
<Actions>
<Action>THIS &lt;- Step2_RIU</Action></Actions>
</RuleCondition><RuleCondition
 Implemented="TRUE"
 Name="Euroradio session exists"
>
<ReqRef
 Id="0a55611b-2936-44a8-89fb-8b7fa083a761"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
>
</ReqRef><PreConditions>
<PreCondition>EURORADIO.HasActiveSession()</PreCondition></PreConditions>
<Actions>
<Action>THIS &lt;- Step2_Euroradio</Action></Actions>
</RuleCondition><RuleCondition
 Implemented="TRUE"
 Name="No communication sessions"
>
<ReqRef
 Id="219ceefb-8943-4c10-a74d-b6ef703ec766"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
>
</ReqRef><ReqRef
 Id="f31f1b65-224b-4941-9951-eebbd7994a51"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
>
</ReqRef><PreConditions>
</PreConditions>
<Actions>
<Action>THIS &lt;- ExitState</Action></Actions>
</RuleCondition></Conditions>
</Rule></Rules>
</StateMachine></State></States>
</StateMachine></State><State
 X="690"
 Y="50"
 Width="100"
 Height="50"
 Implemented="TRUE"
 Name="Step2_Euroradio"
>
<ReqRef
 Id="7b63a22c-a47e-4e98-87a7-bb6800dbb38e"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
>
</ReqRef><StateMachine
 InitialState="Step2"
>
<Rules>
<Rule
 Priority="Processing"
 Name="Send End of Mission"
>
<SubRules></SubRules>
<Conditions>
<RuleCondition
 Name="Send End of Mission"
>
<PreConditions>
</PreConditions>
<Actions>
<Action>EURORADIO.SendEoMReport()</Action><Action>THIS &lt;- Step3</Action><Action>LastEoMRequestTime &lt;- CurrentTime</Action><Action>NumberOfSentEoMRequestRepetitions  &lt;- 0</Action></Actions>
</RuleCondition></Conditions>
</Rule></Rules>
</StateMachine></State><State
 X="370"
 Y="160"
 Width="100"
 Height="50"
 Name="Step2_RIU"
>
<StateMachine
 InitialState="CloseSession"
>
<States>
<State
 X="50"
 Y="60"
 Width="100"
 Height="50"
 Name="CloseSession"
>
<StateMachine
 InitialState=""
>
<Rules>
<Rule
 Priority="Processing"
 Name="Close the session"
>
<SubRules></SubRules>
<Conditions>
<RuleCondition
 Name="Close the session"
>
<PreConditions>
</PreConditions>
<Actions>
<Action>THIS &lt;- CheckEuroradio</Action></Actions>
</RuleCondition></Conditions>
</Rule></Rules>
</StateMachine></State><State
 X="290"
 Y="60"
 Width="100"
 Height="50"
 Implemented="TRUE"
 Name="CheckEuroradio"
>
<ReqRef
 Id="219ceefb-8943-4c10-a74d-b6ef703ec766"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
>
</ReqRef><StateMachine
 InitialState=""
 Implemented="TRUE"
>
<Rules>
<Rule
 Priority="Processing"
 Implemented="TRUE"
 Name="Check Euroradio session"
>
<SubRules></SubRules>
<Conditions>
<RuleCondition
 Implemented="TRUE"
 Name="Euroradio session exists"
>
<ReqRef
 Id="0a55611b-2936-44a8-89fb-8b7fa083a761"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
>
</ReqRef><PreConditions>
<PreCondition>EURORADIO.HasActiveSession()</PreCondition></PreConditions>
<Actions>
<Action>THIS &lt;- Step2_Euroradio</Action></Actions>
</RuleCondition><RuleCondition
 Implemented="TRUE"
 Name="No Euroradio session"
>
<ReqRef
 Id="6cb672e1-5b1b-46b0-86fb-2ea853009bd5"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
>
</ReqRef><PreConditions>
</PreConditions>
<Actions>
<Action>THIS &lt;- ExitState</Action></Actions>
</RuleCondition></Conditions>
</Rule></Rules>
</StateMachine></State></States>
</StateMachine></State><State
 X="690"
 Y="160"
 Width="100"
 Height="50"
 Implemented="TRUE"
 Name="Step3"
>
<ReqRef
 Id="d59dd844-f144-4d73-a4eb-ba5f21dd2958"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
>
</ReqRef><StateMachine
 InitialState=""
 Implemented="TRUE"
>
<Rules>
<Rule
 Priority="Processing"
 Implemented="TRUE"
 Name="Wait the RBC acknowledgement"
>
<SubRules></SubRules>
<Conditions>
<RuleCondition
 Implemented="TRUE"
 Name="Wait the RBC acknowledgement"
>
<ReqRef
 Id="d59dd844-f144-4d73-a4eb-ba5f21dd2958"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
>
</ReqRef><PreConditions>
<PreCondition>Available ( EURORADIO.EuroradioMessageIn.ACKNOWLEDGEMENT_OF_TERMINATION_OF_A_COMMUNICATION_SESSION )</PreCondition></PreConditions>
<Actions>
<Action>THIS &lt;- Step4</Action></Actions>
</RuleCondition><RuleCondition
 Implemented="TRUE"
 Name="No answer, maximum number of requests reached"
>
<ReqRef
 Id="f9f81d1e-22c3-429b-b29b-0c828790dce4"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
>
</ReqRef><PreConditions>
<PreCondition>LastEoMRequestTime + EURORADIO.TimeBeforeMessageRepetition &lt;= CurrentTime</PreCondition><PreCondition>NumberOfSentEoMRequestRepetitions == 3</PreCondition></PreConditions>
<Actions>
<Action>THIS &lt;- Step4</Action></Actions>
</RuleCondition><RuleCondition
 Implemented="TRUE"
 Name="No answer, a new request can be sent"
>
<ReqRef
 Id="4d7758a5-c99b-4537-8da4-a51b99dafd40"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
>
</ReqRef><PreConditions>
<PreCondition>LastEoMRequestTime + EURORADIO.TimeBeforeMessageRepetition &lt;= CurrentTime</PreCondition></PreConditions>
<Actions>
<Action>EURORADIO.SendEoMReport()</Action><Action>NumberOfSentEoMRequestRepetitions  &lt;- NumberOfSentEoMRequestRepetitions  + 1</Action><Action>LastEoMRequestTime &lt;- CurrentTime</Action></Actions>
</RuleCondition></Conditions>
</Rule></Rules>
</StateMachine></State><State
 X="690"
 Y="270"
 Width="100"
 Height="50"
 Implemented="TRUE"
 Name="Step4"
>
<ReqRef
 Id="e86b435b-86a1-4af1-a9af-e87aaca847d9"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
>
</ReqRef><ReqRef
 Id="c55df22b-a932-48aa-9c94-b034916ab339"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
>
</ReqRef><StateMachine
 InitialState=""
 Implemented="TRUE"
>
<Rules>
<Rule
 Priority="Processing"
 Implemented="TRUE"
 Name="Terminate the communication session"
>
<SubRules></SubRules>
<Conditions>
<RuleCondition
 Implemented="TRUE"
 Name="Terminate the communication session"
>
<PreConditions>
</PreConditions>
<Actions>
<Action>EURORADIO.CloseRBCSession()</Action><Action>THIS &lt;- ExitState</Action></Actions>
</RuleCondition></Conditions>
</Rule></Rules>
</StateMachine></State><State
 X="60"
 Y="270"
 Width="100"
 Height="50"
 Name="ExitState"
>
<StateMachine
 InitialState=""
>
<Rules>
<Rule
 Priority="Processing"
 Name="Go to NoProcedure"
>
<SubRules></SubRules>
<Conditions>
<RuleCondition
 Name="Go to NoProcedure"
>
<PreConditions>
</PreConditions>
<Actions>
<Action>THIS &lt;- NoProcedure</Action></Actions>
</RuleCondition></Conditions>
</Rule></Rules>
</StateMachine></State></States>
</StateMachine></State><State
 X="550"
 Y="690"
 Width="100"
 Height="50"
 Name="StandBy"
>
<StateMachine
 InitialState=""
 NeedsRequirement="FALSE"
>
</StateMachine></State><State
 X="220"
 Y="690"
 Width="100"
 Height="50"
 Name="SystemFailure"
>
<StateMachine
 InitialState=""
 NeedsRequirement="FALSE"
>
</StateMachine></State></States>
</StateMachine></StateMachines>
<Procedures>
<Procedure
 NeedsRequirement="FALSE"
 Name="HandleInputs"
>
<Rules>
<Rule
 Priority="Processing"
 Implemented="TRUE"
 NeedsRequirement="FALSE"
 Name="HandleOdometryInputs"
>
<Comment>When a new odometer message is received, its content is copied to EFS internal variables.</Comment>
<SubRules></SubRules>
<Conditions>
<RuleCondition
 NeedsRequirement="FALSE"
 Name="HandleOdometryInputs"
>
<Comment></Comment>
<PreConditions>
<PreCondition>Available ( Odometry.Message )</PreCondition></PreConditions>
<Actions>
<Action>Odometry.StoreOdometerMessage ( Odometry.Message )</Action></Actions>
</RuleCondition></Conditions>
</Rule><Rule
 Priority="Processing"
 Implemented="TRUE"
 NeedsRequirement="FALSE"
 Name="HandleBTMInputs"
>
<Comment>When a new balise telegram is received, its content is copied to EFS internal variables.</Comment>
<SubRules></SubRules>
<Conditions>
<RuleCondition
 NeedsRequirement="FALSE"
 Name="HandleBTMInputs"
>
<Comment></Comment>
<PreConditions>
<PreCondition>Available ( BTM.Message )</PreCondition></PreConditions>
<Actions>
<Action>BTM.StoreBaliseGroupMessage ( BTM.Message )</Action></Actions>
</RuleCondition></Conditions>
</Rule><Rule
 Priority="Processing"
 NeedsRequirement="FALSE"
 Name="HandleEuroradioInputs"
>
<Comment>When a new Euroradio message is received, its content is copied to EFS internal variables.</Comment>
<SubRules></SubRules>
<Conditions>
<RuleCondition
 NeedsRequirement="FALSE"
 Name="HandleEuroradioInputs"
>
<Comment></Comment>
<PreConditions>
<PreCondition>Available ( EURORADIO.EuroradioMessageIn )</PreCondition></PreConditions>
<Actions>
<Action>EURORADIO.HandleEuroradioMessage ( EURORADIO.EuroradioMessageIn )</Action></Actions>
</RuleCondition></Conditions>
</Rule><Rule
 Priority="Processing"
 NeedsRequirement="FALSE"
 Name="UpdateKernelMode"
>
<SubRules></SubRules>
<Conditions>
<RuleCondition
 NeedsRequirement="FALSE"
 Name="UpdateKernelMode"
>
<PreConditions>
</PreConditions>
<Actions>
<Action>ModeTransitions.UpdateMode()</Action></Actions>
</RuleCondition></Conditions>
</Rule><Rule
 Priority="Processing"
 NeedsRequirement="FALSE"
 Name="UpdatePositionState"
>
<SubRules></SubRules>
<Conditions>
<RuleCondition
 NeedsRequirement="FALSE"
 Name="UpdatePositionState"
>
<PreConditions>
</PreConditions>
<Actions>
<Action>TrainPosition.UpdatePositionState()</Action></Actions>
</RuleCondition></Conditions>
</Rule><Rule
 Priority="Processing"
 NeedsRequirement="FALSE"
 Name="InitializeInternalVariables"
>
<SubRules></SubRules>
<Conditions>
<RuleCondition
 NeedsRequirement="FALSE"
 Name="InitializeInternalVariables"
>
<PreConditions>
</PreConditions>
<Actions>
<Action>SpeedAndDistanceMonitoring.UpdateMonitoring()</Action></Actions>
</RuleCondition></Conditions>
</Rule></Rules>
</Procedure><Procedure
 NeedsRequirement="FALSE"
 Name="InitializeTestEnvironment"
>
<Rules>
<Rule
 Priority="Processing"
 NeedsRequirement="FALSE"
 Name="DMI"
>
<SubRules></SubRules>
<Conditions>
<RuleCondition
 NeedsRequirement="FALSE"
 Name="DMI"
>
<PreConditions>
</PreConditions>
<Actions>
<Action>DMI.DMI1.DeskOpen &lt;- True</Action><Action>DMI.DMI1.IsMaster &lt;- True</Action><Action>DMI.DMI2.DeskOpen &lt;- False</Action><Action>DMI.DMI2.IsMaster &lt;- False</Action></Actions>
</RuleCondition></Conditions>
</Rule><Rule
 Priority="Processing"
 NeedsRequirement="FALSE"
 Name="Train position"
>
<SubRules></SubRules>
<Conditions>
<RuleCondition
 NeedsRequirement="FALSE"
 Name="Train position"
>
<PreConditions>
</PreConditions>
<Actions>
<Action>BTM.LRBG &lt;- BTM.BaliseGroup
{
    Position =&gt; BTM.Position
    {
        Position =&gt; 150.0,
        UnderReadingAmountOdo =&gt; 2.0,
        OverReadingAmountOdo =&gt; 1.0
    },
    NID =&gt; 1986,
    Orientation =&gt; Orientation.Nominal
}</Action><Action>Kernel.TrainPosition.Position &lt;- Kernel.TrainPosition.TrainPosition
{
    DirectionalPositionInformation =&gt; Kernel.TrainPosition.DirectionalTrainPositionInformation
    {
        TrainFrontEndPosition =&gt; Orientation.Nominal,
        TrainOrientation =&gt; Orientation.Nominal,
        TrainRunningDirection =&gt; Orientation.Nominal
    },
    DataState =&gt; Default.DataState.Valid
}</Action><Action>Odometry.NominalDistance &lt;- 150.0</Action><Action>Odometry.Accuracy &lt;- Odometry.OdometerAccuracy
{
    D_ura =&gt; 12.0,
    D_ora =&gt; 14.0,
    V_ora =&gt; 1.0,
    V_ura =&gt; 2.0
}</Action><Action>Kernel.TrainPosition.Position.DirectionalPositionInformation.TrainOrientation &lt;- Default.Orientation.Nominal</Action></Actions>
</RuleCondition></Conditions>
</Rule><Rule
 Priority="Processing"
 NeedsRequirement="FALSE"
 Name="Train data"
>
<SubRules></SubRules>
<Conditions>
<RuleCondition
 NeedsRequirement="FALSE"
 Name="Train data"
>
<PreConditions>
</PreConditions>
<Actions>
<Action>TrainData.Initialize()</Action></Actions>
</RuleCondition></Conditions>
</Rule><Rule
 Priority="Processing"
 NeedsRequirement="FALSE"
 Name="Euroradio"
>
<SubRules></SubRules>
<Conditions>
<RuleCondition
 NeedsRequirement="FALSE"
 Name="Euroradio"
>
<PreConditions>
</PreConditions>
<Actions>
<Action>EURORADIO.CurrentRadioSession &lt;- EURORADIO.RadioSession{
SessionInfo =&gt; EURORADIO.RadioSessionInformation{}
}</Action></Actions>
</RuleCondition></Conditions>
</Rule><Rule
 Priority="Processing"
 Implemented="TRUE"
 NeedsRequirement="FALSE"
 Name="Train integrity"
>
<SubRules></SubRules>
<Conditions>
<RuleCondition
 NeedsRequirement="FALSE"
 Name="Train integrity"
>
<PreConditions>
</PreConditions>
<Actions>
<Action>Kernel.TrainIntegrity.Status &lt;- Messages.Q_LENGTH.Train_integrity_confirmed_by_driver</Action></Actions>
</RuleCondition></Conditions>
</Rule><Rule
 Priority="Processing"
 NeedsRequirement="FALSE"
 Name="Power on"
>
<SubRules></SubRules>
<Conditions>
<RuleCondition
 NeedsRequirement="FALSE"
 Name="Power on"
>
<PreConditions>
</PreConditions>
<Actions>
<Action>PowerOn &lt;- True</Action></Actions>
</RuleCondition></Conditions>
</Rule></Rules>
</Procedure><Procedure
 Name="InitializeElementsForMA"
>
<Rules>
<Rule
 Priority="Processing"
 Name="Initialize SSP + Gradients"
>
<SubRules></SubRules>
<Conditions>
<RuleCondition
 Name="Initialize SSP + Gradients"
>
<PreConditions>
</PreConditions>
<Actions>
<Action>Kernel.TrackDescription.Gradient.Gradients &lt;-
[
    Kernel.TrackDescription.Gradient.GradientInfo
    {
        Distance =&gt; 0.0,
        Gradient =&gt; 0.7
    },
    Kernel.TrackDescription.Gradient.GradientInfo
    {
        Distance =&gt; 4800.0,
        Gradient =&gt; 0.94
    }
]</Action><Action>Kernel.TrackDescription.StaticSpeedProfile.SSP &lt;-
[
    Kernel.TrackDescription.StaticSpeedProfile.StaticSpeedRestriction
    {
        Distance =&gt; 0.0,
        BasicSpeed =&gt; 70.0,
        TrainLengthDelay =&gt; Messages.Q_FRONT.No_train_length_delay_on_validity_end_point_of_profile_element,
        Categories =&gt;
        [
            Kernel.TrackDescription.StaticSpeedProfile.SSPCategory
            {
                CantDeficiency =&gt; Messages.NC_CDTRAIN.Cant_Deficiency_130_mm,
                OtherSpecific =&gt; Kernel.TrainData.TrainCategory.FreightTrainInG,
                Qualifier =&gt; Messages.Q_DIFF.Cant_Deficiency_specific_category ,
                Speed =&gt; 70.0
            }
        ]
    }
]</Action></Actions>
</RuleCondition></Conditions>
</Rule></Rules>
</Procedure></Procedures>
<Variables>
<Variable
 Type="DriverId"
 DefaultValue=""
 VariableMode="Internal"
 Implemented="TRUE"
 Name="DriverId"
>
<ReqRef
 Id="8f27e8d5-aaaf-4ec3-986d-36345986e5f2"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
>
</ReqRef><ReqRef
 Id="20057b5b-4d7d-471b-8b22-6034d8be03a7"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
>
</ReqRef><Comment>The data state and the value of the driver id.</Comment>
</Variable><Variable
 Type="Kernel.LevelData"
 DefaultValue=""
 VariableMode="Internal"
 Implemented="TRUE"
 Name="Level"
>
<ReqRef
 Id="8f27e8d5-aaaf-4ec3-986d-36345986e5f2"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
>
</ReqRef><ReqRef
 Id="2bd0d6a5-d918-4308-994a-c1689c4a4e30"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
>
<Comment></Comment>
</ReqRef><Comment>Indicates the state and the value of the current ERTMS/ETCS level of the train.</Comment>
</Variable><Variable
 Type="Mode"
 DefaultValue="Mode.NP"
 VariableMode="Internal"
 Implemented="TRUE"
 Name="Mode"
>
<ReqRef
 Id="9a35843b-0036-48f7-adce-1bd6c052fe69"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
>
</ReqRef><Comment></Comment>
</Variable><Variable
 Type="Boolean"
 DefaultValue="False"
 VariableMode="Internal"
 Implemented="TRUE"
 Name="PowerOn"
>
<ReqRef
 Id="b144cb88-77c8-4ba0-96b6-b83f713905dd"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
>
</ReqRef><Comment>Indicates whether the EVC is On or Off.</Comment>
</Variable><Variable
 Type="TrainRunningNumber"
 DefaultValue=""
 VariableMode="Internal"
 Implemented="TRUE"
 Name="TrainRunningNumber"
>
<ReqRef
 Id="8f27e8d5-aaaf-4ec3-986d-36345986e5f2"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
>
<Comment></Comment>
</ReqRef><ReqRef
 Id="07bfd145-efdd-4512-b930-b761213e0377"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
>
</ReqRef><ReqRef
 Id="47e76500-ce7e-48be-9414-97b01bbaaf74"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
>
</ReqRef><Comment></Comment>
</Variable><Variable
 Type="Kernel.EmergencyStops"
 DefaultValue=""
 VariableMode="Internal"
 Implemented="TRUE"
 Name="EmergencyStops"
>
<ReqRef
 Id="2b2cca84-5637-4f57-be10-029b36aa0f1a"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
>
</ReqRef><ReqRef
 Id="19082c8b-d1cc-4d23-a9da-8581737a0760"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
>
</ReqRef><Comment></Comment>
</Variable><Variable
 Type="Boolean"
 DefaultValue="Boolean.False"
 VariableMode="Internal"
 Implemented="TRUE"
 Name="EmergencyBrakeApplied"
>
<ReqRef
 Id="2b2cca84-5637-4f57-be10-029b36aa0f1a"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
>
</ReqRef><ReqRef
 Id="458c52b6-b128-424e-b29e-05cf4a057a91"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
>
</ReqRef><Comment>Indicates the status of emergency brake of the train.</Comment>
</Variable><Variable
 Type="Default.BaseTypes.Distance"
 DefaultValue=""
 VariableMode="Internal"
 Implemented="TRUE"
 Name="FirstTargetAtZeroSpeed"
>
<ReqRef
 Id="615ccbef-ab0a-4f6f-9624-9ace6361ea83"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
>
</ReqRef><ReqRef
 Id="2cd466ba-aedb-4f3e-8661-ae10ee1737c9"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
>
</ReqRef><Comment>Represents the first target at zero speed.</Comment>
</Variable><Variable
 Type="Default.BaseTypes.Distance"
 VariableMode="Internal"
 Implemented="TRUE"
 Name="IndicationLocationAtMrspSpeed"
>
<ReqRef
 Id="615ccbef-ab0a-4f6f-9624-9ace6361ea83"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
>
</ReqRef><ReqRef
 Id="abc0e167-3d30-443d-b62a-963a5228be72"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
>
</ReqRef><Comment>The indication location at MRSP speed.</Comment>
</Variable><Variable
 Type="Kernel.SupervisionStatus"
 DefaultValue=""
 VariableMode="Internal"
 Implemented="TRUE"
 Name="SupervisionStatus"
>
<ReqRef
 Id="b8bd12fa-1398-4b7e-82b5-d9fea4894091"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
>
</ReqRef><ReqRef
 Id="10645ba3-8d86-41ad-9956-71f5be85b4c1"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
>
</ReqRef><Comment></Comment>
</Variable><Variable
 Type="Default.BaseTypes.Distance"
 DefaultValue="0.0"
 VariableMode="Internal"
 Implemented="TRUE"
 NeedsRequirement="FALSE"
 Name="TargetDistance"
>
<ReqRef
 Id="c5c3fd28-41ac-4ad2-a5ea-ba3e63205382"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
>
</ReqRef><Comment>The target distance of the train.</Comment>
</Variable><Variable
 Type="TrainIntegrity"
 DefaultValue=""
 VariableMode="InOut"
 Implemented="TRUE"
 Name="TrainIntegrity"
>
<ReqRef
 Id="2b2ed08d-1183-4018-b0cc-3b454b2f8c4d"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
>
</ReqRef><Comment>This variable represens the train integrity information as described in 3.6.5.2.3.</Comment>
</Variable><Variable
 Type="Kernel.NationalValues.NationalDefaultData"
 DefaultValue=""
 VariableMode="Internal"
 Implemented="TRUE"
 Name="DefaultValues"
>
<ReqRef
 Id="24c3f669-e8b2-4f88-9cee-d6cbd5a7c513"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
>
</ReqRef><ReqRef
 Id="18962f3c-7beb-4506-837c-10c871272cc9"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
>
</ReqRef><Comment></Comment>
</Variable><Variable
 Type="String"
 DefaultValue=""
 VariableMode="Internal"
 Implemented="TRUE"
 Name="NationalSystemId"
>
<ReqRef
 Id="25de9975-544f-48ba-8ed8-aa2ade8433e7"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
>
</ReqRef><Comment>Represents the id of the current national system.</Comment>
</Variable><Variable
 Type="OperatedSystemVersion"
 DefaultValue=""
 VariableMode="InOut"
 Implemented="TRUE"
 Name="OperatedSystemVersion"
>
<ReqRef
 Id="a32b885e-f73e-44f1-9cba-50faee55ee28"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
>
<Comment></Comment>
</ReqRef><Comment>The version of the ERTMS/ETCS system.</Comment>
</Variable><Variable
 Type="Boolean"
 DefaultValue="Boolean.False"
 VariableMode="Internal"
 Implemented="TRUE"
 Name="EquipmentIsolated"
>
<ReqRef
 Id="df71d1ef-a7ee-44b4-839b-8a08ebe2e1c9"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
>
</ReqRef><Comment>Indicates if the ERTMS/ETCS on-board equipment is isolated.</Comment>
</Variable><Variable
 Type="Boolean"
 DefaultValue="Boolean.False"
 VariableMode="Internal"
 Implemented="TRUE"
 Name="MissionIsOnGoing"
>
<ReqRef
 Id="2df20d0d-1f50-4e04-aa20-f8d1ab4e0945"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
>
</ReqRef><ReqRef
 Id="9a711b7c-ff6b-448c-a9cd-2aa9669899ad"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
>
</ReqRef><ReqRef
 Id="64b644e8-aaed-41c9-ab84-f81ea4041d54"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
>
</ReqRef><ReqRef
 Id="588364b4-1c15-454c-a0f1-3235f2130fc5"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
>
</ReqRef><ReqRef
 Id="66ed413a-6b6e-4b23-b847-4b1870c4d831"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
>
</ReqRef><ReqRef
 Id="84c57300-1791-4e2f-9eba-ad6f95834b74"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
>
</ReqRef><ReqRef
 Id="31c44e96-e029-418d-b715-af8b375bf89b"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
>
</ReqRef><ReqRef
 Id="9055a6b1-6135-49e8-a779-622b3270c280"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
>
</ReqRef><Comment>Indicates if the train has started a mission.</Comment>
</Variable><Variable
 Type="Default.BaseTypes.Time"
 DefaultValue="0.0"
 VariableMode="Internal"
 Implemented="TRUE"
 Name="CurrentTime"
>
<ReqRef
 Id="c786347b-7daa-4026-94f2-b1dfc195823c"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
>
</ReqRef><Comment>Represents the current time of the EVC. Its value increases each cycle by the value of the constant CycleDuration.</Comment>
</Variable><Variable
 Type="Default.BaseTypes.Time"
 DefaultValue="0.34"
 VariableMode="Internal"
 Implemented="TRUE"
 NeedsRequirement="FALSE"
 Name="CycleDuration"
>
<Comment>Represents the duration of a whole EVC cycle.</Comment>
</Variable><Variable
 Type="Messages.NID_ENGINE"
 DefaultValue="0"
 VariableMode="Internal"
 Implemented="TRUE"
 NeedsRequirement="FALSE"
 Name="NidEngine"
>
<Comment>The NID of the engine, used for sending messages to the trackside.</Comment>
</Variable><Variable
 Type="String"
 VariableMode="Internal"
 Implemented="TRUE"
 NeedsRequirement="FALSE"
 Name="TripReason"
>
<ReqRef
 Id="8bf47cec-0b77-42d2-b42f-49c0c29dbcec"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
>
</ReqRef><Comment>Represents the trip raison, if any.</Comment>
</Variable><Variable
 Type="Boolean"
 DefaultValue="Boolean.False"
 VariableMode="Incoming"
 Implemented="TRUE"
 Name="NLSignalReceived"
>
<ReqRef
 Id="d0507ada-5b0f-4754-b198-46988a339561"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
>
</ReqRef><Comment>Indicates if the &quot;non leading&quot; input signal is received.</Comment>
</Variable><Variable
 Type="Boolean"
 DefaultValue="Boolean.False"
 VariableMode="Incoming"
 Implemented="TRUE"
 Name="SleepingSignalIsReceived"
>
<ReqRef
 Id="b1cc8b5b-794d-474f-a00b-f1ae16b9be7f"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
>
</ReqRef><ReqRef
 Id="fcc9f8c8-ec5c-4e6e-a905-d17b3e6c2a14"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
>
</ReqRef><Comment>Indicates if the &quot;sleeping&quot; input signal is received.</Comment>
</Variable><Variable
 Type="Kernel.HandleModeChangeSM"
 VariableMode="Internal"
 Name="HandleModeChange"
>
</Variable><Variable
 Type="Integer"
 DefaultValue="0"
 VariableMode="Internal"
 Implemented="TRUE"
 Name="NumberOfSentEoMRequestRepetitions"
>
<ReqRef
 Id="f9f81d1e-22c3-429b-b29b-0c828790dce4"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
>
</ReqRef><Comment>Represents the number of already sent EOM requests</Comment>
</Variable><Variable
 Type="Default.BaseTypes.Time"
 DefaultValue="0.0"
 VariableMode="Internal"
 Implemented="TRUE"
 Name="LastEoMRequestTime"
>
<ReqRef
 Id="4d7758a5-c99b-4537-8da4-a51b99dafd40"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
>
</ReqRef><ReqRef
 Id="f9f81d1e-22c3-429b-b29b-0c828790dce4"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
>
</ReqRef><Comment>Represents the time when the last EoM request was sent</Comment>
</Variable></Variables>
<Rules>
<Rule
 Priority="UpdateINTERNAL"
 NeedsRequirement="FALSE"
 Name="HandleInputs"
>
<Comment>Initialises a new EFS cycle with input variables.</Comment>
<SubRules></SubRules>
<Conditions>
<RuleCondition
 NeedsRequirement="FALSE"
 Name="HandleInputs"
>
<Comment></Comment>
<PreConditions>
</PreConditions>
<Actions>
<Action>HandleInputs()</Action></Actions>
</RuleCondition></Conditions>
</Rule><Rule
 Priority="CleanUp"
 Implemented="TRUE"
 NeedsRequirement="FALSE"
 Name="UpdateSystemTime"
>
<SubRules></SubRules>
<Conditions>
<RuleCondition
 Implemented="TRUE"
 NeedsRequirement="FALSE"
 Name="UpdateSystemTime"
>
<Comment></Comment>
<PreConditions>
</PreConditions>
<Actions>
<Action>CurrentTime &lt;- CurrentTime + CycleDuration</Action></Actions>
</RuleCondition></Conditions>
</Rule></Rules>
</NameSpace>
